function t(t,e,n,s){Object.defineProperty(t,e,{get:n,set:s,enumerable:!0,configurable:!0})}var e={};t(e,"RADIANS_TO_DEGREES",(()=>n)),t(e,"DEGREES_TO_RADIANS",(()=>s)),t(e,"clamp",(()=>o)),t(e,"lerp",(()=>r));const n=180/Math.PI,s=Math.PI/180;function o(t,e,n){return e<t?t:e>n?n:e}function r(t,e,n){return(n=o(0,n,1))*(e-t)+t}const i={debug:!1,perf:!1};function l(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(l);const e={};for(const n in t){const s=t[n];e[n]=null!=t&&"object"==typeof t?l(s):s}return e}const a="-xin-data",c=`.${a}`,h="-xin-event",u=`.${h}`,d=Symbol("xin-path"),f=Symbol("xin-value"),p=t=>t[d];function m(t){return"object"==typeof t&&null!==t&&t[f]||t}const b=new WeakMap,g=new WeakMap,y=t=>{const e=t.cloneNode();if(e instanceof HTMLElement){const n=g.get(t),s=b.get(t);null!=n&&g.set(e,l(n)),null!=s&&b.set(e,l(s))}for(const n of t instanceof HTMLTemplateElement?t.content.childNodes:t.childNodes)n instanceof HTMLElement||n instanceof DocumentFragment?e.appendChild(y(n)):e.appendChild(n.cloneNode());return e},v=new WeakMap,w=t=>{const e=document.body.parentElement;for(;null!=t.parentElement&&t.parentElement!==e;){const e=v.get(t);if(null!=e)return e;t=t.parentElement}return!1},$=Symbol("observer should be removed"),E=[],x=[];let _,A,S=!1;class O{constructor(t,e){const n="string"==typeof e?`"${e}"`:`function ${e.name}`;let s;if("string"==typeof t)this.test=e=>"string"==typeof e&&""!==e&&(t.startsWith(e)||e.startsWith(t)),s=`test = "${t}"`;else if(t instanceof RegExp)this.test=t.test.bind(t),s=`test = "${t.toString()}"`;else{if(!(t instanceof Function))throw new Error("expect listener test to be a string, RegExp, or test function");this.test=t,s=`test = function ${t.name}`}if(this.description=`${s}, ${n}`,"function"!=typeof e)throw new Error("expect callback to be a path or function");this.callback=e,E.push(this)}}const C=()=>{i.perf&&console.time("xin async update");const t=[...x];for(const e of t)E.filter((t=>{let n;try{n=t.test(e)}catch(n){throw new Error(`Listener ${t.description} threw "${n}" at "${e}"`)}return n===$?(j(t),!1):n})).forEach((t=>{let n;try{n=t.callback(e)}catch(n){console.error(`Listener ${t.description} threw "${n}" handling "${e}"`)}n===$&&j(t)}));x.splice(0),S=!1,"function"==typeof A&&A(),i.perf&&console.timeEnd("xin async update")},M=t=>{const e="string"==typeof t?t:p(t);if(void 0===e)throw console.error("touch was called on an invalid target",t),new Error("touch was called on an invalid target");!1===S&&(_=new Promise((t=>{A=t})),S=setTimeout(C)),null==x.find((t=>e.startsWith(t)))&&x.push(e)},k=(t,e)=>new O(t,e),j=t=>{const e=E.indexOf(t);if(!(e>-1))throw new Error("unobserve failed, listener not found");E.splice(e,1)},L=t=>{try{return JSON.stringify(t)}catch(t){return"{has circular references}"}},T=(...t)=>new Error(t.map(L).join(" "));let D=0;const P=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1)+(parseInt("10000",36)+ ++D).toString(36).slice(-5),F={},R={};function N(t){if(""===t)return[];if(Array.isArray(t))return t;{const e=[];for(;t.length>0;){let n=t.search(/\[[^\]]+\]/);if(-1===n){e.push(t.split("."));break}{const s=t.slice(0,n);t=t.slice(n),""!==s&&e.push(s.split(".")),n=t.indexOf("]")+1,e.push(t.slice(1,n-1)),"."===t.slice(n,n+1)&&(n+=1),t=t.slice(n)}}return e}}const B=new WeakMap;function I(t,e){void 0===B.get(t)&&B.set(t,{}),void 0===B.get(t)[e]&&(B.get(t)[e]={});const n=B.get(t)[e];return"_auto_"===e?t.forEach(((t,e)=>{void 0===t._auto_&&(t._auto_=P()),n[t._auto_+""]=e})):t.forEach(((t,s)=>{n[V(t,e)+""]=s})),n}function H(t,e,n){n+="";let s=function(t,e){return void 0===B.get(t)||void 0===B.get(t)[e]?I(t,e):B.get(t)[e]}(t,e)[n];return void 0!==s&&V(t[s],e)+""===n||(s=I(t,e)[n]),s}function q(t,e,n){return void 0===t[e]&&void 0!==n&&(t[e]=n),t[e]}function W(t,e,n,s){let o=""!==e?H(t,e,n):n;if(s===F)return t.splice(o,1),B.delete(t),Symbol("deleted");if(s===R)""===e&&void 0===t[o]&&(t[o]={});else if(void 0!==s)if(void 0!==o)t[o]=s;else{if(""===e||V(s,e)+""!=n+"")throw new Error(`byIdPath insert failed at [${e}=${n}]`);t.push(s),o=t.length-1}return t[o]}function z(t){if(!Array.isArray(t))throw T("setByPath failed: expected array, found",t)}function Q(t){if(null==t||!(t instanceof Object))throw T("setByPath failed: expected Object, found",t)}function V(t,e){const n=N(e);let s,o,r,i,l=t;for(s=0,o=n.length;void 0!==l&&s<o;s++){const t=n[s];if(Array.isArray(t))for(r=0,i=t.length;void 0!==l&&r<i;r++){l=l[t[r]]}else if(0===l.length){if(l=l[t.slice(1)],"="!==t[0])return}else if(t.includes("=")){const[e,...n]=t.split("=");l=W(l,e,n.join("="))}else r=parseInt(t,10),l=l[r]}return l}function Z(t,e,n){let s=t;const o=N(e);for(;null!=s&&o.length>0;){const t=o.shift();if("string"==typeof t){const e=t.indexOf("=");if(e>-1){0===e?Q(s):z(s);if(s=W(s,t.slice(0,e),t.slice(e+1),o.length>0?R:n),0===o.length)return!0}else{z(s);const e=parseInt(t,10);if(!(o.length>0)){if(n!==F){if(s[e]===n)return!1;s[e]=n}else s.splice(e,1);return!0}s=s[e]}}else{if(!(Array.isArray(t)&&t.length>0))throw new Error(`setByPath failed, bad path ${e}`);for(Q(s);t.length>0;){const e=t.shift();if(!(t.length>0||o.length>0)){if(n!==F){if(s[e]===n)return!1;s[e]=n}else{if(!Object.prototype.hasOwnProperty.call(s,e))return!1;delete s[e]}return!0}s=q(s,e,t.length>0?{}:[])}}}throw new Error(`setByPath(${t}, ${e}, ${n}) failed`)}const G=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],J={},U=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,Y=(t="",e="")=>""===t?e:null!==e.match(/^\d+$/)||e.includes("=")?`${t}[${e}]`:`${t}.${e}`,K=(t="")=>({get(e,n){if(n===d)return t;if(n===f)return e;if("symbol"==typeof n)return e[n];let s=n;const o=s.match(/^([^.[]+)\.(.+)$/)??s.match(/^([^\]]+)(\[.+)/)??s.match(/^(\[[^\]]+\])\.(.+)$/)??s.match(/^(\[[^\]]+\])\[(.+)$/);if(null!==o){const[,n,s]=o,r=Y(t,n),i=V(e,n);return null!==i&&"object"==typeof i?new Proxy(i,K(r))[s]:i}if(s.startsWith("[")&&s.endsWith("]")&&(s=s.substring(1,s.length-1)),!Array.isArray(e)&&void 0!==e[s]||Array.isArray(e)&&s.includes("=")){let n;if(s.includes("=")){const[t,o]=s.split("=");n=e.find((e=>`${V(e,t)}`===o))}else n=e[s];if(null!==n&&"object"==typeof n){const e=Y(t,s);return new Proxy(n,K(e))}return"function"==typeof n?n.bind(e):n}if(Array.isArray(e)){const n=e[s];return"function"==typeof n?(...n)=>{const o=Array.prototype[s].apply(e,n);return G.includes(s)&&M(t),o}:"object"==typeof n?new Proxy(n,K(Y(t,s))):n}return e[s]},set(e,n,s){null!=s&&s[d]&&(s=s[f]);const o=Y(t,n);if(!(t=>U.test(t))(o))throw new Error(`setting invalid path ${o}`);let r=tt[o];return null!=r&&null!=r[f]&&(r=r[f]),r!==s&&Z(J,o,s)&&M(o),!0}}),X=(t,e)=>{const n="function"==typeof e?e:tt[e];if("function"!=typeof n)throw new Error(`observe expects a function or path to a function, ${e} is neither`);return k(t,n)},tt=new Proxy(J,K()),{document:et,MutationObserver:nt}=globalThis,st=(t,e)=>{const n=g.get(t);for(const s of n){let{path:n,binding:o,options:r}=s;const{toDOM:i}=o;if(null!=i){if(n.startsWith("^")){const e=w(t);if(null==e||null==e[d])throw console.error(`Cannot resolve relative binding ${n}`,t,"is not part of a list"),new Error(`Cannot resolve relative binding ${n}`);n=s.path=`${e[d]}${n.substring(1)}`}(null==e||n.startsWith(e))&&i(t,tt[n],r)}}};if(null!=nt){new nt((t=>{t.forEach((t=>{[...t.addedNodes].forEach((t=>{t instanceof HTMLElement&&[...t.querySelectorAll(c)].forEach((t=>st(t)))}))}))})).observe(et.body,{subtree:!0,childList:!0})}X((()=>!0),(t=>{const e=et.querySelectorAll(c);for(const n of e)st(n,t)}));const ot=t=>{let e=t.target.closest(c);for(;null!=e;){const t=g.get(e);for(const n of t){const{binding:t,path:s}=n,{fromDOM:o}=t;if(null!=o){let t;try{t=o(e,n.options)}catch(t){throw console.error("Cannot get value from",e,"via",n),new Error("Cannot obtain value fromDOM")}if(null!=t){const e=tt[s];if(null==e)tt[s]=t;else{const n=null!=e[d]?e[f]:e,o=null!=t[d]?t[f]:t;n!==o&&(tt[s]=o)}}}}e=e.parentElement.closest(c)}};null!=globalThis.document&&(et.body.addEventListener("change",ot,!0),et.body.addEventListener("input",ot,!0));const rt=(t,e,n,s)=>{if(t instanceof DocumentFragment)throw new Error("bind cannot bind to a DocumentFragment");let o;if("object"==typeof e&&void 0===e[d]&&void 0===s){const{value:t}=e;o="string"==typeof t?t:t[d],delete(s=e).value}else o="string"==typeof e?e:e[d];if(null==o)throw new Error("bind requires a path or object with xin Proxy");const{toDOM:r}=n;t.classList.add(a);let i=g.get(t);return null==i&&(i=[],g.set(t,i)),i.push({path:o,binding:n,options:s}),null==r||o.startsWith("^")||M(o),t},it=new Set,lt=t=>{let e=t?.target.closest(u),n=!1;const s=new Proxy(t,{get(e,s){if("stopPropagation"===s)return()=>{t.stopPropagation(),n=!0};{const t=e[s];return"function"==typeof t?t.bind(e):t}}});for(;!n&&null!=e;){const n=b.get(e)[t.type]||[];for(const t of n)if("function"==typeof t)t(s);else{const e=tt[t];if("function"!=typeof e)throw new Error(`no event handler found at path ${t}`);e(s)}e=null!=e.parentElement?e.parentElement.closest(u):null}},at=(t,e,n)=>{let s=b.get(t);t.classList.add(h),null==s&&(s={},b.set(t,s)),s[e]||(s[e]=[]),s[e].includes(n)||s[e].push(n),it.has(e)||(it.add(e),et.body.addEventListener(e,lt,!0))},ct=(t,e)=>{const n=new Event(e);t.dispatchEvent(n)},ht=t=>t instanceof HTMLInputElement?t.type:t instanceof HTMLSelectElement&&t.hasAttribute("multiple")?"multi-select":"other",ut=(t,e)=>{switch(ht(t)){case"radio":t.checked=t.value===e;break;case"checkbox":t.checked=e;break;case"date":t.valueAsDate=new Date(e);break;case"multi-select":for(const n of[...t.querySelectorAll("option")])n.selected=e[n.value];break;default:t.value=e}},dt=t=>{switch(ht(t)){case"radio":{const e=t.parentElement?.querySelector(`[name="${t.name}"]:checked`);return null!=e?e.value:null}case"checkbox":return t.checked;case"date":return t.valueAsDate.toISOString();case"multi-select":return[...t.querySelectorAll("option")].reduce(((t,e)=>(t[e.value]=e.selected,t)),{});default:return t.value}},{ResizeObserver:ft}=globalThis,pt=null!=ft?new ft((t=>{for(const e of t){const t=e.target;ct(t,"resize")}})):{observe(){},unobserve(){}},mt=(t,e)=>{if(null!=t&&null!=e)if("string"==typeof e)t.textContent=e;else if(Array.isArray(e))e.forEach((e=>{t.append(e instanceof Node?y(e):e)}));else{if(!(e instanceof HTMLElement))throw new Error("expect text content or document node");t.append(y(e))}},bt=(t,e=250)=>{let n;return(...s)=>{void 0!==n&&clearTimeout(n),n=setTimeout((()=>{t(...s)}),e)}},gt=(t,e=250)=>{let n,s=Date.now()-e,o=!1;return(...r)=>{if(clearTimeout(n),n=setTimeout((async()=>{t(...r),s=Date.now()}),e),!o&&Date.now()-s>=e){o=!0;try{t(...r),s=Date.now()}finally{o=!1}}}},yt=Symbol("list-binding");function vt(t,e){const n=[...t.querySelectorAll(c)];t.matches(c)&&n.unshift(t);for(const t of n){const n=g.get(t);for(const s of n)s.path.startsWith("^")&&(s.path=`${e}${s.path.substring(1)}`),null!=s.binding.toDOM&&s.binding.toDOM(t,tt[s.path])}}class wt{_array=[];constructor(t,e={}){if(this.boundElement=t,this.itemToElement=new WeakMap,1!==t.children.length)throw new Error("ListBinding expects an element with exactly one child element");if(t.children[0]instanceof HTMLTemplateElement){const e=t.children[0];if(1!==e.content.children.length)throw new Error("ListBinding expects a template with exactly one child element");this.template=y(e.content.children[0])}else this.template=t.children[0],this.template.remove();this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),this.options=e,null!=e.virtual&&(pt.observe(this.boundElement),this._update=gt((()=>{this.update(this._array,!0)}),16),this.boundElement.addEventListener("scroll",this._update),this.boundElement.addEventListener("resize",this._update))}visibleSlice(){const{virtual:t}=this.options;let e=0,n=this._array.length-1,s=0,o=0;if(null!=t){const r=this.boundElement.offsetWidth,i=this.boundElement.offsetHeight,l=null!=t.width?Math.max(1,Math.floor(r/t.width)):1,a=Math.ceil(i/t.height)+1,c=Math.ceil(this._array.length/l),h=l*a;let u=Math.floor(this.boundElement.scrollTop/t.height);u>c-a+1&&(u=Math.max(0,c-a+1)),e=u*l,n=e+h-1,s=u*t.height,o=c*t.height-i-s}return{firstItem:e,lastItem:n,topBuffer:s,bottomBuffer:o}}update(t,e){null==t&&(t=[]),this._array=t;const{initInstance:n,updateInstance:s}=this.options,o=t[d],r=this.visibleSlice(),l=this._previousSlice,{firstItem:a,lastItem:c,topBuffer:h,bottomBuffer:u}=r;if(!0===e&&null!=l&&a===l.firstItem&&c===l.lastItem)return;this._previousSlice=r;let p=0,m=0,b=0;for(const e of[...this.boundElement.children]){if(e===this.listTop||e===this.listBottom)continue;const n=v.get(e);if(null==n)e.remove();else{const s=t.indexOf(n);(s<a||s>c)&&(e.remove(),this.itemToElement.delete(n),v.delete(e),p++)}}this.listTop.style.height=String(h)+"px",this.listBottom.style.height=String(u)+"px";const g=[],{idPath:w}=this.options;for(let e=a;e<=c;e++){const r=t[e];if(void 0===r)continue;let i=this.itemToElement.get(r[f]);if(null==i){if(b++,i=y(this.template),"object"==typeof r&&(this.itemToElement.set(r[f],i),v.set(i,r[f])),this.boundElement.insertBefore(i,this.listBottom),null!=w){vt(i,`${o}[${w}=${r[w]}]`)}else{vt(i,`${o}[${e}]`)}null!=n&&n(i,r)}null!=s&&s(i,r),g.push(i)}let $=null;for(const t of g)t.previousElementSibling!==$&&(m++,null!=$?.nextElementSibling?this.boundElement.insertBefore(t,$.nextElementSibling):this.boundElement.insertBefore(t,this.listBottom)),$=t;i.perf&&console.log(o,"updated",{removed:p,created:b,moved:m})}}const $t=(t,e)=>{let n=t[yt];return null==n&&(n=new wt(t,e),t[yt]=n),n},Et={value:{toDOM(t,e){ut(t,e)},fromDOM:t=>dt(t)},text:{toDOM(t,e){t.textContent=e}},enabled:{toDOM(t,e){t.disabled=!e}},disabled:{toDOM(t,e){t.disabled=Boolean(e)}},style:{toDOM(t,e){if("object"==typeof e)for(const n of Object.keys(e))t.style[n]=e[n];else{if("string"!=typeof e)throw new Error("style binding expects either a string or object");t.setAttribute("style",e)}}},list:{toDOM(t,e,n){$t(t,n).update(e)}}},xt=t=>("00"+Math.round(Number(t)).toString(16)).slice(-2);class _t{constructor(t,e,n){t/=255,e/=255,n/=255;const s=Math.max(t,e,n),o=s-Math.min(t,e,n),r=0!==o?s===t?(e-n)/o:s===e?2+(n-t)/o:4+(t-e)/o:0;this.h=60*r<0?60*r+360:60*r,this.s=0!==o?s<=.5?o/(2*s-o):o/(2-(2*s-o)):0,this.l=(2*s-o)/2}}const At=void 0!==globalThis.document?globalThis.document.createElement("span"):void 0;class St{static fromCss(t){At.style.color=t;let e=t;At instanceof HTMLSpanElement&&(document.body.appendChild(At),e=getComputedStyle(At).color,At.remove());const[n,s,o,r]=e.match(/[\d.]+/g);return new St(Number(n),Number(s),Number(o),null==r?1:Number(r))}static fromHsl(t,e,n,s=1){return St.fromCss(`hsla(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${s.toFixed(2)})`)}constructor(t,e,n,s=1){this.r=o(0,t,255),this.g=o(0,e,255),this.b=o(0,n,255),this.a=void 0!==s?o(0,s,1):s=1}get inverse(){return new St(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){const{h:t,s:e,l:n}=this._hsl;return St.fromHsl(t,e,1-n,this.a)}get rgb(){const{r:t,g:e,b:n}=this;return`rgb(${t.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)})`}get rgba(){const{r:t,g:e,b:n,a:s}=this;return`rgba(${t.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)},${s.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}get _hsl(){return null==this._hslCached&&(this._hslCached=new _t(this.r,this.g,this.b)),this._hslCached}get hsl(){const{h:t,s:e,l:n}=this._hsl;return`hsl(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%)`}get hsla(){const{h:t,s:e,l:n}=this._hsl;return`hsla(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${this.a.toFixed(2)})`}get mono(){const t=255*this.brightness;return new St(t,t,t)}get brightness(){return(.299*this.r+.587*this.g+.114*this.b)/255}get html(){return 1===this.a?"#"+xt(this.r)+xt(this.g)+xt(this.b):"#"+xt(this.r)+xt(this.g)+xt(this.b)+xt(Math.floor(255*this.a))}brighten(t){let{h:e,s:n,l:s}=this._hsl;return s=o(0,s+t*(1-s),1),St.fromHsl(e,n,s,this.a)}darken(t){let{h:e,s:n,l:s}=this._hsl;return s=o(0,s*(1-t),1),St.fromHsl(e,n,s,this.a)}saturate(t){let{h:e,s:n,l:s}=this._hsl;return n=o(0,n+t*(1-n),1),St.fromHsl(e,n,s,this.a)}desaturate(t){let{h:e,s:n,l:s}=this._hsl;return n=o(0,n*(1-t),1),St.fromHsl(e,n,s,this.a)}rotate(t){let{h:e,s:n,l:s}=this._hsl;return e=(e+360+t)%360,St.fromHsl(e,n,s,this.a)}opacity(t){const{h:e,s:n,l:s}=this._hsl;return St.fromHsl(e,n,s,t)}swatch(){const{r:t,g:e,b:n,a:s}=this;console.log(`%c   %c ${this.html}, rgba(${t}, ${e}, ${n}, ${s}), ${this.hsla}`,`background-color: rgba(${t}, ${e}, ${n}, ${s})`,"background-color: #eee")}blend(t,e){return new St(r(this.r,t.r,e),r(this.g,t.g,e),r(this.b,t.b,e),r(this.a,t.a,e))}}function Ot(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))}const Ct={},Mt=(...t)=>(...e)=>kt.div(...e,...t),kt=new Proxy({fragment:(...t)=>{const e=globalThis.document.createDocumentFragment();for(const n of t)e.append(n);return e}},{get(t,e){if(null==(e=e.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))).match(/^\w+(-\w+)*$/))throw new Error(`${e} does not appear to be a valid element tagName`);return void 0===t[e]&&(t[e]=(...t)=>((t,...e)=>{void 0===Ct[t]&&(Ct[t]=globalThis.document.createElement(t));const n=Ct[t].cloneNode(),s={};for(const t of e)t instanceof Element||t instanceof DocumentFragment||"string"==typeof t||"number"==typeof t?n instanceof HTMLTemplateElement?n.content.append(t):n.append(t):Object.assign(s,t);for(const t of Object.keys(s)){const e=s[t];if("apply"===t)e(n);else if("style"===t)if("object"==typeof e)for(const t of Object.keys(e))t.startsWith("--")?n.style.setProperty(t,e[t]):n.style[t]=e[t];else n.setAttribute("style",e);else if(null!=t.match(/^on[A-Z]/)){const s=t.substring(2).toLowerCase();at(n,s,e)}else if(null!=t.match(/^bind[A-Z]/)){const s=t.substring(4,5).toLowerCase()+t.substring(5),o=Et[s];if(void 0===o)throw new Error(`${t} is not allowed, bindings.${s} is not defined`);rt(n,e,o)}else{const s=Ot(t);"class"===s?e.split(" ").forEach((t=>{n.classList.add(t)})):void 0!==n[s]?n[s]=e:"boolean"==typeof e?e?n.setAttribute(s,""):n.removeAttribute(s):n.setAttribute(s,e)}}return n})(e,...t)),t[e]},set(){throw new Error("You may not add new properties to elements")}});const jt=["animation-iteration-count","flex","flex-base","flex-grow","flex-shrink","gap","opacity","order","tab-size","widows","z-index","zoom"],Lt=(t,e,n="")=>{const s=Ot(t);if("object"==typeof e){const s=Object.keys(e).map((t=>Lt(t,e[t],`${n}  `))).join("\n");return`${n}  ${t} {\n${s}\n${n}  }`}return((t,e,n)=>void 0===n?"":"string"==typeof n||jt.includes(e)?`${t}  ${e}: ${n};`:`${t}  ${e}: ${n}px;`)(n,s,e)},Tt=(t,e="")=>Object.keys(t).map((n=>{const s=t[n];if("string"==typeof s){if("@import"===n)return`@import url('${s}');`;throw new Error("top-level string value only allowed for `@import`")}const o=Object.keys(s).map((t=>Lt(t,s[t]))).join("\n");return`${e}${n} {\n${o}\n}`})).join("\n\n"),Dt=t=>{const e={};for(const n of Object.keys(t)){const s=t[n];e[`--${Ot(n)}`]="number"==typeof s&&0!==s?String(s)+"px":s}return e},Pt=t=>{const e={};for(const n of Object.keys(t)){let s=t[n];"string"==typeof s&&null!=s.match(/^(#|rgb[a]?\(|hsl[a]?\()/)&&(s=St.fromCss(s).inverseLuminance.html,e[`--${Ot(n)}`]=s)}return e},Ft=new Proxy({},{get(t,e){if(null==t[e]){e=e.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`));let[,n,,s,o,r]=e.match(/^([^\d_]*)((_)?(\d+)(\w*))?$/);if(n=`--${n}`,null!=o){const i=null==s?Number(o)/100:-Number(o)/100;switch(r){case"b":{const s=getComputedStyle(document.body).getPropertyValue(n);t[e]=i>0?St.fromCss(s).brighten(i).rgba:St.fromCss(s).darken(-i).rgba}break;case"s":{const s=getComputedStyle(document.body).getPropertyValue(n);t[e]=i>0?St.fromCss(s).saturate(i).rgba:St.fromCss(s).desaturate(-i).rgba}break;case"h":{const s=getComputedStyle(document.body).getPropertyValue(n);t[e]=St.fromCss(s).rotate(100*i).rgba,console.log(St.fromCss(s).hsla,St.fromCss(s).rotate(i).hsla)}break;case"o":{const s=getComputedStyle(document.body).getPropertyValue(n);t[e]=St.fromCss(s).opacity(i).rgba}break;case"":t[e]=`calc(var(${n}) * ${i})`;break;default:throw console.error(r),new Error(`Unrecognized method ${r} for css variable ${n}`)}}else t[e]=`var(${n})`}return t[e]}});let Rt=0;class Nt extends HTMLElement{static elements=kt;content=kt.slot();static StyleNode(t){return kt.style(Tt(t))}static elementCreator(t){if(null==this._elementCreator){let e=null!=t?t.tag:null;null==e&&(e=Ot(this.name),e.startsWith("-")&&(e=e.substring(1)),e.includes("-")||(e+="-elt"));let n=0;for(;null==this._elementCreator;){n+=1;const s=1===n?e:`${e}-${n}`;try{window.customElements.define(s,this,t),this._elementCreator=kt[s]}catch(t){throw new Error(`could not define ${this.name} as <${s}>: ${String(t)}`)}}}return this._elementCreator}initAttributes(...t){const e={},n={};new MutationObserver((e=>{let n=!1;e.forEach((e=>{var s;n=!(!e.attributeName||!t.includes((s=e.attributeName,s.replace(/-([a-z])/g,((t,e)=>e.toLocaleUpperCase())))))})),n&&void 0!==this.queueRender&&this.queueRender(!1)})).observe(this,{attributes:!0}),t.forEach((t=>{e[t]=l(this[t]);const s=Ot(t);Object.defineProperty(this,t,{enumerable:!1,get(){return"boolean"==typeof e[t]?this.hasAttribute(s):this.hasAttribute(s)?"number"==typeof e[t]?parseFloat(this.getAttribute(s)):this.getAttribute(s):void 0!==n[t]?n[t]:e[t]},set(o){"boolean"==typeof e[t]?o!==this[t]&&(o?this.setAttribute(s,""):this.removeAttribute(s),this.queueRender()):"number"==typeof e[t]?o!==parseFloat(this[t])&&(this.setAttribute(s,o),this.queueRender()):"object"!=typeof o&&`${o}`==`${this[t]}`||(null==o||"object"==typeof o?this.removeAttribute(s):this.setAttribute(s,o),this.queueRender(),n[t]=o)}})}))}initValue(){const t=Object.getOwnPropertyDescriptor(this,"value");if(void 0===t||void 0!==t.get||void 0!==t.set)return;let e=this.hasAttribute("value")?this.getAttribute("value"):l(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get:()=>e,set(t){e!==t&&(e=t,this.queueRender(!0))}})}get refs(){const t=null!=this.shadowRoot?this.shadowRoot:this;return null==this._refs&&(this._refs=new Proxy({},{get(e,n){if(void 0===e[n]){let s=t.querySelector(`[data-ref="${n}"]`);if(null==s&&(s=t.querySelector(n)),null==s)throw new Error(`elementRef "${n}" does not exist!`);s.removeAttribute("data-ref"),e[n]=s}return e[n]}})),this._refs}constructor(){super(),Rt+=1,this.initAttributes("hidden"),this.instanceId=`${this.tagName.toLocaleLowerCase()}-${Rt}`,this._value=l(this.defaultValue)}connectedCallback(){this.hydrate(),null!=this.role&&this.setAttribute("role",this.role),void 0!==this.onResize&&(pt.observe(this),null==this._onResize&&(this._onResize=this.onResize.bind(this)),this.addEventListener("resize",this._onResize)),null!=this.value&&null!=this.getAttribute("value")&&(this._value=this.getAttribute("value")),this.queueRender()}disconnectedCallback(){pt.unobserve(this)}_changeQueued=!1;_renderQueued=!1;queueRender(t=!1){this._hydrated&&(this._changeQueued||(this._changeQueued=t),this._renderQueued||(this._renderQueued=!0,requestAnimationFrame((()=>{this._changeQueued&&ct(this,"change"),this._changeQueued=!1,this._renderQueued=!1,this.render()}))))}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();const t="function"==typeof this.content?this.content():this.content;if(void 0!==this.styleNode){const e=this.attachShadow({mode:"open"});e.appendChild(this.styleNode),mt(e,t)}else mt(this,t);this._hydrated=!0}}render(){}}const Bt=(t=(()=>!0))=>{const e=localStorage.getItem("xin-state");if(null!=e){const n=JSON.parse(e);for(const e of Object.keys(n).filter(t))void 0!==tt[e]?Object.assign(tt[e],n[e]):tt[e]=n[e]}const n=bt((()=>{const e={},n=tt[f];for(const s of Object.keys(n).filter(t))e[s]=n[s];localStorage.setItem("xin-state",JSON.stringify(e)),console.log("xin state saved to localStorage")}),500);X(t,n)};function It(t){const e={};return Object.keys(t).forEach((n=>{tt[n]=t[n],e[n]=tt[n]})),e}const Ht=e;export{Ht as MoreMath,rt as bind,at as on,Et as bindings,Ft as vars,Dt as initVars,Tt as css,Pt as darkMode,St as Color,Nt as Component,kt as elements,Mt as makeComponent,Bt as hotReload,w as getListItem,p as xinPath,m as xinValue,i as settings,gt as throttle,bt as debounce,tt as xin,X as observe,j as unobserve,M as touch,$ as observerShouldBeRemoved,It as xinProxy};
//# sourceMappingURL=index.js.map
