const t={debug:!1,perf:!1};function e(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);const n={};for(const o in t){const s=t[o];n[o]=null!=t&&"object"==typeof t?e(s):s}return n}const n="-xin-data",o=`.${n}`,s="-xin-event",r=`.${s}`,i=Symbol("xin-path"),l=Symbol("xin-value"),a=t=>t[i];function c(t){return"object"==typeof t&&null!==t&&t[l]||t}const h=new WeakMap,u=new WeakMap,d=t=>{const n=t.cloneNode();if(n instanceof HTMLElement){const o=u.get(t),s=h.get(t);null!=o&&u.set(n,e(o)),null!=s&&h.set(n,e(s))}for(const e of t instanceof HTMLTemplateElement?t.content.childNodes:t.childNodes)e instanceof HTMLElement||e instanceof DocumentFragment?n.appendChild(d(e)):n.appendChild(e.cloneNode());return n},f=new WeakMap,m=t=>{const e=document.body.parentElement;for(;null!=t.parentElement&&t.parentElement!==e;){const e=f.get(t);if(null!=e)return e;t=t.parentElement}return!1},p=Symbol("observer should be removed"),g=[],b=[];let y,v,w=!1;class ${constructor(t,e){const n="string"==typeof e?`"${e}"`:`function ${e.name}`;let o;if("string"==typeof t)this.test=e=>"string"==typeof e&&""!==e&&(t.startsWith(e)||e.startsWith(t)),o=`test = "${t}"`;else if(t instanceof RegExp)this.test=t.test.bind(t),o=`test = "${t.toString()}"`;else{if(!(t instanceof Function))throw new Error("expect listener test to be a string, RegExp, or test function");this.test=t,o=`test = function ${t.name}`}if(this.description=`${o}, ${n}`,"function"!=typeof e)throw new Error("expect callback to be a path or function");this.callback=e,g.push(this)}}const E=()=>{t.perf&&console.time("xin async update");const e=[...b];for(const t of e)g.filter((e=>{let n;try{n=e.test(t)}catch(n){throw new Error(`Listener ${e.description} threw "${n}" at "${t}"`)}return n===p?(_(e),!1):n})).forEach((e=>{let n;try{n=e.callback(t)}catch(n){console.error(`Listener ${e.description} threw "${n}" handling "${t}"`)}n===p&&_(e)}));b.splice(0),w=!1,"function"==typeof v&&v(),t.perf&&console.timeEnd("xin async update")},x=t=>{const e="string"==typeof t?t:a(t);if(void 0===e)throw console.error("touch was called on an invalid target",t),new Error("touch was called on an invalid target");!1===w&&(y=new Promise((t=>{v=t})),w=setTimeout(E)),null==b.find((t=>e.startsWith(t)))&&b.push(e)},A=(t,e)=>new $(t,e),_=t=>{const e=g.indexOf(t);if(!(e>-1))throw new Error("unobserve failed, listener not found");g.splice(e,1)},M=t=>{try{return JSON.stringify(t)}catch(t){return"{has circular references}"}},S=(...t)=>new Error(t.map(M).join(" "));let C=0;const O=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1)+(parseInt("10000",36)+ ++C).toString(36).slice(-5),L={},k={};function j(t){if(""===t)return[];if(Array.isArray(t))return t;{const e=[];for(;t.length>0;){let n=t.search(/\[[^\]]+\]/);if(-1===n){e.push(t.split("."));break}{const o=t.slice(0,n);t=t.slice(n),""!==o&&e.push(o.split(".")),n=t.indexOf("]")+1,e.push(t.slice(1,n-1)),"."===t.slice(n,n+1)&&(n+=1),t=t.slice(n)}}return e}}const P=new WeakMap;function T(t,e){void 0===P.get(t)&&P.set(t,{}),void 0===P.get(t)[e]&&(P.get(t)[e]={});const n=P.get(t)[e];return"_auto_"===e?t.forEach(((t,e)=>{void 0===t._auto_&&(t._auto_=O()),n[t._auto_+""]=e})):t.forEach(((t,o)=>{n[q(t,e)+""]=o})),n}function D(t,e,n){n+="";let o=function(t,e){return void 0===P.get(t)||void 0===P.get(t)[e]?T(t,e):P.get(t)[e]}(t,e)[n];return void 0!==o&&q(t[o],e)+""===n||(o=T(t,e)[n]),o}function F(t,e,n){return void 0===t[e]&&void 0!==n&&(t[e]=n),t[e]}function N(t,e,n,o){let s=""!==e?D(t,e,n):n;if(o===L)return t.splice(s,1),P.delete(t),Symbol("deleted");if(o===k)""===e&&void 0===t[s]&&(t[s]={});else if(void 0!==o)if(void 0!==s)t[s]=o;else{if(""===e||q(o,e)+""!=n+"")throw new Error(`byIdPath insert failed at [${e}=${n}]`);t.push(o),s=t.length-1}return t[s]}function B(t){if(!Array.isArray(t))throw S("setByPath failed: expected array, found",t)}function R(t){if(null==t||!(t instanceof Object))throw S("setByPath failed: expected Object, found",t)}function q(t,e){const n=j(e);let o,s,r,i,l=t;for(o=0,s=n.length;void 0!==l&&o<s;o++){const t=n[o];if(Array.isArray(t))for(r=0,i=t.length;void 0!==l&&r<i;r++){l=l[t[r]]}else if(0===l.length){if(l=l[t.slice(1)],"="!==t[0])return}else if(t.includes("=")){const[e,...n]=t.split("=");l=N(l,e,n.join("="))}else r=parseInt(t,10),l=l[r]}return l}function I(t,e,n){let o=t;const s=j(e);for(;null!=o&&s.length>0;){const t=s.shift();if("string"==typeof t){const e=t.indexOf("=");if(e>-1){0===e?R(o):B(o);if(o=N(o,t.slice(0,e),t.slice(e+1),s.length>0?k:n),0===s.length)return!0}else{B(o);const e=parseInt(t,10);if(!(s.length>0)){if(n!==L){if(o[e]===n)return!1;o[e]=n}else o.splice(e,1);return!0}o=o[e]}}else{if(!(Array.isArray(t)&&t.length>0))throw new Error(`setByPath failed, bad path ${e}`);for(R(o);t.length>0;){const e=t.shift();if(!(t.length>0||s.length>0)){if(n!==L){if(o[e]===n)return!1;o[e]=n}else{if(!Object.prototype.hasOwnProperty.call(o,e))return!1;delete o[e]}return!0}o=F(o,e,t.length>0?{}:[])}}}throw new Error(`setByPath(${t}, ${e}, ${n}) failed`)}const H=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],W={},z=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,V=(t="",e="")=>""===t?e:null!==e.match(/^\d+$/)||e.includes("=")?`${t}[${e}]`:`${t}.${e}`,Q=(t="")=>({get(e,n){if(n===i)return t;if(n===l)return e;if("symbol"==typeof n)return e[n];let o=n;const s=o.match(/^([^.[]+)\.(.+)$/)??o.match(/^([^\]]+)(\[.+)/)??o.match(/^(\[[^\]]+\])\.(.+)$/)??o.match(/^(\[[^\]]+\])\[(.+)$/);if(null!==s){const[,n,o]=s,r=V(t,n),i=q(e,n);return null!==i&&"object"==typeof i?new Proxy(i,Q(r))[o]:i}if(o.startsWith("[")&&o.endsWith("]")&&(o=o.substring(1,o.length-1)),!Array.isArray(e)&&void 0!==e[o]||Array.isArray(e)&&o.includes("=")){let n;if(o.includes("=")){const[t,s]=o.split("=");n=e.find((e=>`${q(e,t)}`===s))}else n=e[o];if(null!==n&&"object"==typeof n){const e=V(t,o);return new Proxy(n,Q(e))}return"function"==typeof n?n.bind(e):n}if(Array.isArray(e)){const n=e[o];return"function"==typeof n?(...n)=>{const s=Array.prototype[o].apply(e,n);return H.includes(o)&&x(t),s}:"object"==typeof n?new Proxy(n,Q(V(t,o))):n}return e[o]},set(e,n,o){null!=o&&o[i]&&(o=o[l]);const s=V(t,n);if(!(t=>z.test(t))(s))throw new Error(`setting invalid path ${s}`);let r=G[s];return null!=r&&null!=r[l]&&(r=r[l]),r!==o&&I(W,s,o)&&x(s),!0}}),Z=(t,e)=>{const n="function"==typeof e?e:G[e];if("function"!=typeof n)throw new Error(`observe expects a function or path to a function, ${e} is neither`);return A(t,n)},G=new Proxy(W,Q()),{document:J,MutationObserver:Y}=globalThis,U=(t,e)=>{const n=u.get(t);for(const o of n){let{path:n,binding:s,options:r}=o;const{toDOM:l}=s;if(null!=l){if(n.startsWith("^")){const e=m(t);if(null==e||null==e[i])throw console.error(`Cannot resolve relative binding ${n}`,t,"is not part of a list"),new Error(`Cannot resolve relative binding ${n}`);n=o.path=`${e[i]}${n.substring(1)}`}(null==e||n.startsWith(e))&&l(t,G[n],r)}}};if(null!=Y){new Y((t=>{t.forEach((t=>{[...t.addedNodes].forEach((t=>{t instanceof HTMLElement&&[...t.querySelectorAll(o)].forEach((t=>U(t)))}))}))})).observe(J.body,{subtree:!0,childList:!0})}Z((()=>!0),(t=>{const e=J.querySelectorAll(o);for(const n of e)U(n,t)}));const K=t=>{let e=t.target.closest(o);for(;null!=e;){const t=u.get(e);for(const n of t){const{binding:t,path:o}=n,{fromDOM:s}=t;if(null!=s){let t;try{t=s(e,n.options)}catch(t){throw console.error("Cannot get value from",e,"via",n),new Error("Cannot obtain value fromDOM")}if(null!=t){const e=G[o];if(null==e)G[o]=t;else{const n=null!=e[i]?e[l]:e,s=null!=t[i]?t[l]:t;n!==s&&(G[o]=s)}}}}e=e.parentElement.closest(o)}};function X(t,e,o,s){if(t instanceof DocumentFragment)throw new Error("bind cannot bind to a DocumentFragment");let r;if("object"==typeof e&&void 0===e[i]&&void 0===s){const{value:t}=e;r="string"==typeof t?t:t[i],delete(s=e).value}else r="string"==typeof e?e:e[i];if(null==r)throw new Error("bind requires a path or object with xin Proxy");const{toDOM:l}=o;t.classList.add(n);let a=u.get(t);return null==a&&(a=[],u.set(t,a)),a.push({path:r,binding:o,options:s}),null==l||r.startsWith("^")||x(r),t}null!=globalThis.document&&(J.body.addEventListener("change",K,!0),J.body.addEventListener("input",K,!0));const tt=new Set,et=t=>{let e=t?.target.closest(r),n=!1;const o=new Proxy(t,{get(e,o){if("stopPropagation"===o)return()=>{t.stopPropagation(),n=!0};{const t=e[o];return"function"==typeof t?t.bind(e):t}}});for(;!n&&null!=e;){const n=h.get(e)[t.type]||[];for(const t of n)if("function"==typeof t)t(o);else{const e=G[t];if("function"!=typeof e)throw new Error(`no event handler found at path ${t}`);e(o)}e=null!=e.parentElement?e.parentElement.closest(r):null}},nt=(t,e,n)=>{let o=h.get(t);t.classList.add(s),null==o&&(o={},h.set(t,o)),o[e]||(o[e]=[]),o[e].includes(n)||o[e].push(n),tt.has(e)||(tt.add(e),J.body.addEventListener(e,et,!0))},ot=(t,e)=>{const n=new Event(e);t.dispatchEvent(n)},st=t=>t instanceof HTMLInputElement?t.type:t instanceof HTMLSelectElement&&t.hasAttribute("multiple")?"multi-select":"other",rt=(t,e)=>{switch(st(t)){case"radio":t.checked=t.value===e;break;case"checkbox":t.checked=e;break;case"date":t.valueAsDate=new Date(e);break;case"multi-select":for(const n of[...t.querySelectorAll("option")])n.selected=e[n.value];break;default:t.value=e}},it=t=>{switch(st(t)){case"radio":{const e=t.parentElement?.querySelector(`[name="${t.name}"]:checked`);return null!=e?e.value:null}case"checkbox":return t.checked;case"date":return t.valueAsDate.toISOString();case"multi-select":return[...t.querySelectorAll("option")].reduce(((t,e)=>(t[e.value]=e.selected,t)),{});default:return t.value}},{ResizeObserver:lt}=globalThis,at=null!=lt?new lt((t=>{for(const e of t){const t=e.target;ot(t,"resize")}})):{observe(){},unobserve(){}};function ct(t){const e=document.createElement("xin-slot");""!==t.name&&e.setAttribute("name",t.name),t.replaceWith(e)}const ht=(t,e)=>{let n=!1;if(null!=t&&null!=e)if("string"==typeof e)t.textContent=e;else if(Array.isArray(e))e.forEach((e=>{t.append(e instanceof Node?d(e):e),e instanceof Node&&null!=e.querySelector("slot")&&(n=!0)}));else{if(!(e instanceof HTMLElement||e instanceof DocumentFragment))throw new Error("expect text content or document node");{const o=[...e.querySelectorAll("slot")];o.length>0&&(n=!0,o.forEach(ct)),t.append(d(e))}}return n},ut=(t,e=250)=>{let n;return(...o)=>{void 0!==n&&clearTimeout(n),n=setTimeout((()=>{t(...o)}),e)}},dt=(t,e=250)=>{let n,o=Date.now()-e,s=!1;return(...r)=>{if(clearTimeout(n),n=setTimeout((async()=>{t(...r),o=Date.now()}),e),!s&&Date.now()-o>=e){s=!0;try{t(...r),o=Date.now()}finally{s=!1}}}},ft=Symbol("list-binding");function mt(t,e){const n=[...t.querySelectorAll(o)];t.matches(o)&&n.unshift(t);for(const t of n){const n=u.get(t);for(const o of n)o.path.startsWith("^")&&(o.path=`${e}${o.path.substring(1)}`),null!=o.binding.toDOM&&o.binding.toDOM(t,G[o.path])}}class pt{_array=[];constructor(t,e={}){if(this.boundElement=t,this.itemToElement=new WeakMap,1!==t.children.length)throw new Error("ListBinding expects an element with exactly one child element");if(t.children[0]instanceof HTMLTemplateElement){const e=t.children[0];if(1!==e.content.children.length)throw new Error("ListBinding expects a template with exactly one child element");this.template=d(e.content.children[0])}else this.template=t.children[0],this.template.remove();this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),this.options=e,null!=e.virtual&&(at.observe(this.boundElement),this._update=dt((()=>{this.update(this._array,!0)}),16),this.boundElement.addEventListener("scroll",this._update),this.boundElement.addEventListener("resize",this._update))}visibleSlice(){const{virtual:t,hiddenProp:e,visibleProp:n}=this.options;let o=this._array;void 0!==e&&(o=o.filter((t=>!0!==t[e]))),void 0!==n&&(o=o.filter((t=>!0===t[n])));let s=0,r=o.length-1,i=0,l=0;if(null!=t){const e=this.boundElement.offsetWidth,n=this.boundElement.offsetHeight,a=null!=t.width?Math.max(1,Math.floor(e/t.width)):1,c=Math.ceil(n/t.height)+1,h=Math.ceil(o.length/a),u=a*c;let d=Math.floor(this.boundElement.scrollTop/t.height);d>h-c+1&&(d=Math.max(0,h-c+1)),s=d*a,r=s+u-1,i=d*t.height,l=Math.max(h*t.height-n-i,0)}return{items:o,firstItem:s,lastItem:r,topBuffer:i,bottomBuffer:l}}update(e,n){null==e&&(e=[]),this._array=e;const{initInstance:o,updateInstance:s,hiddenProp:r,visibleProp:i}=this.options,l=a(e),h=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",0===h.items.length);const u=this._previousSlice,{firstItem:m,lastItem:p,topBuffer:g,bottomBuffer:b}=h;if(void 0===r&&void 0===i&&!0===n&&null!=u&&m===u.firstItem&&p===u.lastItem)return;this._previousSlice=h;let y=0,v=0,w=0;for(const t of[...this.boundElement.children]){if(t===this.listTop||t===this.listBottom)continue;const e=f.get(t);if(null==e)t.remove();else{const n=h.items.indexOf(e);(n<m||n>p)&&(t.remove(),this.itemToElement.delete(e),f.delete(t),y++)}}this.listTop.style.height=String(g)+"px",this.listBottom.style.height=String(b)+"px";const $=[],{idPath:E}=this.options;for(let t=m;t<=p;t++){const e=h.items[t];if(void 0===e)continue;let n=this.itemToElement.get(c(e));if(null==n){if(w++,n=d(this.template),"object"==typeof e&&(this.itemToElement.set(c(e),n),f.set(n,c(e))),this.boundElement.insertBefore(n,this.listBottom),null!=E){mt(n,`${l}[${E}=${e[E]}]`)}else{mt(n,`${l}[${t}]`)}null!=o&&o(n,e)}null!=s&&s(n,e),$.push(n)}let x=null;for(const t of $)t.previousElementSibling!==x&&(v++,null!=x?.nextElementSibling?this.boundElement.insertBefore(t,x.nextElementSibling):this.boundElement.insertBefore(t,this.listBottom)),x=t;t.perf&&console.log(l,"updated",{removed:y,created:w,moved:v})}}const gt=(t,e)=>{let n=t[ft];return null==n&&(n=new pt(t,e),t[ft]=n),n},bt={value:{toDOM(t,e){rt(t,e)},fromDOM:t=>it(t)},text:{toDOM(t,e){t.textContent=e}},enabled:{toDOM(t,e){t.disabled=!e}},disabled:{toDOM(t,e){t.disabled=Boolean(e)}},style:{toDOM(t,e){if("object"==typeof e)for(const n of Object.keys(e))t.style[n]=e[n];else{if("string"!=typeof e)throw new Error("style binding expects either a string or object");t.setAttribute("style",e)}}},list:{toDOM(t,e,n){gt(t,n).update(e)}}};Math.PI,Math.PI;function yt(t,e,n){return e<t?t:e>n?n:e}function vt(t,e,n){return(n=yt(0,n,1))*(e-t)+t}const wt={clamp:yt,lerp:vt},$t=t=>("00"+Math.round(Number(t)).toString(16)).slice(-2);class Et{constructor(t,e,n){t/=255,e/=255,n/=255;const o=Math.max(t,e,n),s=o-Math.min(t,e,n),r=0!==s?o===t?(e-n)/s:o===e?2+(n-t)/s:4+(t-e)/s:0;this.h=60*r<0?60*r+360:60*r,this.s=0!==s?o<=.5?s/(2*o-s):s/(2-(2*o-s)):0,this.l=(2*o-s)/2}}const xt=void 0!==globalThis.document?globalThis.document.createElement("span"):void 0;class At{static fromCss(t){let e=t;xt instanceof HTMLSpanElement&&(xt.style.color=t,document.body.appendChild(xt),e=getComputedStyle(xt).color,xt.remove());const[n,o,s,r]=e.match(/[\d.]+/g);return new At(Number(n),Number(o),Number(s),null==r?1:Number(r))}static fromHsl(t,e,n,o=1){return At.fromCss(`hsla(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${o.toFixed(2)})`)}constructor(t,e,n,o=1){this.r=yt(0,t,255),this.g=yt(0,e,255),this.b=yt(0,n,255),this.a=void 0!==o?yt(0,o,1):o=1}get inverse(){return new At(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){const{h:t,s:e,l:n}=this._hsl;return At.fromHsl(t,e,1-n,this.a)}get rgb(){const{r:t,g:e,b:n}=this;return`rgb(${t.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)})`}get rgba(){const{r:t,g:e,b:n,a:o}=this;return`rgba(${t.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)},${o.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}get _hsl(){return null==this._hslCached&&(this._hslCached=new Et(this.r,this.g,this.b)),this._hslCached}get hsl(){const{h:t,s:e,l:n}=this._hsl;return`hsl(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%)`}get hsla(){const{h:t,s:e,l:n}=this._hsl;return`hsla(${t.toFixed(0)}, ${(100*e).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${this.a.toFixed(2)})`}get mono(){const t=255*this.brightness;return new At(t,t,t)}get brightness(){return(.299*this.r+.587*this.g+.114*this.b)/255}get html(){return 1===this.a?"#"+$t(this.r)+$t(this.g)+$t(this.b):"#"+$t(this.r)+$t(this.g)+$t(this.b)+$t(Math.floor(255*this.a))}brighten(t){let{h:e,s:n,l:o}=this._hsl;return o=yt(0,o+t*(1-o),1),At.fromHsl(e,n,o,this.a)}darken(t){let{h:e,s:n,l:o}=this._hsl;return o=yt(0,o*(1-t),1),At.fromHsl(e,n,o,this.a)}saturate(t){let{h:e,s:n,l:o}=this._hsl;return n=yt(0,n+t*(1-n),1),At.fromHsl(e,n,o,this.a)}desaturate(t){let{h:e,s:n,l:o}=this._hsl;return n=yt(0,n*(1-t),1),At.fromHsl(e,n,o,this.a)}rotate(t){let{h:e,s:n,l:o}=this._hsl;return e=(e+360+t)%360,At.fromHsl(e,n,o,this.a)}opacity(t){const{h:e,s:n,l:o}=this._hsl;return At.fromHsl(e,n,o,t)}swatch(){const{r:t,g:e,b:n,a:o}=this;console.log(`%c   %c ${this.html}, rgba(${t}, ${e}, ${n}, ${o}), ${this.hsla}`,`background-color: rgba(${t}, ${e}, ${n}, ${o})`,"background-color: #eee")}blend(t,e){return new At(vt(this.r,t.r,e),vt(this.g,t.g,e),vt(this.b,t.b,e),vt(this.a,t.a,e))}}function _t(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))}const Mt={},St=(t,...e)=>{if(void 0===Mt[t]){const[e,n]=t.split("|");Mt[t]=void 0===n?globalThis.document.createElement(e):globalThis.document.createElementNS(n,e)}const n=Mt[t].cloneNode(),o={};for(const t of e)t instanceof Element||t instanceof DocumentFragment||"string"==typeof t||"number"==typeof t?n instanceof HTMLTemplateElement?n.content.append(t):n.append(t):Object.assign(o,t);for(const t of Object.keys(o)){const e=o[t];if("apply"===t)e(n);else if("style"===t)if("object"==typeof e)for(const t of Object.keys(e))t.startsWith("--")?n.style.setProperty(t,e[t]):n.style[t]=e[t];else n.setAttribute("style",e);else if(null!=t.match(/^on[A-Z]/)){const o=t.substring(2).toLowerCase();nt(n,o,e)}else if(null!=t.match(/^bind[A-Z]/)){const o=t.substring(4,5).toLowerCase()+t.substring(5),s=bt[o];if(void 0===s)throw new Error(`${t} is not allowed, bindings.${o} is not defined`);X(n,e,s)}else if(void 0!==n[t])n instanceof SVGElement||n instanceof MathMLElement?n.setAttribute(t,e):n[t]=e;else{const o=_t(t);"class"===o?e.split(" ").forEach((t=>{n.classList.add(t)})):void 0!==n[o]?n[o]=e:"boolean"==typeof e?e?n.setAttribute(o,""):n.removeAttribute(o):n.setAttribute(o,e)}}return n},Ct=(...t)=>{const e=globalThis.document.createDocumentFragment();for(const n of t)e.append(n);return e},Ot=new Proxy({fragment:Ct},{get:(t,e)=>(void 0===t[e=e.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))]&&(t[e]=(...t)=>St(e,...t)),t[e]),set(){throw new Error("You may not add new properties to elements")}}),Lt=new Proxy({fragment:Ct},{get:(t,e)=>(void 0===t[e]&&(t[e]=(...t)=>St(`${e}|http://www.w3.org/2000/svg`,...t)),t[e]),set(){throw new Error("You may not add new properties to elements")}}),kt=new Proxy({fragment:Ct},{get:(t,e)=>(void 0===t[e]&&(t[e]=(...t)=>St(`${e}|http://www.w3.org/1998/Math/MathML`,...t)),t[e]),set(){throw new Error("You may not add new properties to elements")}});const jt=["animation-iteration-count","flex","flex-base","flex-grow","flex-shrink","gap","opacity","order","tab-size","widows","z-index","zoom"],Pt=(t,e,n="")=>{const o=_t(t);if("object"==typeof e){const o=Object.keys(e).map((t=>Pt(t,e[t],`${n}  `))).join("\n");return`${n}  ${t} {\n${o}\n${n}  }`}return((t,e,n)=>void 0===n?"":"string"==typeof n||jt.includes(e)?`${t}  ${e}: ${n};`:`${t}  ${e}: ${n}px;`)(n,o,e)},Tt=(t,e="")=>Object.keys(t).map((n=>{const o=t[n];if("string"==typeof o){if("@import"===n)return`@import url('${o}');`;throw new Error("top-level string value only allowed for `@import`")}const s=Object.keys(o).map((t=>Pt(t,o[t]))).join("\n");return`${e}${n} {\n${s}\n}`})).join("\n\n"),Dt=t=>{const e={};for(const n of Object.keys(t)){const o=t[n];e[`--${_t(n)}`]="number"==typeof o&&0!==o?String(o)+"px":o}return e},Ft=t=>{const e={};for(const n of Object.keys(t)){let o=t[n];"string"==typeof o&&null!=o.match(/^(#|rgb[a]?\(|hsl[a]?\()/)&&(o=At.fromCss(o).inverseLuminance.html,e[`--${_t(n)}`]=o)}return e},Nt=new Proxy({},{get(t,e){if(null==t[e]){e=e.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`));let[,n,,o,s,r]=e.match(/^([^\d_]*)((_)?(\d+)(\w*))?$/);if(n=`--${n}`,null!=s){const i=null==o?Number(s)/100:-Number(s)/100;switch(r){case"b":{const o=getComputedStyle(document.body).getPropertyValue(n);t[e]=i>0?At.fromCss(o).brighten(i).rgba:At.fromCss(o).darken(-i).rgba}break;case"s":{const o=getComputedStyle(document.body).getPropertyValue(n);t[e]=i>0?At.fromCss(o).saturate(i).rgba:At.fromCss(o).desaturate(-i).rgba}break;case"h":{const o=getComputedStyle(document.body).getPropertyValue(n);t[e]=At.fromCss(o).rotate(100*i).rgba,console.log(At.fromCss(o).hsla,At.fromCss(o).rotate(i).hsla)}break;case"o":{const o=getComputedStyle(document.body).getPropertyValue(n);t[e]=At.fromCss(o).opacity(i).rgba}break;case"":t[e]=`calc(var(${n}) * ${i})`;break;default:throw console.error(r),new Error(`Unrecognized method ${r} for css variable ${n}`)}}else t[e]=`var(${n})`}return t[e]}}),Bt=new Proxy({},{get(t,e){if(void 0===t[e]){const n=`--${e.replace(/[A-Z]/g,(t=>`-${t.toLocaleLowerCase()}`))}`;t[e]=t=>`var(${n}, ${t})`}return t[e]}});let Rt=0;function qt(){return`custom-elt${(Rt++).toString(36)}`}let It=0;class Ht extends HTMLElement{static elements=Ot;content=Ot.slot();static StyleNode(t){return Ot.style(Tt(t))}static elementCreator(t){if(null==this._elementCreator){let e=null!=t?t.tag:null;for(null==e&&("string"==typeof this.name&&""!==this.name?(e=_t(this.name),e.startsWith("-")&&(e=e.slice(1))):e=qt());null==this._elementCreator;)try{window.customElements.define(e,this,t),this._elementCreator=Ot[e]}catch(t){console.error(`failed to define ${this.name} as <${e}>: ${String(t)}`),e=qt()}}return this._elementCreator}initAttributes(...t){const n={},o={};new MutationObserver((e=>{let n=!1;e.forEach((e=>{var o;n=!(!e.attributeName||!t.includes((o=e.attributeName,o.replace(/-([a-z])/g,((t,e)=>e.toLocaleUpperCase())))))})),n&&void 0!==this.queueRender&&this.queueRender(!1)})).observe(this,{attributes:!0}),t.forEach((t=>{n[t]=e(this[t]);const s=_t(t);Object.defineProperty(this,t,{enumerable:!1,get(){return"boolean"==typeof n[t]?this.hasAttribute(s):this.hasAttribute(s)?"number"==typeof n[t]?parseFloat(this.getAttribute(s)):this.getAttribute(s):void 0!==o[t]?o[t]:n[t]},set(e){"boolean"==typeof n[t]?e!==this[t]&&(e?this.setAttribute(s,""):this.removeAttribute(s),this.queueRender()):"number"==typeof n[t]?e!==parseFloat(this[t])&&(this.setAttribute(s,e),this.queueRender()):"object"!=typeof e&&`${e}`==`${this[t]}`||(null==e||"object"==typeof e?this.removeAttribute(s):this.setAttribute(s,e),this.queueRender(),o[t]=e)}})}))}initValue(){const t=Object.getOwnPropertyDescriptor(this,"value");if(void 0===t||void 0!==t.get||void 0!==t.set)return;let n=this.hasAttribute("value")?this.getAttribute("value"):e(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get:()=>n,set(t){n!==t&&(n=t,this.queueRender(!0))}})}get refs(){const t=null!=this.shadowRoot?this.shadowRoot:this;return null==this._refs&&(this._refs=new Proxy({},{get(e,n){if(void 0===e[n]){let o=t.querySelector(`[data-ref="${n}"]`);if(null==o&&(o=t.querySelector(n)),null==o)throw new Error(`elementRef "${n}" does not exist!`);o.removeAttribute("data-ref"),e[n]=o}return e[n]}})),this._refs}constructor(){super(),It+=1,this.initAttributes("hidden"),this.instanceId=`${this.tagName.toLocaleLowerCase()}-${It}`,this._value=e(this.defaultValue)}connectedCallback(){this.hydrate(),null!=this.role&&this.setAttribute("role",this.role),void 0!==this.onResize&&(at.observe(this),null==this._onResize&&(this._onResize=this.onResize.bind(this)),this.addEventListener("resize",this._onResize)),null!=this.value&&null!=this.getAttribute("value")&&(this._value=this.getAttribute("value")),this.queueRender()}disconnectedCallback(){at.unobserve(this)}_changeQueued=!1;_renderQueued=!1;queueRender(t=!1){this._hydrated&&(this._changeQueued||(this._changeQueued=t),this._renderQueued||(this._renderQueued=!0,requestAnimationFrame((()=>{this._changeQueued&&ot(this,"change"),this._changeQueued=!1,this._renderQueued=!1,this.render()}))))}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();const t="function"==typeof this.content?this.content():this.content;if(void 0!==this.styleNode){const e=this.attachShadow({mode:"open"});e.appendChild(this.styleNode),ht(e,t)}else{const e=[...this.childNodes];if(ht(this,t)&&e.length>0){const t={"":this};[...this.querySelectorAll("xin-slot")].forEach((e=>{t[e.name]=e})),e.forEach((e=>{const n=t[""],o=e instanceof Element?t[e.slot]:n;(void 0!==o?o:n).append(e)}))}}this._hydrated=!0}}render(){}}(class extends Ht{name="";content=null;constructor(){super(),this.initAttributes("name")}}).elementCreator({tag:"xin-slot"});const Wt=(t=(()=>!0))=>{const e=localStorage.getItem("xin-state");if(null!=e){const n=JSON.parse(e);for(const e of Object.keys(n).filter(t))void 0!==G[e]?Object.assign(G[e],n[e]):G[e]=n[e]}const n=ut((()=>{const e={},n=G[l];for(const o of Object.keys(n).filter(t))e[o]=n[o];localStorage.setItem("xin-state",JSON.stringify(e)),console.log("xin state saved to localStorage")}),500);Z(t,n)};function zt(t){const e={};return Object.keys(t).forEach((n=>{G[n]=t[n],e[n]=G[n]})),e}export{X as bind,nt as on,bt as bindings,Tt as css,Ft as darkMode,Dt as initVars,Nt as vars,Bt as varDefault,At as Color,Ht as Component,Ot as elements,Lt as svgElements,kt as mathML,Wt as hotReload,m as getListItem,a as xinPath,c as xinValue,wt as MoreMath,t as settings,dt as throttle,ut as debounce,G as xin,Z as observe,_ as unobserve,x as touch,p as observerShouldBeRemoved,zt as xinProxy};
//# sourceMappingURL=index.js.map
