var{defineProperty:Te,getOwnPropertyNames:Dn,getOwnPropertyDescriptor:Fn}=Object,Ln=Object.prototype.hasOwnProperty;var Ve=new WeakMap,Bn=(e)=>{var n=Ve.get(e),o;if(n)return n;if(n=Te({},"__esModule",{value:!0}),e&&typeof e==="object"||typeof e==="function")Dn(e).map((i)=>!Ln.call(n,i)&&Te(n,i,{get:()=>e[i],enumerable:!(o=Fn(e,i))||o.enumerable}));return Ve.set(e,n),n};var On=(e,n)=>{for(var o in n)Te(e,o,{get:n[o],enumerable:!0,configurable:!0,set:(i)=>n[o]=()=>i})};var po={};On(po,{xinValue:()=>h,xinProxy:()=>he,xinPath:()=>C,xin:()=>f,version:()=>xe,vars:()=>me,varDefault:()=>N,updates:()=>Me,unobserve:()=>J,touchElement:()=>le,touch:()=>P,tosi:()=>Ye,throttle:()=>Q,svgElements:()=>pe,settings:()=>B,on:()=>H,observe:()=>_,mathML:()=>ye,makeComponent:()=>oe,invertLuminance:()=>En,initVars:()=>Xn,hotReload:()=>kn,getListItem:()=>re,getCssVar:()=>fe,elements:()=>y,debounce:()=>de,css:()=>Y,boxedProxy:()=>ne,boxed:()=>W,blueprintLoader:()=>vn,blueprint:()=>Cn,bindings:()=>R,bind:()=>b,StyleSheet:()=>gn,MoreMath:()=>mn,Component:()=>L,Color:()=>a,BlueprintLoader:()=>be,Blueprint:()=>ie});module.exports=Bn(po);var B={debug:!1,perf:!1};function v(e){if(e==null||typeof e!=="object")return e;if(e instanceof Set)return new Set(e);else if(Array.isArray(e))return e.map(v);let n={};for(let o in e){let i=e[o];if(e!=null&&typeof e==="object")n[o]=v(i);else n[o]=i}return n}var Xe="-xin-data",O=`.${Xe}`,Ee="-xin-event",Se=`.${Ee}`,g="xinPath",z="xinValue",Ue="xinSet",_e="xinObserve",Ge="xinBind",Ze="xinOn",C=(e)=>{return e&&e[g]||void 0};function h(e){return typeof e==="object"&&e!==null?e[z]||e:e}var $=new WeakMap,M=new WeakMap;var A=(e)=>{let n=e.cloneNode();if(n instanceof Element){let o=M.get(e),i=$.get(e);if(o!=null)M.set(n,v(o));if(i!=null)$.set(n,v(i))}for(let o of Array.from(e instanceof HTMLTemplateElement?e.content.childNodes:e.childNodes))if(o instanceof Element||o instanceof DocumentFragment)n.appendChild(A(o));else n.appendChild(o.cloneNode());return n},Z=new WeakMap,re=(e)=>{let n=document.body.parentElement;while(e.parentElement!=null&&e.parentElement!==n){let o=Z.get(e);if(o!=null)return o;e=e.parentElement}return!1};var qe=Symbol("observer should be removed"),se=[],ce=[],ke=!1,Ce,ve;class Qe{description;test;callback;constructor(e,n){let o=typeof n==="string"?`"${n}"`:`function ${n.name}`,i;if(typeof e==="string")this.test=(t)=>typeof t==="string"&&t!==""&&(e.startsWith(t)||t.startsWith(e)),i=`test = "${e}"`;else if(e instanceof RegExp)this.test=e.test.bind(e),i=`test = "${e.toString()}"`;else if(e instanceof Function)this.test=e,i=`test = function ${e.name}`;else throw new Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${i}, ${o}`,typeof n==="function")this.callback=n;else throw new Error("expect callback to be a path or function");se.push(this)}}var Me=async()=>{if(Ce===void 0)return;await Ce},Hn=()=>{if(B.perf)console.time("xin async update");let e=Array.from(ce);for(let n of e)se.filter((o)=>{let i;try{i=o.test(n)}catch(t){throw new Error(`Listener ${o.description} threw "${t}" at "${n}"`)}if(i===qe)return J(o),!1;return i}).forEach((o)=>{let i;try{i=o.callback(n)}catch(t){console.error(`Listener ${o.description} threw "${t}" handling "${n}"`)}if(i===qe)J(o)});if(ce.splice(0),ke=!1,typeof ve==="function")ve();if(B.perf)console.timeEnd("xin async update")},P=(e)=>{let n=typeof e==="string"?e:C(e);if(n===void 0)throw console.error("touch was called on an invalid target",e),new Error("touch was called on an invalid target");if(ke===!1)Ce=new Promise((o)=>{ve=o}),ke=setTimeout(Hn);if(ce.find((o)=>n.startsWith(o))==null)ce.push(n)},De=(e,n)=>{return new Qe(e,n)},J=(e)=>{let n=se.indexOf(e);if(n>-1)se.splice(n,1);else throw new Error("unobserve failed, listener not found")};var $n=(e)=>{try{return JSON.stringify(e)}catch(n){return"{has circular references}"}},Fe=(...e)=>new Error(e.map($n).join(" "));var zn=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1),An=0,Pn=()=>(parseInt("10000",36)+ ++An).toString(36).slice(-5),jn=()=>zn()+Pn(),Be=Symbol("delete"),Ne=Symbol("new-object"),Le=Symbol("automatic-index");function en(e){if(e==="")return[];if(Array.isArray(e))return e;else{let n=[];while(e.length>0){let o=e.search(/\[[^\]]+\]/);if(o===-1){n.push(e.split("."));break}else{let i=e.slice(0,o);if(e=e.slice(o),i!=="")n.push(i.split("."));if(o=e.indexOf("]")+1,n.push(e.slice(1,o-1)),e.slice(o,o+1)===".")o+=1;e=e.slice(o)}}return n}}var D=new WeakMap;function nn(e,n){if(D.get(e)===void 0)D.set(e,{});if(D.get(e)[n]===void 0)D.get(e)[n]={};let o=D.get(e)[n];if(n==="_auto_")e.forEach((i,t)=>{if(i[Le]===void 0)i[Le]=jn();o[i[Le]+""]=t});else e.forEach((i,t)=>{o[V(i,n)+""]=t});return o}function Wn(e,n){if(D.get(e)===void 0||D.get(e)[n]===void 0)return nn(e,n);else return D.get(e)[n]}function In(e,n,o){o=o+"";let i=Wn(e,n)[o];if(i===void 0||V(e[i],n)+""!==o)i=nn(e,n)[o];return i}function Yn(e,n,o){if(e[n]===void 0&&o!==void 0)e[n]=o;return e[n]}function on(e,n,o,i){let t=n!==""?In(e,n,o):o;if(i===Be)return e.splice(t,1),D.delete(e),Symbol("deleted");else if(i===Ne){if(n===""&&e[t]===void 0)e[t]={}}else if(i!==void 0)if(t!==void 0)e[t]=i;else if(n!==""&&V(i,n)+""===o+"")e.push(i),t=e.length-1;else throw new Error(`byIdPath insert failed at [${n}=${o}]`);return e[t]}function Ke(e){if(!Array.isArray(e))throw Fe("setByPath failed: expected array, found",e)}function Re(e){if(e==null||!(e instanceof Object))throw Fe("setByPath failed: expected Object, found",e)}function V(e,n){let o=en(n),i=e,t,s,r,c;for(t=0,s=o.length;i!==void 0&&t<s;t++){let d=o[t];if(Array.isArray(d))for(r=0,c=d.length;i!==void 0&&r<c;r++){let l=d[r];i=i[l]}else if(i.length===0){if(i=i[Number(d.slice(1))],d[0]!=="=")return}else if(d.includes("=")){let[l,...p]=d.split("=");i=on(i,l,p.join("="))}else r=parseInt(d,10),i=i[r]}return i}function tn(e,n,o){let i=e;if(n==="")throw new Error("setByPath cannot be used to set the root object");let t=en(n);while(i!=null&&t.length>0){let s=t.shift();if(typeof s==="string"){let r=s.indexOf("=");if(r>-1){if(r===0)Re(i);else Ke(i);let c=s.slice(0,r),d=s.slice(r+1);if(i=on(i,c,d,t.length>0?Ne:o),t.length===0)return!0}else{Ke(i);let c=parseInt(s,10);if(t.length>0)i=i[c];else{if(o!==Be){if(i[c]===o)return!1;i[c]=o}else i.splice(c,1);return!0}}}else if(Array.isArray(s)&&s.length>0){Re(i);while(s.length>0){let r=s.shift();if(s.length>0||t.length>0)i=Yn(i,r,s.length>0?{}:[]);else{if(o!==Be){if(i[r]===o)return!1;i[r]=o}else{if(!Object.prototype.hasOwnProperty.call(i,r))return!1;delete i[r]}return!0}}}else throw new Error(`setByPath failed, bad path ${n}`)}throw new Error(`setByPath(${e}, ${n}, ${o}) failed`)}var Jn=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],He={},Vn=!0,Un=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,_n=(e)=>Un.test(e),j=(e="",n="")=>{if(e==="")return n;else if(n.match(/^\d+$/)!==null||n.includes("="))return`${e}[${n}]`;else return`${e}.${n}`},Gn={string(e){return new String(e)},boolean(e){return new Boolean(e)},bigint(e){return e},symbol(e){return e},number(e){return new Number(e)}};function Oe(e,n){let o=typeof e;if(e===void 0||o==="object"||o==="function")return e;else return new Proxy(Gn[typeof e](e),U(n,!0))}var U=(e,n)=>({get(o,i){switch(i){case g:return e;case z:return o.valueOf?o.valueOf():o;case Ue:return(r)=>f[e]=r;case _e:return(r)=>{let c=De(e,r);return()=>J(c)};case Ze:return(r,c)=>H(r,c,h(o));case Ge:return(r,c,d)=>{b(r,e,c,d)}}if(typeof i==="symbol")return o[i];let t=i,s=t.match(/^([^.[]+)\.(.+)$/)??t.match(/^([^\]]+)(\[.+)/)??t.match(/^(\[[^\]]+\])\.(.+)$/)??t.match(/^(\[[^\]]+\])\[(.+)$/);if(s!==null){let[,r,c]=s,d=j(e,r),l=V(o,r);return l!==null&&typeof l==="object"?new Proxy(l,U(d,n))[c]:l}if(t.startsWith("[")&&t.endsWith("]"))t=t.substring(1,t.length-1);if(!Array.isArray(o)&&o[t]!==void 0||Array.isArray(o)&&t.includes("=")){let r;if(t.includes("=")){let[c,d]=t.split("=");r=o.find((l)=>`${V(l,c)}`===d)}else r=o[t];if(r instanceof Object){let c=j(e,t);return new Proxy(r instanceof Function?r.bind(o):r,U(c,n))}else return n?Oe(r,j(e,t)):r}else if(Array.isArray(o)){let r=o[t];return typeof r==="function"?(...c)=>{let d=r.apply(o,c);if(Jn.includes(t))P(e);return d}:typeof r==="object"?new Proxy(r,U(j(e,t),n)):n?Oe(r,j(e,t)):r}else return n?Oe(o[t],j(e,t)):o[t]},set(o,i,t){t=h(t);let s=i!==z?j(e,i):e;if(Vn&&!_n(s))throw new Error(`setting invalid path ${s}`);if(h(f[s])!==t&&tn(He,s,t))P(s);return!0}}),_=(e,n)=>{let o=typeof n==="function"?n:f[n];if(typeof o!=="function")throw new Error(`observe expects a function or path to a function, ${n} is neither`);return De(e,o)},f=new Proxy(He,U("",!1)),W=new Proxy(He,U("",!0));var $e=(e,n)=>{let o=new Event(n);e.dispatchEvent(o)},sn=(e)=>{if(e instanceof HTMLInputElement)return e.type;else if(e instanceof HTMLSelectElement&&e.hasAttribute("multiple"))return"multi-select";else return"other"},cn=(e,n)=>{switch(sn(e)){case"radio":e.checked=e.value===n;break;case"checkbox":e.checked=!!n;break;case"date":e.valueAsDate=new Date(n);break;case"multi-select":for(let o of Array.from(e.querySelectorAll("option")))o.selected=n[o.value];break;default:e.value=n}},dn=(e)=>{switch(sn(e)){case"radio":{let n=e.parentElement?.querySelector(`[name="${e.name}"]:checked`);return n!=null?n.value:null}case"checkbox":return e.checked;case"date":return e.valueAsDate?.toISOString();case"multi-select":return Array.from(e.querySelectorAll("option")).reduce((n,o)=>{return n[o.value]=o.selected,n},{});default:return e.value}},{ResizeObserver:rn}=globalThis,q=rn!=null?new rn((e)=>{for(let n of e){let o=n.target;$e(o,"resize")}}):{observe(){},unobserve(){}},ze=(e,n,o=!0)=>{if(e!=null&&n!=null)if(typeof n==="string")e.textContent=n;else if(Array.isArray(n))n.forEach((i)=>{e.append(i instanceof Node&&o?A(i):i)});else if(n instanceof Node)e.append(o?A(n):n);else throw new Error("expect text content or document node")};var de=(e,n=250)=>{let o;return(...i)=>{if(o!==void 0)clearTimeout(o);o=setTimeout(()=>{e(...i)},n)}},Q=(e,n=250)=>{let o,i=Date.now()-n,t=!1;return(...s)=>{if(clearTimeout(o),o=setTimeout(()=>{e(...s),i=Date.now()},n),!t&&Date.now()-i>=n){t=!0;try{e(...s),i=Date.now()}finally{t=!1}}}};var ae=Symbol("list-binding"),Zn=16,qn=100;function an(e,n){let o=Array.from(e.querySelectorAll(O));if(e.matches(O))o.unshift(e);for(let i of o){let t=M.get(i);for(let s of t){if(s.path.startsWith("^"))s.path=`${n}${s.path.substring(1)}`;if(s.binding.toDOM!=null)s.binding.toDOM(i,f[s.path])}}}class ln{boundElement;listTop;listBottom;template;options;itemToElement;_array=[];_update;_previousSlice;static filterBoundObservers=new WeakMap;constructor(e,n,o={}){if(this.boundElement=e,this.itemToElement=new WeakMap,e.children.length!==1)throw new Error("ListBinding expects an element with exactly one child element");if(e.children[0]instanceof HTMLTemplateElement){let i=e.children[0];if(i.content.children.length!==1)throw new Error("ListBinding expects a template with exactly one child element");this.template=A(i.content.children[0])}else this.template=e.children[0],this.template.remove();if(this.options=o,this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.listTop.classList.add("virtual-list-padding"),this.listBottom.classList.add("virtual-list-padding"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),o.virtual!=null)q.observe(this.boundElement),this._update=Q(()=>{this.update(this._array,!0)},Zn),this.boundElement.addEventListener("scroll",this._update),this.boundElement.addEventListener("resize",this._update)}visibleSlice(){let{virtual:e,hiddenProp:n,visibleProp:o}=this.options,i=this._array;if(n!==void 0)i=i.filter((d)=>d[n]!==!0);if(o!==void 0)i=i.filter((d)=>d[o]===!0);if(this.options.filter&&this.needle!==void 0)i=this.options.filter(i,this.needle);let t=0,s=i.length-1,r=0,c=0;if(e!=null&&this.boundElement instanceof HTMLElement){let d=this.boundElement.offsetWidth,l=this.boundElement.offsetHeight;if(e.visibleColumns==null)e.visibleColumns=e.width!=null?Math.max(1,Math.floor(d/e.width)):1;let p=Math.ceil(l/e.height)+(e.rowChunkSize||1),E=Math.ceil(i.length/e.visibleColumns),S=e.visibleColumns*p,m=Math.floor(this.boundElement.scrollTop/e.height);if(m>E-p+1)m=Math.max(0,E-p+1);if(e.rowChunkSize)m-=m%e.rowChunkSize;t=m*e.visibleColumns,s=t+S-1,r=m*e.height,c=Math.max((E-p)*e.height-r,0)}return{items:i,firstItem:t,lastItem:s,topBuffer:r,bottomBuffer:c}}needle;filter=Q((e)=>{if(this.needle!==e)this.needle=e,this.update(this._array)},qn);update(e,n){if(e==null)e=[];this._array=e;let{hiddenProp:o,visibleProp:i}=this.options,t=C(e),s=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",s.items.length===0);let r=this._previousSlice,{firstItem:c,lastItem:d,topBuffer:l,bottomBuffer:p}=s;if(o===void 0&&i===void 0&&n===!0&&r!=null&&c===r.firstItem&&d===r.lastItem)return;this._previousSlice=s;let E=0,S=0,m=0;for(let u of Array.from(this.boundElement.children)){if(u===this.listTop||u===this.listBottom)continue;let k=Z.get(u);if(k==null)u.remove();else{let w=s.items.indexOf(k);if(w<c||w>d)u.remove(),this.itemToElement.delete(k),Z.delete(u),E++}}this.listTop.style.height=String(l)+"px",this.listBottom.style.height=String(p)+"px";let x=[],{idPath:we}=this.options;for(let u=c;u<=d;u++){let k=s.items[u];if(k===void 0)continue;let w=this.itemToElement.get(h(k));if(w==null){if(m++,w=A(this.template),typeof k==="object")this.itemToElement.set(h(k),w),Z.set(w,h(k));if(this.boundElement.insertBefore(w,this.listBottom),we!=null){let ge=k[we],Mn=`${t}[${we}=${ge}]`;an(w,Mn)}else{let ge=`${t}[${u}]`;an(w,ge)}}x.push(w)}let te=null;for(let u of x){if(u.previousElementSibling!==te)if(S++,te?.nextElementSibling!=null)this.boundElement.insertBefore(u,te.nextElementSibling);else this.boundElement.insertBefore(u,this.listBottom);te=u}if(B.perf)console.log(t,"updated",{removed:E,created:m,moved:S})}}var fn=(e,n,o)=>{let i=e[ae];if(i===void 0)i=new ln(e,n,o),e[ae]=i;return i};var{document:K,MutationObserver:un}=globalThis,le=(e,n)=>{let o=M.get(e);if(o==null)return;for(let i of o){let{binding:t,options:s}=i,{path:r}=i,{toDOM:c}=t;if(c!=null){if(r.startsWith("^")){let d=re(e);if(d!=null&&d[g]!=null)r=i.path=`${d[g]}${r.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${r}`,e,"is not part of a list"),new Error(`Cannot resolve relative binding ${r}`)}if(n==null||r.startsWith(n))c(e,f[r],s)}}};if(un!=null)new un((n)=>{n.forEach((o)=>{Array.from(o.addedNodes).forEach((i)=>{if(i instanceof Element)Array.from(i.querySelectorAll(O)).forEach((t)=>le(t))})})}).observe(K.body,{subtree:!0,childList:!0});_(()=>!0,(e)=>{let n=Array.from(K.querySelectorAll(O));for(let o of n)le(o,e)});var pn=(e)=>{let n=e.target.closest(O);while(n!=null){let o=M.get(n);for(let i of o){let{binding:t,path:s}=i,{fromDOM:r}=t;if(r!=null){let c;try{c=r(n,i.options)}catch(d){throw console.error("Cannot get value from",n,"via",i),new Error("Cannot obtain value fromDOM")}if(c!=null){let d=f[s];if(d==null)f[s]=c;else{let l=d[g]!=null?d[z]:d,p=c[g]!=null?c[z]:c;if(l!==p)f[s]=p}}}}n=n.parentElement.closest(O)}};if(globalThis.document!=null)K.body.addEventListener("change",pn,!0),K.body.addEventListener("input",pn,!0);function b(e,n,o,i){if(e instanceof DocumentFragment)throw new Error("bind cannot bind to a DocumentFragment");let t;if(typeof n==="object"&&n[g]===void 0&&i===void 0){let{value:c}=n;t=typeof c==="string"?c:c[g],i=n,delete i.value}else t=typeof n==="string"?n:n[g];if(t==null)throw new Error("bind requires a path or object with xin Proxy");let{toDOM:s}=o;e.classList?.add(Xe);let r=M.get(e);if(r==null)r=[],M.set(e,r);if(r.push({path:t,binding:o,options:i}),s!=null&&!t.startsWith("^"))P(t);if(i?.filter&&i?.needle)b(e,i.needle,{toDOM(c,d){console.log({needle:d}),c[ae]?.filter(d)}});return e}var yn=new Set,Qn=(e)=>{let n=e?.target.closest(Se),o=!1,i=new Proxy(e,{get(s,r){if(r==="stopPropagation")return()=>{e.stopPropagation(),o=!0};else{let c=s[r];return typeof c==="function"?c.bind(s):c}}}),t=new Set;while(!o&&n!=null){let r=$.get(n)[e.type]||t;for(let c of r){if(typeof c==="function")c(i);else{let d=f[c];if(typeof d==="function")d(i);else throw new Error(`no event handler found at path ${c}`)}if(o)continue}n=n.parentElement!=null?n.parentElement.closest(Se):null}};function H(e,n,o){let i=$.get(e);if(e.classList.add(Ee),i==null)i={},$.set(e,i);if(!i[n])i[n]=new Set;if(i[n].add(o),!yn.has(n))yn.add(n),K.body.addEventListener(n,Qn,!0);return()=>{i[n].delete(o)}}var R={value:{toDOM:cn,fromDOM(e){return dn(e)}},text:{toDOM(e,n){e.textContent=n}},enabled:{toDOM(e,n){e.disabled=!n}},disabled:{toDOM(e,n){e.disabled=Boolean(n)}},list:{toDOM(e,n,o){fn(e,n,o).update(n)}}};var Kn=180/Math.PI,Rn=Math.PI/180;function T(e,n,o){return o<e?NaN:n<e?e:n>o?o:n}function F(e,n,o,i=!0){if(i)o=T(0,o,1);return o*(n-e)+e}var mn={RADIANS_TO_DEGREES:Kn,DEGREES_TO_RADIANS:Rn,clamp:T,lerp:F};function fe(e,n=document.body){let o=getComputedStyle(n);if(e.endsWith(")")&&e.startsWith("var("))e=e.slice(4,-1);return o.getPropertyValue(e).trim()}var Nn=(e,n,o)=>{return(0.299*e+0.587*n+0.114*o)/255},I=(e)=>("00"+Math.round(Number(e)).toString(16)).slice(-2);class xn{h;s;l;constructor(e,n,o){e/=255,n/=255,o/=255;let i=Math.max(e,n,o),t=i-Math.min(e,n,o),s=t!==0?i===e?(n-o)/t:i===n?2+(o-e)/t:4+(e-n)/t:0;this.h=60*s<0?60*s+360:60*s,this.s=t!==0?i<=0.5?t/(2*i-t):t/(2-(2*i-t)):0,this.l=(2*i-t)/2}}var G=globalThis.document!==void 0?globalThis.document.createElement("span"):void 0;class a{r;g;b;a;static fromVar(e,n=document.body){return a.fromCss(fe(e,n))}static fromCss(e){let n=e;if(G instanceof HTMLSpanElement)G.style.color="black",G.style.color=e,document.body.appendChild(G),n=getComputedStyle(G).color,G.remove();let[o,i,t,s]=n.match(/[\d.]+/g)||["0","0","0","0"],r=n.startsWith("color(srgb")?255:1;return new a(Number(o)*r,Number(i)*r,Number(t)*r,s==null?1:Number(s))}static fromHsl(e,n,o,i=1){let t,s,r;if(n===0)t=s=r=o;else{let d=(S,m,x)=>{if(x<0)x+=1;if(x>1)x-=1;if(x<0.16666666666666666)return S+(m-S)*6*x;if(x<0.5)return m;if(x<0.6666666666666666)return S+(m-S)*(0.6666666666666666-x)*6;return S},l=o<0.5?o*(1+n):o+n-o*n,p=2*o-l,E=(e%360+360)%360/360;t=d(p,l,E+0.3333333333333333),s=d(p,l,E),r=d(p,l,E-0.3333333333333333)}let c=new a(t*255,s*255,r*255,i);return c.hslCached={h:(e%360+360)%360,s:n,l:o},c}static black=new a(0,0,0);static white=new a(255,255,255);constructor(e,n,o,i=1){this.r=T(0,e,255),this.g=T(0,n,255),this.b=T(0,o,255),this.a=T(0,i,1)}get inverse(){return new a(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:e,s:n,l:o}=this._hsl;return a.fromHsl(e,n,1-o,this.a)}get opaque(){return this.a===1?this:new a(this.r,this.g,this.b,1)}contrasting(e=1){return this.opaque.blend(this.brightness>0.5?a.black:a.white,e)}get rgb(){let{r:e,g:n,b:o}=this;return`rgb(${e.toFixed(0)},${n.toFixed(0)},${o.toFixed(0)})`}get rgba(){let{r:e,g:n,b:o,a:i}=this;return`rgba(${e.toFixed(0)},${n.toFixed(0)},${o.toFixed(0)},${i.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}hslCached;get _hsl(){if(this.hslCached==null)this.hslCached=new xn(this.r,this.g,this.b);return this.hslCached}get hsl(){let{h:e,s:n,l:o}=this._hsl;return`hsl(${e.toFixed(0)}deg ${(n*100).toFixed(0)}% ${(o*100).toFixed(0)}%)`}get hsla(){let{h:e,s:n,l:o}=this._hsl;return`hsl(${e.toFixed(0)}deg ${(n*100).toFixed(0)}% ${(o*100).toFixed(0)}% / ${(this.a*100).toFixed(0)}%)`}get mono(){let e=this.brightness*255;return new a(e,e,e)}get brightness(){return Nn(this.r,this.g,this.b)}get html(){return this.toString()}toString(){return this.a===1?"#"+I(this.r)+I(this.g)+I(this.b):"#"+I(this.r)+I(this.g)+I(this.b)+I(Math.floor(255*this.a))}brighten(e){let{h:n,s:o,l:i}=this._hsl,t=T(0,i+e*(1-i),1);return a.fromHsl(n,o,t,this.a)}darken(e){let{h:n,s:o,l:i}=this._hsl,t=T(0,i*(1-e),1);return a.fromHsl(n,o,t,this.a)}saturate(e){let{h:n,s:o,l:i}=this._hsl,t=T(0,o+e*(1-o),1);return a.fromHsl(n,t,i,this.a)}desaturate(e){let{h:n,s:o,l:i}=this._hsl,t=T(0,o*(1-e),1);return a.fromHsl(n,t,i,this.a)}rotate(e){let{h:n,s:o,l:i}=this._hsl,t=(n+360+e)%360;return a.fromHsl(t,o,i,this.a)}opacity(e){let{h:n,s:o,l:i}=this._hsl;return a.fromHsl(n,o,i,e)}swatch(){return console.log(`%c      %c ${this.html}, ${this.rgba}`,`background-color: ${this.html}`,"background-color: transparent"),this}blend(e,n){return new a(F(this.r,e.r,n),F(this.g,e.g,n),F(this.b,e.b,n),F(this.a,e.a,n))}static blendHue(e,n,o){let i=(n-e+720)%360;if(i<180)return e+o*i;else return e-(360-i)*o}mix(e,n){let o=this._hsl,i=e._hsl;return a.fromHsl(o.s===0?i.h:i.s===0?o.h:a.blendHue(o.h,i.h,n),F(o.s,i.s,n),F(o.l,i.l,n),F(this.a,e.a,n))}colorMix(e,n){return a.fromCss(`color-mix(in hsl, ${this.html}, ${e.html} ${(n*100).toFixed(0)}%)`)}}function X(e){return e.replace(/[A-Z]/g,(n)=>{return`-${n.toLocaleLowerCase()}`})}function hn(e){return e.replace(/-([a-z])/g,(n,o)=>{return o.toLocaleUpperCase()})}var eo="http://www.w3.org/1998/Math/MathML",no="http://www.w3.org/2000/svg",ue={},bn=(e,n,o)=>{let i=je(X(n),o);if(i.prop.startsWith("--"))e.style.setProperty(i.prop,i.value);else e.style[n]=i.value},oo=(e)=>{return{toDOM(n,o){bn(n,e,o)}}},wn=(e,n,o)=>{if(n==="style")if(typeof o==="object")for(let i of Object.keys(o))if(C(o[i]))b(e,o[i],oo(i));else bn(e,i,o[i]);else e.setAttribute("style",o);else if(e[n]!==void 0){let{MathMLElement:i}=globalThis;if(e instanceof SVGElement||i!==void 0&&e instanceof i)e.setAttribute(n,o);else e[n]=o}else{let i=X(n);if(i==="class")o.split(" ").forEach((t)=>{e.classList.add(t)});else if(e[i]!==void 0)e[i]=o;else if(typeof o==="boolean")o?e.setAttribute(i,""):e.removeAttribute(i);else e.setAttribute(i,o)}},io=(e)=>{return{toDOM(n,o){wn(n,e,o)}}},to=(e,n,o)=>{if(n==="apply")o(e);else if(n.match(/^on[A-Z]/)!=null){let i=n.substring(2).toLowerCase();H(e,i,o)}else if(n==="bind")if((typeof o.binding==="string"?R[o.binding]:o.binding)!==void 0&&o.value!==void 0)b(e,o.value,o.binding instanceof Function?{toDOM:o.binding}:o.binding);else throw new Error("bad binding");else if(n.match(/^bind[A-Z]/)!=null){let i=n.substring(4,5).toLowerCase()+n.substring(5),t=R[i];if(t!==void 0)b(e,o,t);else throw new Error(`${n} is not allowed, bindings.${i} is not defined`)}else if(C(o))b(e,o,io(n));else wn(e,n,o)},Ae=(e,...n)=>{if(ue[e]===void 0){let[t,s]=e.split("|");if(s===void 0)ue[e]=globalThis.document.createElement(t);else ue[e]=globalThis.document.createElementNS(s,t)}let o=ue[e].cloneNode(),i={};for(let t of n)if(t instanceof Element||t instanceof DocumentFragment||typeof t==="string"||typeof t==="number")if(o instanceof HTMLTemplateElement)o.content.append(t);else o.append(t);else if(C(t))o.append(y.span({bindText:t}));else Object.assign(i,t);for(let t of Object.keys(i)){let s=i[t];to(o,t,s)}return o},Pe=(...e)=>{let n=globalThis.document.createDocumentFragment();for(let o of e)n.append(o);return n},y=new Proxy({fragment:Pe},{get(e,n){if(n=n.replace(/[A-Z]/g,(o)=>`-${o.toLocaleLowerCase()}`),e[n]===void 0)e[n]=(...o)=>Ae(n,...o);return e[n]},set(){throw new Error("You may not add new properties to elements")}}),pe=new Proxy({fragment:Pe},{get(e,n){if(e[n]===void 0)e[n]=(...o)=>Ae(`${n}|${no}`,...o);return e[n]},set(){throw new Error("You may not add new properties to elements")}}),ye=new Proxy({fragment:Pe},{get(e,n){if(e[n]===void 0)e[n]=(...o)=>Ae(`${n}|${eo}`,...o);return e[n]},set(){throw new Error("You may not add new properties to elements")}});function gn(e,n){let o=y.style(Y(n));o.id=e,document.head.append(o)}var ro=["animation-iteration-count","flex","flex-base","flex-grow","flex-shrink","opacity","order","tab-size","widows","z-index","zoom"],je=(e,n)=>{if(typeof n==="number"&&!ro.includes(e))n=`${n}px`;if(e.startsWith("_"))if(e.startsWith("__"))e="--"+e.substring(2),n=`var(${e}-default, ${n})`;else e="--"+e.substring(1);return{prop:e,value:String(n)}},so=(e,n,o)=>{if(o===void 0)return"";if(o instanceof a)o=o.html;let i=je(n,o);return`${e}  ${i.prop}: ${i.value};`},Tn=(e,n,o="")=>{let i=X(e);if(typeof n==="object"&&!(n instanceof a)){let t=Object.keys(n).map((s)=>Tn(s,n[s],`${o}  `)).join(`
`);return`${o}  ${e} {
${t}
${o}  }`}else return so(o,i,n)},Y=(e,n="")=>{return Object.keys(e).map((i)=>{let t=e[i];if(typeof t==="string"){if(i==="@import")return`@import url('${t}');`;throw new Error("top-level string value only allowed for `@import`")}let s=Object.keys(t).map((r)=>Tn(r,t[r])).join(`
`);return`${n}${i} {
${s}
}`}).join(`

`)},Xn=(e)=>{console.warn("initVars is deprecated. Just use _ and __ prefixes instead.");let n={};for(let o of Object.keys(e)){let i=e[o],t=X(o);n[`--${t}`]=typeof i==="number"&&i!==0?String(i)+"px":i}return n},En=(e)=>{let n={};for(let o of Object.keys(e)){let i=e[o];if(i instanceof a)n[o]=i.inverseLuminance;else if(typeof i==="string"&&i.match(/^(#[0-9a-fA-F]{3}|rgba?\(|hsla?\()/))n[o]=a.fromCss(i).inverseLuminance}return n},N=new Proxy({},{get(e,n){if(e[n]===void 0){let o="--"+X(n);e[n]=(i)=>`var(${o}, ${i})`}return e[n]}}),me=new Proxy({},{get(e,n){if(n==="default")return N;if(e[n]==null){n=X(n);let[,o,,i,t,s]=n.match(/^([-\w]*?)((_)?(\d+)(\w?))?$/)||["",n],r=`--${o}`;if(t!=null){let c=i==null?Number(t)/100:-Number(t)/100;switch(s){case"b":{let d=a.fromVar(r);e[n]=c>0?d.brighten(c).rgba:d.darken(-c).rgba}break;case"s":{let d=a.fromVar(r);e[n]=c>0?d.saturate(c).rgba:d.desaturate(-c).rgba}break;case"h":{let d=a.fromVar(r);e[n]=d.rotate(c*100).rgba}break;case"o":{let d=a.fromVar(r);e[n]=d.opacity(c).rgba}break;case"":e[n]=`calc(var(${r}) * ${c})`;break;default:throw console.error(s),new Error(`Unrecognized method ${s} for css variable ${r}`)}}else e[n]=`var(${r})`}return e[n]}});var co=0;function We(){return`custom-elt${(co++).toString(36)}`}var Sn=0,ee={};function ao(e,n){let o=ee[e],i=Y(n).replace(/:host\b/g,e);ee[e]=o?o+`
`+i:i}function lo(e){if(ee[e])document.head.append(y.style({id:e+"-component"},ee[e]));delete ee[e]}class L extends HTMLElement{static elements=y;static _elementCreator;instanceId;styleNode;static styleSpec;static styleNode;content=y.slot();isSlotted;static _tagName=null;static get tagName(){return this._tagName}static StyleNode(e){return console.warn("StyleNode is deprecated, just assign static styleSpec: XinStyleSheet to the class directly"),y.style(Y(e))}static elementCreator(e={}){if(this._elementCreator==null){let{tag:n,styleSpec:o}=e,i=e!=null?n:null;if(i==null)if(typeof this.name==="string"&&this.name!==""){if(i=X(this.name),i.startsWith("-"))i=i.slice(1)}else i=We();if(customElements.get(i)!=null)console.warn(`${i} is already defined`);if(i.match(/\w+(-\w+)+/)==null)console.warn(`${i} is not a legal tag for a custom-element`),i=We();while(customElements.get(i)!==void 0)i=We();if(this._tagName=i,o!==void 0)ao(i,o);window.customElements.define(i,this,e),this._elementCreator=y[i]}return this._elementCreator}initAttributes(...e){let n={},o={};new MutationObserver((t)=>{let s=!1;if(t.forEach((r)=>{s=!!(r.attributeName&&e.includes(hn(r.attributeName)))}),s&&this.queueRender!==void 0)this.queueRender(!1)}).observe(this,{attributes:!0}),e.forEach((t)=>{n[t]=v(this[t]);let s=X(t);Object.defineProperty(this,t,{enumerable:!1,get(){if(typeof n[t]==="boolean")return this.hasAttribute(s);else if(this.hasAttribute(s))return typeof n[t]==="number"?parseFloat(this.getAttribute(s)):this.getAttribute(s);else if(o[t]!==void 0)return o[t];else return n[t]},set(r){if(typeof n[t]==="boolean"){if(r!==this[t]){if(r)this.setAttribute(s,"");else this.removeAttribute(s);this.queueRender()}}else if(typeof n[t]==="number"){if(r!==parseFloat(this[t]))this.setAttribute(s,r),this.queueRender()}else if(typeof r==="object"||`${r}`!==`${this[t]}`){if(r===null||r===void 0||typeof r==="object")this.removeAttribute(s);else this.setAttribute(s,r);this.queueRender(),o[t]=r}}})})}initValue(){let e=Object.getOwnPropertyDescriptor(this,"value");if(e===void 0||e.get!==void 0||e.set!==void 0)return;let n=this.hasAttribute("value")?this.getAttribute("value"):v(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get(){return n},set(o){if(n!==o)n=o,this.queueRender(!0)}})}_parts;get parts(){let e=this.shadowRoot!=null?this.shadowRoot:this;if(this._parts==null)this._parts=new Proxy({},{get(n,o){if(n[o]===void 0){let i=e.querySelector(`[part="${o}"]`);if(i==null)i=e.querySelector(o);if(i==null)throw new Error(`elementRef "${o}" does not exist!`);i.removeAttribute("data-ref"),n[o]=i}return n[o]}});return this._parts}constructor(){super();Sn+=1,this.initAttributes("hidden"),this.instanceId=`${this.tagName.toLocaleLowerCase()}-${Sn}`,this._value=v(this.defaultValue)}connectedCallback(){if(lo(this.constructor.tagName),this.hydrate(),this.role!=null)this.setAttribute("role",this.role);if(this.onResize!==void 0){if(q.observe(this),this._onResize==null)this._onResize=this.onResize.bind(this);this.addEventListener("resize",this._onResize)}if(this.value!=null&&this.getAttribute("value")!=null)this._value=this.getAttribute("value");this.queueRender()}disconnectedCallback(){q.unobserve(this)}_changeQueued=!1;_renderQueued=!1;queueRender(e=!1){if(!this._hydrated)return;if(!this._changeQueued)this._changeQueued=e;if(!this._renderQueued)this._renderQueued=!0,requestAnimationFrame(()=>{if(this._changeQueued)$e(this,"change");this._changeQueued=!1,this._renderQueued=!1,this.render()})}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();let e=typeof this.content!=="function",n=typeof this.content==="function"?this.content():this.content,{styleSpec:o}=this.constructor,{styleNode:i}=this.constructor;if(o)i=this.constructor.styleNode=y.style(Y(o)),delete this.constructor.styleNode;if(this.styleNode)console.warn(this,"styleNode is deprecrated, use static styleNode or statc styleSpec instead"),i=this.styleNode;if(i){let t=this.attachShadow({mode:"open"});t.appendChild(i.cloneNode(!0)),ze(t,n,e)}else if(n!==null){let t=Array.from(this.childNodes);ze(this,n,e),this.isSlotted=this.querySelector("slot,xin-slot")!==void 0;let s=Array.from(this.querySelectorAll("slot"));if(s.length>0)s.forEach(Ie.replaceSlot);if(t.length>0){let r={"":this};Array.from(this.querySelectorAll("xin-slot")).forEach((c)=>{r[c.name]=c}),t.forEach((c)=>{let d=r[""],l=c instanceof Element?r[c.slot]:d;(l!==void 0?l:d).append(c)})}}this._hydrated=!0}}render(){}}class Ie extends L{name="";content=null;static replaceSlot(e){let n=document.createElement("xin-slot");if(e.name!=="")n.setAttribute("name",e.name);e.replaceWith(n)}constructor(){super();this.initAttributes("name")}}var gi=Ie.elementCreator({tag:"xin-slot"});var kn=(e=()=>!0)=>{let n=localStorage.getItem("xin-state");if(n!=null){let i=JSON.parse(n);for(let t of Object.keys(i).filter(e))if(f[t]!==void 0)Object.assign(f[t],i[t]);else f[t]=i[t]}let o=de(()=>{let i={},t=h(f);for(let s of Object.keys(t).filter(e))i[s]=t[s];localStorage.setItem("xin-state",JSON.stringify(i)),console.log("xin state saved to localStorage")},500);_(e,o)};var xe="1.0.5";function Ye(e){return Object.assign(W,e),W}function ne(e){return console.warn("boxedProxy is deprecated, please use tosi() instead"),Ye(e)}function he(e,n=!1){if(n)return console.warn("xinProxy(..., true) is deprecated; use tosi(...) instead"),ne(e);return Object.keys(e).forEach((o)=>{f[o]=e[o]}),f}var fo={};async function oe(e,n){let{type:o,styleSpec:i}=await n(e,{Color:a,Component:L,elements:y,svgElements:pe,mathML:ye,varDefault:N,vars:me,xin:f,boxed:W,xinProxy:he,boxedProxy:ne,makeComponent:oe,bind:b,on:H,version:xe}),t={type:o,creator:o.elementCreator({tag:e,styleSpec:i})};return fo[e]=t,t}var Je={},uo=(e)=>import(`${e}`);class ie extends L{tag="anon-elt";src="";property="default";loaded;blueprintLoaded=(e)=>{};async packaged(){let{tag:e,src:n,property:o}=this,i=`${e}.${o}:${n}`;if(!this.loaded){if(Je[i]===void 0)Je[i]=uo(n).then((t)=>{let s=t[o];return oe(e,s)});else console.log(`using cached ${e}`);this.loaded=await Je[i],this.blueprintLoaded(this.loaded)}return this.loaded}constructor(){super();this.initAttributes("tag","src","property")}}var Cn=ie.elementCreator({tag:"xin-blueprint",styleSpec:{":host":{display:"none"}}});class be extends L{allLoaded=()=>{};constructor(){super()}async load(){let n=Array.from(this.querySelectorAll(ie.tagName)).filter((o)=>o.src).map((o)=>o.packaged());await Promise.all(n),this.allLoaded()}connectedCallback(){super.connectedCallback(),this.load()}}var vn=be.elementCreator({tag:"xin-loader",styleSpec:{":host":{display:"none"}}});

//# debugId=B3F35CC0D02DE8EC64756E2164756E21
//# sourceMappingURL=main.js.map
