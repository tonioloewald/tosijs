function W(n){if(n==null||typeof n!=="object")return n;if(n instanceof Set)return new Set(n);else if(Array.isArray(n))return n.map(W);let o={};for(let f in n){let i=n[f];if(n!=null&&typeof n==="object")o[f]=W(i);else o[f]=i}return o}var dn="-xin-data",u=`.${dn}`,Gn="-xin-event",Qn=`.${Gn}`,J=Symbol.for("xin-path"),O=Symbol.for("xin-value"),kn="xinObserve",Wn="xinBind",zn="xinOn",v=Symbol("list-binding"),rn=Symbol("list-instance"),Zn=new Map;function yo(n,o){let f=Zn.get(n);if(f===void 0)f=new Set,Zn.set(n,f);f.add(o)}function Lo(n){return Zn.get(n)}var Mo=new Set;function K(n,o){if(!Mo.has(n))console.warn(o),Mo.add(n)}function On(n,o){let f=!1;return(...i)=>{if(!f)console.warn(o),f=!0;return n(...i)}}var D=(n)=>{return n&&n[J]||void 0};function C(n){if(typeof n==="object"&&n!==null){let o=n[O];return o!==void 0?o:n}return n}function No(n,o){if(D(n)===void 0)throw Error("tosiSetValue requires a xin or boxed proxy");n[O]=o}var go=On(D,"xinPath is deprecated. Use tosiPath instead."),to=On(C,"xinValue is deprecated. Use tosiValue instead."),V=new WeakMap,z=new WeakMap;var e=(n)=>{let o=n.cloneNode();if(o instanceof Element){let f=z.get(n),i=V.get(n);if(f!=null)z.set(o,W(f));if(i!=null)V.set(o,W(i))}for(let f of Array.from(n instanceof HTMLTemplateElement?n.content.childNodes:n.childNodes))if(f instanceof Element||f instanceof DocumentFragment)o.appendChild(e(f));else o.appendChild(f.cloneNode());return o};var b={debug:!1,perf:!1};var lo=(n)=>{try{return JSON.stringify(n)}catch(o){return"{has circular references}"}},Un=(...n)=>Error(n.map(lo).join(" "));var vo=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1),ao=0,nf=()=>(parseInt("10000",36)+ ++ao).toString(36).slice(-5),of=()=>vo()+nf(),An=Symbol("delete"),so=Symbol("new-object"),qn=Symbol("automatic-index");function Ho(n){if(n==="")return[];if(Array.isArray(n))return n;else{let o=[];while(n.length>0){let f=n.search(/\[[^\]]+\]/);if(f===-1){o.push(n.split("."));break}else{let i=n.slice(0,f);if(n=n.slice(f),i!=="")o.push(i.split("."));if(f=n.indexOf("]")+1,o.push(n.slice(1,f-1)),n.slice(f,f+1)===".")f+=1;n=n.slice(f)}}return o}}var U=new WeakMap;function Co(n,o){if(U.get(n)===void 0)U.set(n,{});if(U.get(n)[o]===void 0)U.get(n)[o]={};let f=U.get(n)[o];if(o==="_auto_")n.forEach((i,c)=>{if(i[qn]===void 0)i[qn]=of();f[i[qn]+""]=c});else n.forEach((i,c)=>{f[q(i,o)+""]=c});return f}function ff(n,o){if(U.get(n)===void 0||U.get(n)[o]===void 0)return Co(n,o);else return U.get(n)[o]}function cf(n,o,f){f=f+"";let i=ff(n,o)[f];if(i===void 0||q(n[i],o)+""!==f)i=Co(n,o)[f];return i}function mf(n,o,f){if(n[o]===void 0&&f!==void 0)n[o]=f;return n[o]}function Xo(n,o,f,i){let c=o!==""?cf(n,o,f):f;if(i===An)return n.splice(c,1),U.delete(n),Symbol("deleted");else if(i===so){if(o===""&&n[c]===void 0)n[c]={}}else if(i!==void 0)if(c!==void 0)n[c]=i;else if(o!==""&&q(i,o)+""===f+"")n.push(i),c=n.length-1;else throw Error(`byIdPath insert failed at [${o}=${f}]`);return n[c]}function xo(n){if(!Array.isArray(n))throw Un("setByPath failed: expected array, found",n)}function To(n){if(n==null||!(n instanceof Object))throw Un("setByPath failed: expected Object, found",n)}function q(n,o){let f=Ho(o),i=n,c,m,r,w;for(c=0,m=f.length;i!==void 0&&c<m;c++){let E=f[c];if(Array.isArray(E))for(r=0,w=E.length;i!==void 0&&r<w;r++){let M=E[r];i=i[M]}else if(i.length===0){if(i=i[Number(E.slice(1))],E[0]!=="=")return}else if(E.includes("=")){let[M,...L]=E.split("=");i=Xo(i,M,L.join("="))}else r=parseInt(E,10),i=i[r]}return i}function Fo(n,o,f){let i=n;if(o==="")throw Error("setByPath cannot be used to set the root object");let c=Ho(o);while(i!=null&&c.length>0){let m=c.shift();if(typeof m==="string"){let r=m.indexOf("=");if(r>-1){if(r===0)To(i);else xo(i);let w=m.slice(0,r),E=m.slice(r+1);if(i=Xo(i,w,E,c.length>0?so:f),c.length===0)return!0}else{xo(i);let w=parseInt(m,10);if(c.length>0)i=i[w];else{if(f!==An){if(i[w]===f)return!1;i[w]=f}else i.splice(w,1);return!0}}}else if(Array.isArray(m)&&m.length>0){To(i);while(m.length>0){let r=m.shift();if(m.length>0||c.length>0)i=mf(i,r,m.length>0?{}:[]);else{if(f!==An){if(i[r]===f)return!1;i[r]=f}else{if(!Object.prototype.hasOwnProperty.call(i,r))return!1;delete i[r]}return!0}}}else throw Error(`setByPath failed, bad path ${o}`)}throw Error(`setByPath(${n}, ${o}, ${f}) failed`)}var Do=Symbol("observer should be removed"),wn=[],Mn=[],jn=!1,un,Kn;function Yo(n,o,f,i){let c=Lo(n);if(c===void 0)return[];let m=[];for(let r of c){let w=q(f,r);if(w!==void 0)m.push(`${n}[${r}=${w}]${i}`)}return m}class $o{description;test;callback;constructor(n,o){let f=typeof o==="string"?`"${o}"`:`function ${o.name}`,i;if(typeof n==="string")this.test=(c)=>typeof c==="string"&&c!==""&&(n.startsWith(c)||c.startsWith(n)),i=`test = "${n}"`;else if(n instanceof RegExp)this.test=n.test.bind(n),i=`test = "${n.toString()}"`;else if(n instanceof Function)this.test=n,i=`test = function ${n.name}`;else throw Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${i}, ${f}`,typeof o==="function")this.callback=o;else throw Error("expect callback to be a path or function");wn.push(this)}}var Jo=async()=>{if(un===void 0)return;await un},Ef=()=>{if(b.perf)console.time("xin async update");let n=Array.from(Mn);Mn.length=0,jn=!1;for(let o of n)wn.filter((f)=>{let i;try{i=f.test(o)}catch(c){throw Error(`Listener ${f.description} threw "${c}" at "${o}"`)}if(i===Do)return R(f),!1;return i}).forEach((f)=>{let i;try{i=f.callback(o)}catch(c){console.error(`Listener ${f.description} threw "${c}" handling "${o}"`)}if(i===Do)R(f)});if(typeof Kn==="function")Kn();if(b.perf)console.timeEnd("xin async update")},P=(n)=>{let o=typeof n==="string"?n:D(n);if(o===void 0)throw console.error("touch was called on an invalid target",n),Error("touch was called on an invalid target");if(jn===!1)un=new Promise((f)=>{Kn=f}),jn=setTimeout(Ef);if(Mn.find((f)=>o.startsWith(f))==null)Mn.push(o)},S=(n,o)=>{return new $o(n,o)},R=(n)=>{let o=wn.indexOf(n);if(o>-1)wn.splice(o,1);else throw Error("unobserve failed, listener not found")};var a={},Rn=null,Zo=(n)=>{Rn=n},yn=()=>{if(Rn===null)throw Error("xin proxy not initialized");return Rn},Sn=null,Bn=null,Go=(n,o)=>{Sn=n,Bn=o},nn=()=>{if(Sn===null)throw Error("bind not initialized");return Sn},on=()=>{if(Bn===null)throw Error("on not initialized");return Bn};var In=(n,o)=>{let f=new Event(o);n.dispatchEvent(f)},ko=(n)=>{if(n instanceof HTMLInputElement)return n.type;else if(n instanceof HTMLSelectElement&&n.hasAttribute("multiple"))return"multi-select";else return"other"},Wo=(n,o)=>{switch(ko(n)){case"radio":n.checked=n.value===o;break;case"checkbox":n.checked=!!o;break;case"date":n.valueAsDate=new Date(o);break;case"multi-select":for(let f of Array.from(n.querySelectorAll("option")))f.selected=o[f.value];break;default:n.value=o}},zo=(n)=>{switch(ko(n)){case"radio":{let o=n.parentElement?.querySelector(`[name="${n.name}"]:checked`);return o!=null?o.value:null}case"checkbox":return n.checked;case"date":return n.valueAsDate?.toISOString();case"multi-select":return Array.from(n.querySelectorAll("option")).reduce((o,f)=>{return o[f.value]=f.selected,o},{});default:return n.value}},{ResizeObserver:Qo}=globalThis,fn=Qo!=null?new Qo((n)=>{for(let o of n){let f=o.target;In(f,"resize")}}):{observe(){},unobserve(){}},Vn=(n,o,f=!0)=>{if(n!=null&&o!=null)if(typeof o==="string")n.textContent=o;else if(Array.isArray(o))o.forEach((i)=>{n.append(i instanceof Node&&f?e(i):i)});else if(o instanceof Node)n.append(f?e(o):o);else throw Error("expect text content or document node")};var en=(n,o=250)=>{let f;return(...i)=>{if(f!==void 0)clearTimeout(f);f=setTimeout(()=>{n(...i)},o)}},Ln=(n,o=250)=>{let f,i=Date.now()-o,c=!1;return(...m)=>{if(clearTimeout(f),f=setTimeout(()=>{n(...m),i=Date.now()},o),!c&&Date.now()-i>=o){c=!0;try{n(...m),i=Date.now()}finally{c=!1}}}};var xn={value:{toDOM:Wo,fromDOM(n){return zo(n)}},text:{toDOM(n,o){n.textContent=o}},enabled:{toDOM(n,o){n.disabled=!o}},disabled:{toDOM(n,o){n.disabled=Boolean(o)}},list:{toDOM(n,o,f){Tn(n,o,f).update(o)}}};function $(n){return n.replace(/[A-Z]/g,(o)=>{return`-${o.toLocaleLowerCase()}`})}function bn(n){return n.replace(/-([a-z])/g,(o,f)=>{return f.toLocaleUpperCase()})}var rf=180/Math.PI,wf=Math.PI/180;function G(n,o,f){return f<n?NaN:o<n?n:o>f?f:o}function A(n,o,f,i=!0){if(i)f=G(0,f,1);return f*(o-n)+n}var Mf={RADIANS_TO_DEGREES:rf,DEGREES_TO_RADIANS:wf,clamp:G,lerp:A};function Pn(n,o=document.body){let f=getComputedStyle(o);if(n.endsWith(")")&&n.startsWith("var("))n=n.slice(4,-1);return f.getPropertyValue(n).trim()}var yf=(n,o,f)=>{return(0.299*n+0.587*o+0.114*f)/255},_=(n)=>("00"+Math.round(Number(n)).toString(16)).slice(-2);class Oo{h;s;l;constructor(n,o,f){n/=255,o/=255,f/=255;let i=Math.max(n,o,f),c=i-Math.min(n,o,f),m=c!==0?i===n?(o-f)/c:i===o?2+(f-n)/c:4+(n-o)/c:0;this.h=60*m<0?60*m+360:60*m,this.s=c!==0?i<=0.5?c/(2*i-c):c/(2-(2*i-c)):0,this.l=(2*i-c)/2}}var N=globalThis.document!==void 0?globalThis.document.createElement("span"):void 0;class y{r;g;b;a;static fromVar(n,o=document.body){return y.fromCss(Pn(n,o))}static fromCss(n){let o=n.match(/^#([0-9a-fA-F]+)$/);if(o){let E=o[1];if(E.length===3)return new y(parseInt(E[0]+E[0],16),parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16));if(E.length===4)return new y(parseInt(E[0]+E[0],16),parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16)/255);if(E.length===6)return new y(parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16));if(E.length===8)return new y(parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16),parseInt(E.slice(6,8),16)/255)}let f=n;if(N instanceof HTMLSpanElement)N.style.color="black",N.style.color=n,document.body.appendChild(N),f=getComputedStyle(N).color,N.remove();let[i,c,m,r]=f.match(/[\d.]+/g)||["0","0","0","0"],w=f.startsWith("color(srgb")?255:1;return new y(Number(i)*w,Number(c)*w,Number(m)*w,r==null?1:Number(r))}static fromHsl(n,o,f,i=1){let c,m,r;if(o===0)c=m=r=f;else{let E=(F,Y,s)=>{if(s<0)s+=1;if(s>1)s-=1;if(s<0.16666666666666666)return F+(Y-F)*6*s;if(s<0.5)return Y;if(s<0.6666666666666666)return F+(Y-F)*(0.6666666666666666-s)*6;return F},M=f<0.5?f*(1+o):f+o-f*o,L=2*f-M,T=(n%360+360)%360/360;c=E(L,M,T+0.3333333333333333),m=E(L,M,T),r=E(L,M,T-0.3333333333333333)}let w=new y(c*255,m*255,r*255,i);return w.hslCached={h:(n%360+360)%360,s:o,l:f},w}static black=new y(0,0,0);static white=new y(255,255,255);constructor(n,o,f,i=1){this.r=G(0,n,255),this.g=G(0,o,255),this.b=G(0,f,255),this.a=G(0,i,1)}get inverse(){return new y(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:n,s:o,l:f}=this._hsl;return y.fromHsl(n,o,1-f,this.a)}get opaque(){return this.a===1?this:new y(this.r,this.g,this.b,1)}contrasting(n=1){return this.opaque.blend(this.brightness>0.5?y.black:y.white,n)}get rgb(){let{r:n,g:o,b:f}=this;return`rgb(${n.toFixed(0)},${o.toFixed(0)},${f.toFixed(0)})`}get rgba(){let{r:n,g:o,b:f,a:i}=this;return`rgba(${n.toFixed(0)},${o.toFixed(0)},${f.toFixed(0)},${i.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}hslCached;get _hsl(){if(this.hslCached==null)this.hslCached=new Oo(this.r,this.g,this.b);return this.hslCached}get hsl(){let{h:n,s:o,l:f}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(o*100).toFixed(0)}% ${(f*100).toFixed(0)}%)`}get hsla(){let{h:n,s:o,l:f}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(o*100).toFixed(0)}% ${(f*100).toFixed(0)}% / ${(this.a*100).toFixed(0)}%)`}get mono(){let n=this.brightness*255;return new y(n,n,n)}get brightness(){return yf(this.r,this.g,this.b)}get html(){return this.toString()}toString(){return this.a===1?"#"+_(this.r)+_(this.g)+_(this.b):"#"+_(this.r)+_(this.g)+_(this.b)+_(Math.floor(255*this.a))}brighten(n){let{h:o,s:f,l:i}=this._hsl,c=G(0,i+n*(1-i),1);return y.fromHsl(o,f,c,this.a)}darken(n){let{h:o,s:f,l:i}=this._hsl,c=G(0,i*(1-n),1);return y.fromHsl(o,f,c,this.a)}saturate(n){let{h:o,s:f,l:i}=this._hsl,c=G(0,f+n*(1-f),1);return y.fromHsl(o,c,i,this.a)}desaturate(n){let{h:o,s:f,l:i}=this._hsl,c=G(0,f*(1-n),1);return y.fromHsl(o,c,i,this.a)}rotate(n){let{h:o,s:f,l:i}=this._hsl,c=(o+360+n)%360;return y.fromHsl(c,f,i,this.a)}opacity(n){let{h:o,s:f,l:i}=this._hsl;return y.fromHsl(o,f,i,n)}swatch(){return console.log(`%c      %c ${this.html}, ${this.rgba}`,`background-color: ${this.html}`,"background-color: transparent"),this}blend(n,o){return new y(A(this.r,n.r,o),A(this.g,n.g,o),A(this.b,n.b,o),A(this.a,n.a,o))}static blendHue(n,o,f){let i=(o-n+720)%360;if(i<180)return n+f*i;else return n-(360-i)*f}mix(n,o){let f=this._hsl,i=n._hsl;return y.fromHsl(f.s===0?i.h:i.s===0?f.h:y.blendHue(f.h,i.h,o),A(f.s,i.s,o),A(f.l,i.l,o),A(this.a,n.a,o))}colorMix(n,o){return y.fromCss(`color-mix(in hsl, ${this.html}, ${n.html} ${(o*100).toFixed(0)}%)`)}static computedColorStylesheet=null;static computedColors=new Map;static recomputeQueued=!1;static registerComputedColor(n,o,f,i){if(!y.computedColors.has(n))y.computedColors.set(n,{varName:o,scale:f,method:i}),y.queueRecompute()}static queueRecompute(){if(y.recomputeQueued)return;y.recomputeQueued=!0,queueMicrotask(()=>{y.recomputeQueued=!1,y.recomputeColors()})}static recomputeColors(){if(y.computedColors.size===0)return;let n=[];for(let[f,{varName:i,scale:c,method:m}]of y.computedColors)try{let r=y.fromVar(i),w;switch(m){case"b":w=c>0?r.brighten(c):r.darken(-c);break;case"s":w=c>0?r.saturate(c):r.desaturate(-c);break;case"h":w=r.rotate(c*100);break;case"o":w=r.opacity(c);break;default:continue}n.push(`  ${f}: ${w.rgba};`)}catch(r){}if(n.length===0)return;let o=`:root {
${n.join(`
`)}
}`;if(y.computedColorStylesheet===null)y.computedColorStylesheet=document.createElement("style"),y.computedColorStylesheet.id="tosijs-computed-colors",document.head.append(y.computedColorStylesheet);y.computedColorStylesheet.textContent=o}}var sn=new Set,Uo=!1;function Lf(){if(!Uo)Uo=!0,sn.add(()=>y.queueRecompute())}function xf(n){return sn.add(n),()=>sn.delete(n)}function Tf(){Lf();for(let n of sn)n()}function sf(n,o){let f=C(o),i=x.style(h(f));i.id=n,document.head.append(i);let c=D(o);if(c!==void 0)cn(c,()=>{i.textContent=h(C(o)),Tf()})}var Hf=/^(animation-iteration-count|column-count|flex(-grow|-shrink)?|font-weight|line-height|opacity|order|orphans|scale|tab-size|widows|z-index|zoom)$/,_n=(n,o)=>{if(typeof o==="number"&&!Hf.test(n))o=`${o}px`;if(n.startsWith("_"))if(n.startsWith("__"))n="--"+n.substring(2),o=`var(${n}-default, ${o})`;else n="--"+n.substring(1);return{prop:n,value:String(o)}},Cf=(n,o,f)=>{if(f===void 0)return"";if(f instanceof y)f=f.html;let i=_n(o,f);return`${n}  ${i.prop}: ${i.value};`},qo=(n,o,f="")=>{let i=$(n);if(typeof o==="object"&&!(o instanceof y)){let c=Object.keys(o).map((m)=>qo(m,o[m],`${f}  `)).join(`
`);return`${f}  ${n} {
${c}
${f}  }`}else return Cf(f,i,o)},h=(n,o="")=>{return Object.keys(n).map((i)=>{let c=n[i];if(typeof c==="string"){if(i==="@import")return`@import url('${c}');`;throw Error("top-level string value only allowed for `@import`")}let m=Object.keys(c).map((r)=>qo(r,c[r])).join(`
`);return`${o}${i} {
${m}
}`}).join(`

`)},Xf=(n)=>{K("initVars","initVars is deprecated. Just use _ and __ prefixes instead.");let o={};for(let f of Object.keys(n)){let i=n[f],c=$(f);o[`--${c}`]=typeof i==="number"&&i!==0?String(i)+"px":i}return o},Ff=(n)=>{let o={};for(let f of Object.keys(n)){let i=n[f];if(i instanceof y)o[f]=i.inverseLuminance;else if(typeof i==="string"&&i.match(/^(#[0-9a-fA-F]{3}|rgba?\(|hsla?\()/))o[f]=y.fromCss(i).inverseLuminance}return o},Hn=new Proxy({},{get(n,o){if(n[o]===void 0){let f="--"+$(o);n[o]=(i)=>`var(${f}, ${i})`}return n[o]}}),hn=new Proxy({},{get(n,o){if(o==="default")return Hn;if(n[o]==null){o=$(o);let[,f,,i,c,m]=o.match(/^([-\w]*?)((_)?(\d+)(\w?))?$/)||["",o],r=`--${f}`;if(c!=null){let w=i==null?Number(c)/100:-Number(c)/100;switch(m){case"b":case"s":case"h":case"o":{let E=`--${o}`;y.registerComputedColor(E,r,w,m),n[o]=`var(${E})`}break;case"":n[o]=`calc(var(${r}) * ${w})`;break;default:throw console.error(m),Error(`Unrecognized method ${m} for css variable ${r}`)}}else n[o]=`var(${r})`}return n[o]}});function Ao(){let n=(o)=>typeof matchMedia<"u"&&matchMedia(o).matches;return{colorScheme:n("(prefers-color-scheme: dark)")?"dark":"light",contrast:n("(prefers-contrast: more)")?"more":n("(prefers-contrast: less)")?"less":n("(prefers-contrast: custom)")?"custom":"no-preference",reducedMotion:n("(prefers-reduced-motion: reduce)"),reducedTransparency:n("(prefers-reduced-transparency: reduce)"),forcedColors:n("(forced-colors: active)")}}function Df(n){if(typeof matchMedia>"u")return()=>{};let o=["(prefers-color-scheme: dark)","(prefers-contrast: more)","(prefers-contrast: less)","(prefers-contrast: custom)","(prefers-reduced-motion: reduce)","(prefers-reduced-transparency: reduce)","(forced-colors: active)"],f=()=>n(Ao()),i=o.map((c)=>matchMedia(c));for(let c of i)c.addEventListener("change",f);return()=>{for(let c of i)c.removeEventListener("change",f)}}var jo="http://www.w3.org/1998/Math/MathML",uo="http://www.w3.org/2000/svg";var Cn={},Ko=(n,o,f)=>{let i=_n($(o),f);if(i.prop.startsWith("--"))n.style.setProperty(i.prop,i.value);else n.style[o]=i.value},Yf=(n)=>{return{toDOM(o,f){Ko(o,n,f)}}},Ro=(n,o,f)=>{if(o==="style")if(typeof f==="object")for(let i of Object.keys(f))if(D(f[i]))k(n,f[i],Yf(i));else Ko(n,i,f[i]);else n.setAttribute("style",f);else{let i=$(o),c=n.constructor.observedAttributes;if(c?.includes(o)||c?.includes(i))if(typeof f==="boolean")f?n.setAttribute(i,""):n.removeAttribute(i);else n.setAttribute(i,f);else if(n[o]!==void 0){let{MathMLElement:r}=globalThis;if(n instanceof SVGElement||r!==void 0&&n instanceof r)n.setAttribute(o,f);else n[o]=f}else if(i==="class")f.split(" ").forEach((r)=>{n.classList.add(r)});else if(n[i]!==void 0)n[i]=f;else if(typeof f==="boolean")f?n.setAttribute(i,""):n.removeAttribute(i);else n.setAttribute(i,f)}},$f=(n)=>{return{toDOM(o,f){Ro(o,n,f)}}},Jf=(n,o,f)=>{if(o==="apply")f(n);else if(o.match(/^on[A-Z]/)!=null){let i=o.substring(2).toLowerCase();g(n,i,f)}else if(o==="bind")if((typeof f.binding==="string"?xn[f.binding]:f.binding)!==void 0&&f.value!==void 0)k(n,f.value,f.binding instanceof Function?{toDOM:f.binding}:f.binding);else throw Error("bad binding");else if(o.match(/^bind[A-Z]/)!=null){let i=o.substring(4,5).toLowerCase()+o.substring(5),c=xn[i];if(c!==void 0)k(n,f,c);else throw Error(`${o} is not allowed, bindings.${i} is not defined`)}else if(D(f))k(n,f,$f(o));else Ro(n,o,f)},pn=(n,...o)=>{if(Cn[n]===void 0){let[c,m]=n.split("|");if(m===void 0)Cn[n]=globalThis.document.createElement(c);else Cn[n]=globalThis.document.createElementNS(m,c)}let f=Cn[n].cloneNode(),i={};for(let c of o)if(c instanceof Element||c instanceof DocumentFragment||typeof c==="string"||typeof c==="number")if(f instanceof HTMLTemplateElement)f.content.append(c);else f.append(c);else if(D(c))f.append(x.span({bindText:c}));else Object.assign(i,c);for(let c of Object.keys(i)){let m=i[c];Jf(f,c,m)}return f},Nn=(...n)=>{let o=globalThis.document.createDocumentFragment();for(let f of n)o.append(f);return o},x=new Proxy({fragment:Nn},{get(n,o){if(o=o.replace(/[A-Z]/g,(f)=>`-${f.toLocaleLowerCase()}`),n[o]===void 0)n[o]=(...f)=>pn(o,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}}),gn=new Proxy({fragment:Nn},{get(n,o){if(n[o]===void 0)n[o]=(...f)=>pn(`${o}|${uo}`,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}}),tn=new Proxy({fragment:Nn},{get(n,o){if(n[o]===void 0)n[o]=(...f)=>pn(`${o}|${jo}`,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}});var Zf=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],df=!0,Gf=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,Qf=(n)=>Gf.test(n),B=(n="",o="")=>{if(n==="")return o;else if(o.match(/^\d+$/)!==null||o.includes("="))return`${n}[${o}]`;else return`${n}.${o}`},Io={};function ln(n,o){if(n!==null&&(typeof n==="object"||typeof n==="function"))return n;return new Proxy(Io,I(o,!0))}var Xn=()=>new Proxy({},I("^",!0)),So=!1;function p(){if(!So)console.warn("xinValue, tosiValue, xinPath, tosiPath, etc. are deprecated. Use value, path, observe, bind, on, binding, listBinding instead."),So=!0}var Bo=(n)=>{return n===Io},I=(n,o)=>({get(f,i){if(Bo(f)){let w=()=>q(a,n);switch(i){case"path":return n;case"value":return w();case"valueOf":case"toJSON":return()=>w();case Symbol.toPrimitive:return(E)=>{let M=w();if(E==="number")return Number(M);if(E==="string")return String(M);return M};case"toString":return()=>String(w());case"observe":return(E)=>{let M=S(n,E);return()=>R(M)};case"on":return(E,M)=>on()(E,M,w());case"bind":return(E,M,L)=>{nn()(E,n,M,L)};case"binding":return(E)=>({bind:{value:n,binding:E}});case"listBinding":return(E=({span:L})=>L({bindText:"^"}),M={})=>[{bindList:{value:n,...M}},x.template(E(x,Xn()))];case O:case"xinValue":case"tosiValue":return p(),w();case J:case"xinPath":case"tosiPath":return p(),n;case kn:case"tosiObserve":return p(),(E)=>{let M=S(n,E);return()=>R(M)};case zn:case"tosiOn":return p(),(E,M)=>on()(E,M,w());case Wn:case"tosiBind":return p(),(E,M,L)=>{nn()(E,n,M,L)};case"tosiBinding":return p(),(E)=>({bind:{value:n,binding:E}});case"tosiListBinding":return p(),(E=({span:L})=>L({bindText:"^"}),M={})=>[{bindList:{value:n,...M}},x.template(E(x,Xn()))]}if(typeof i==="string"&&/^\d+$/.test(i)){let E=w();if(typeof E==="string")return E[parseInt(i,10)]}if(i==="length"){let E=w();if(typeof E==="string")return E.length}return}if(o&&!(i in f))switch(i){case"path":return n;case"value":return f.valueOf?f.valueOf():f;case"valueOf":case"toJSON":return()=>f.valueOf?f.valueOf():f;case"observe":return(w)=>{let E=S(n,w);return()=>R(E)};case"on":return(w,E)=>on()(w,E,C(f));case"bind":return(w,E,M)=>{nn()(w,n,E,M)};case"binding":return(w)=>({bind:{value:n,binding:w}});case"listBinding":return(w=({span:M})=>M({bindText:"^"}),E={})=>[{bindList:{value:n,...E}},x.template(w(x,Xn()))]}switch(i){case J:case"xinPath":case"tosiPath":return n;case O:case"xinValue":case"tosiValue":return f.valueOf?f.valueOf():f;case kn:case"xinObserve":case"tosiObserve":return(w)=>{let E=S(n,w);return()=>R(E)};case zn:case"xinOn":case"tosiOn":return(w,E)=>on()(w,E,C(f));case Wn:case"xinBind":case"tosiBind":return(w,E,M)=>{nn()(w,n,E,M)};case"tosiBinding":return(w)=>({bind:{value:n,binding:w}});case"tosiListBinding":return(w=({span:M})=>M({bindText:"^"}),E={})=>[{bindList:{value:n,...E}},x.template(w(x,Xn()))]}if(typeof i==="symbol")return f[i];let c=Object.getOwnPropertyDescriptor(f,i);if(c&&!c.configurable&&!c.writable&&"value"in c)return c.value;let m=i,r=m.match(/^([^.[]+)\.(.+)$/)??m.match(/^([^\]]+)(\[.+)/)??m.match(/^(\[[^\]]+\])\.(.+)$/)??m.match(/^(\[[^\]]+\])\[(.+)$/);if(r!==null){let[,w,E]=r,M=B(n,w),L=q(f,w);return L!==null&&typeof L==="object"?new Proxy(L,I(M,o))[E]:L}if(m.startsWith("[")&&m.endsWith("]"))m=m.substring(1,m.length-1);if(!Array.isArray(f)&&f[m]!==void 0||Array.isArray(f)&&m.includes("=")){let w;if(m.includes("=")){let[E,M]=m.split("=");w=f.find((L)=>`${q(L,E)}`===M)}else w=f[m];if(w instanceof Object){let E=B(n,m);return new Proxy(w instanceof Function?w.bind(f):w,I(E,o))}else return o?ln(w,B(n,m)):w}else if(Array.isArray(f)){let w=f[m];return typeof w==="function"?(...E)=>{let M=E.map((T)=>C(T)),L=w.apply(f,M);if(Zf.includes(m))P(n);if(L!=null&&typeof L==="object"){if(m==="find"||m==="findLast"||m==="at"){let T=f.indexOf(L);if(T!==-1)return new Proxy(L,I(B(n,String(T)),o))}}return L}:typeof w==="object"?new Proxy(w,I(B(n,m),o)):o?ln(w,B(n,m)):w}else return o?ln(f[m],B(n,m)):f[m]},set(f,i,c){c=C(c);let m=i===O||i==="xinValue"||i==="tosiValue"||i==="value"&&(Bo(f)||o),r=m?n:B(n,i);if(df&&!Qf(r))throw Error(`setting invalid path ${r}`);if(C(X[r])!==c&&Fo(a,r,c)){P(r);let E=n.match(/^(.+)\[(\d+)\]$/);if(E!==null){let[,M,L]=E,T=parseInt(L,10),F=m?"":`.${i}`,Y=Yo(M,T,f,F);for(let s of Y)P(s)}}return!0}}),cn=(n,o)=>{let f=typeof o==="function"?o:X[o];if(typeof f!=="function")throw Error(`observe expects a function or path to a function, ${o} is neither`);return S(n,f)},X=new Proxy(a,I("",!1));Zo(X);var t=new Proxy(a,I("",!0));var kf=16,Wf=100;function Vo(n,o){let f=Array.from(n.querySelectorAll(u));if(n.matches(u))f.unshift(n);for(let i of f){let c=z.get(i);for(let m of c){if(m.path.startsWith("^"))m.path=`${o}${m.path.substring(1)}`;if(m.binding.toDOM!=null)m.binding.toDOM(i,X[m.path])}}}class eo{boundElement;listTop;listBottom;template;options;itemToElement;array=[];_update;_previousSlice;static filterBoundObservers=new WeakMap;constructor(n,o,f={}){if(this.boundElement=n,this.itemToElement=new WeakMap,f.idPath!=null){let i=D(o);if(i!=null)yo(i,f.idPath)}if(n.children.length!==1)throw Error("ListBinding expects an element with exactly one child element");if(n.children[0]instanceof HTMLTemplateElement){let i=n.children[0];if(i.content.children.length!==1)throw Error("ListBinding expects a template with exactly one child element");this.template=e(i.content.children[0])}else this.template=n.children[0],this.template.remove();if(this.options=f,this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.listTop.classList.add("virtual-list-padding"),this.listBottom.classList.add("virtual-list-padding"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),f.virtual!=null)if(fn.observe(this.boundElement),this._update=Ln(()=>{this.update(this.array,!0)},kf),this.boundElement.addEventListener("resize",this._update),f.virtual.scrollContainer==="window")window.addEventListener("scroll",this._update),window.addEventListener("resize",this._update);else this.boundElement.addEventListener("scroll",this._update)}visibleSlice(){let{virtual:n,hiddenProp:o,visibleProp:f}=this.options,i=this.array;if(o!==void 0)i=i.filter((E)=>E[o]!==!0);if(f!==void 0)i=i.filter((E)=>E[f]===!0);if(this.options.filter&&this.needle!==void 0)i=this.options.filter(i,this.needle);let c=0,m=i.length-1,r=0,w=0;if(n!=null&&this.boundElement instanceof HTMLElement){let E=this.boundElement.offsetWidth,M=n.scrollContainer==="window",L,T;if(M){L=window.innerHeight;let H=this.boundElement.getBoundingClientRect();T=Math.max(0,-H.top)}else L=this.boundElement.offsetHeight,T=this.boundElement.scrollTop;let F=n.width!=null?Math.max(1,Math.floor(E/n.width)):n.visibleColumns??1,Y=Math.ceil(L/n.height)+(n.rowChunkSize||1),s=Math.ceil(i.length/F),l=F*Y,Z=Math.floor(T/n.height);if(Z>s-Y+1)Z=Math.max(0,s-Y+1);if(n.rowChunkSize)Z-=Z%n.rowChunkSize;c=Z*F,m=c+l-1,r=Z*n.height,w=Math.max((s-Y)*n.height-r,0)}return{items:i,firstItem:c,lastItem:m,topBuffer:r,bottomBuffer:w}}needle;filter=Ln((n)=>{if(this.needle!==n)this.needle=n,this.update(this.array)},Wf);update(n,o){if(n==null)n=[];this.array=n;let{hiddenProp:f,visibleProp:i}=this.options,c=D(n),m=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",m.items.length===0);let r=this._previousSlice,{firstItem:w,lastItem:E,topBuffer:M,bottomBuffer:L}=m;if(f===void 0&&i===void 0&&o===!0&&r!=null&&w===r.firstItem&&E===r.lastItem&&M===r.topBuffer&&L===r.bottomBuffer)return;this._previousSlice=m;let T=0,F=0,Y=0;for(let H of Array.from(this.boundElement.children)){if(H===this.listTop||H===this.listBottom)continue;let Q=H[rn];if(Q==null)H.remove();else{let d=m.items.indexOf(Q);if(d<w||d>E)H.remove(),this.itemToElement.delete(Q),T++}}this.listTop.style.height=String(M)+"px",this.listBottom.style.height=String(L)+"px";let s=[],{idPath:l}=this.options;for(let H=w;H<=E;H++){let Q=m.items[H];if(Q===void 0)continue;let d=this.itemToElement.get(C(Q));if(d==null){if(Y++,d=e(this.template),typeof Q==="object")this.itemToElement.set(C(Q),d),d[rn]=C(Q);if(this.boundElement.insertBefore(d,this.listBottom),l!=null){let Jn=Q[l],po=`${c}[${l}=${Jn}]`;Vo(d,po)}else{let Jn=`${c}[${H}]`;Vo(d,Jn)}}s.push(d)}let Z=null;for(let H of s){if(H.previousElementSibling!==Z)if(F++,Z?.nextElementSibling!=null)this.boundElement.insertBefore(H,Z.nextElementSibling);else this.boundElement.insertBefore(H,this.listBottom);Z=H}if(b.perf)console.log(c,"updated",{removed:T,created:Y,moved:F})}}var Tn=(n,o,f)=>{let i=n[v];if(o&&i===void 0)i=new eo(n,o,f),n[v]=i;return i},vn=(n)=>{let o;while(!(o=n[rn])&&n&&n.parentElement)n=n.parentElement;return o?{element:n,item:o}:void 0},an=(n)=>{let o=vn(n);return o?o.item:void 0},zf=(n)=>{let o=vn(n);if(!o)return console.error("deleteListItem failed, element is not part of a list instance",n),!1;let f=Tn(o.element.parentElement);if(!f.options.idPath)return console.error("deleteListItem failed, list binding has no idPath",n.parentElement,f),!1;let i=f.array.indexOf(o.item);if(i>-1)return f.array.splice(i,1),!0;return!1};var{document:mn,MutationObserver:bo}=globalThis,no=(n,o)=>{let f=z.get(n);if(f==null)return;for(let i of f){let{binding:c,options:m}=i,{path:r}=i,{toDOM:w}=c;if(w!=null){if(r.startsWith("^")){let E=an(n);if(E!=null&&E[J]!=null)r=i.path=`${E[J]}${r.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${r}`,n,"is not part of a list"),Error(`Cannot resolve relative binding ${r}`)}if(o==null||r.startsWith(o))w(n,yn()[r],m)}}};if(bo!=null)new bo((o)=>{o.forEach((f)=>{Array.from(f.addedNodes).forEach((i)=>{if(i instanceof Element)Array.from(i.querySelectorAll(u)).forEach((c)=>no(c))})})}).observe(mn.body,{subtree:!0,childList:!0});S(()=>!0,(n)=>{let o=Array.from(mn.querySelectorAll(u));for(let f of o)no(f,n)});var Po=(n)=>{let o=n.target?.closest(u);while(o!=null){let f=z.get(o);for(let i of f){let{binding:c,path:m}=i,{fromDOM:r}=c;if(r!=null){let w;try{w=r(o,i.options)}catch(E){throw console.error("Cannot get value from",o,"via",i),Error("Cannot obtain value fromDOM")}if(w!=null){let E=yn(),M=E[m];if(M==null)E[m]=w;else{let L=M[J]!=null?M[O]:M,T=w[J]!=null?w[O]:w;if(L!==T)E[m]=T}}}}o=o.parentElement.closest(u)}};if(globalThis.document!=null)mn.body.addEventListener("change",Po,!0),mn.body.addEventListener("input",Po,!0);function k(n,o,f,i){if(n instanceof DocumentFragment)throw Error("bind cannot bind to a DocumentFragment");let c;if(typeof o==="object"&&o[J]===void 0&&i===void 0){let{value:w}=o;c=typeof w==="string"?w:w[J],i=o,delete i.value}else c=typeof o==="string"?o:o[J];if(c==null)throw Error("bind requires a path or object with xin Proxy");let{toDOM:m}=f;n.classList?.add(dn);let r=z.get(n);if(r==null)r=[],z.set(n,r);if(r.push({path:c,binding:f,options:i}),m!=null&&!c.startsWith("^"))P(c);if(i?.filter&&i?.needle)k(n,i.needle,{toDOM(w,E){console.log({needle:E}),w[v]?.filter(E)}});return n}var _o=new Set,Of=(n)=>{let o=n?.target?.closest(Qn),f=!1,i=new Proxy(n,{get(m,r){if(r==="stopPropagation")return()=>{n.stopPropagation(),f=!0};else{let w=m[r];return typeof w==="function"?w.bind(m):w}}}),c=new Set;while(!f&&o!=null){let r=V.get(o)[n.type]||c;for(let w of r){if(typeof w==="function")w(i);else{let E=yn()[w];if(typeof E==="function")E(i);else throw Error(`no event handler found at path ${w}`)}if(f)continue}o=o.parentElement!=null?o.parentElement.closest(Qn):null}};function g(n,o,f){let i=V.get(n);if(n.classList.add(Gn),i==null)i={},V.set(n,i);if(!i[o])i[o]=new Set;if(i[o].add(f),!_o.has(o))_o.add(o),mn.body.addEventListener(o,Of,!0);return()=>{i[o].delete(f)}}Go(k,g);function oo(n,o){if(!n.internals)return;let f={},i="";if(n.hasAttribute("required")&&o==="")f.valueMissing=!0,i="Please fill out this field.";let c=n.getAttribute("minlength");if(c&&o.length<parseInt(c,10))f.tooShort=!0,i=`Please use at least ${c} characters.`;let m=n.getAttribute("maxlength");if(m&&o.length>parseInt(m,10))f.tooLong=!0,i=`Please use no more than ${m} characters.`;let r=n.getAttribute("pattern");if(r&&o!=="")try{if(!new RegExp(`^(?:${r})$`).test(o))f.patternMismatch=!0,i="Please match the requested format."}catch{}if(Object.keys(f).length>0)n.internals.setValidity(f,i,n);else n.internals.setValidity({})}var Uf=0;function fo(){return`custom-elt${(Uf++).toString(36)}`}var ho=0,io=null;function qf(){if(io===null)io=new MutationObserver((n)=>{let o=new Set;for(let f of n)if(f.type==="attributes"&&f.target instanceof j){let i=f.target,c=bn(f.attributeName);if(i._legacyTrackedAttrs?.has(c))o.add(i)}for(let f of o)f.queueRender(!1)});return io}var En={};function Af(n,o){let f=En[n],i=h(o).replace(/:host\(([^)]+)\)/g,`${n}$1`).replace(/:host\b/g,n);En[n]=f?f+`
`+i:i}function jf(n){if(En[n])document.head.append(x.style({id:n+"-component"},En[n]));delete En[n]}class j extends HTMLElement{static elements=x;static _elementCreator;static initAttributes;static formAssociated;internals;get validity(){return this.internals?.validity}get validationMessage(){return this.internals?.validationMessage??""}get willValidate(){return this.internals?.willValidate??!1}checkValidity(){return this.internals?.checkValidity()??!0}reportValidity(){return this.internals?.reportValidity()??!0}setCustomValidity(n){if(this.internals)if(n)this.internals.setValidity({customError:!0},n);else this.internals.setValidity({})}setValidity(n,o,f){this.internals?.setValidity(n,o,f)}setFormValue(n,o){this.internals?.setFormValue(n,o)}static get observedAttributes(){let n=this.initAttributes;if(n)return["hidden",...Object.keys(n).map($)];return["hidden"]}instanceId;styleNode;static styleSpec;static styleNode;content=x.slot();isSlotted;static _tagName=null;static get tagName(){return this._tagName}_legacyTrackedAttrs;_attrValues;_valueChanged=!1;static StyleNode(n){return console.warn("StyleNode is deprecated, just assign static styleSpec: XinStyleSheet to the class directly"),x.style(h(n))}static elementCreator(n={}){let o=this;if(o._elementCreator==null){let{tag:f,styleSpec:i}=n,c=n!=null?f:null;if(c==null)if(typeof o.name==="string"&&o.name!==""){if(c=$(o.name),c.startsWith("-"))c=c.slice(1)}else c=fo();if(customElements.get(c)!=null)console.warn(`${c} is already defined`);if(c.match(/\w+(-\w+)+/)==null)console.warn(`${c} is not a legal tag for a custom-element`),c=fo();while(customElements.get(c)!==void 0)c=fo();if(o._tagName=c,i!==void 0)Af(c,i);window.customElements.define(c,this,n),o._elementCreator=x[c]}return o._elementCreator}initAttributes(...n){if(K("initAttributes","initAttributes() is deprecated. Use static initAttributes = { ... } instead."),!this._legacyTrackedAttrs)this._legacyTrackedAttrs=new Set;for(let c of n)this._legacyTrackedAttrs.add(c);qf().observe(this,{attributes:!0});let f={},i={};n.forEach((c)=>{f[c]=W(this[c]);let m=$(c);Object.defineProperty(this,c,{enumerable:!1,get(){if(typeof f[c]==="boolean")return this.hasAttribute(m);else if(this.hasAttribute(m))return typeof f[c]==="number"?parseFloat(this.getAttribute(m)):this.getAttribute(m);else if(i[c]!==void 0)return i[c];else return f[c]},set(r){if(typeof f[c]==="boolean"){if(r!==this[c]){if(r)this.setAttribute(m,"");else this.removeAttribute(m);this.queueRender()}}else if(typeof f[c]==="number"){if(r!==parseFloat(this[c]))this.setAttribute(m,r),this.queueRender()}else if(typeof r==="object"||`${r}`!==`${this[c]}`){if(r===null||r===void 0||typeof r==="object")this.removeAttribute(m);else this.setAttribute(m,r);this.queueRender(),i[c]=r}}})})}initValue(){let n=Object.getOwnPropertyDescriptor(this,"value");if(n===void 0||n.get!==void 0||n.set!==void 0)return;let o=this.hasAttribute("value")?this.getAttribute("value"):W(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get(){return o},set(f){if(o!==f)o=f,this._valueChanged=!0,this.queueRender(!0)}})}_parts;get parts(){let n=this.shadowRoot!=null?this.shadowRoot:this;if(this._parts==null)this._parts=new Proxy({},{get(o,f){if(o[f]===void 0){let i=n.querySelector(`[part="${f}"]`);if(i==null)i=n.querySelector(f);if(i==null)throw Error(`elementRef "${f}" does not exist!`);i.removeAttribute("data-ref"),o[f]=i}return o[f]}});return this._parts}attributeChangedCallback(n,o,f){let i=bn(n);if(!this._legacyTrackedAttrs?.has(i))this.queueRender(!1)}constructor(){super();if(ho+=1,this.constructor.formAssociated&&typeof this.attachInternals==="function"&&!this.internals)this.internals=this.attachInternals();let n=this.constructor.initAttributes;if(n)this._setupAttributeAccessors(n);this.instanceId=`${this.tagName.toLocaleLowerCase()}-${ho}`,this._value=W(this.defaultValue)}_setupAttributeAccessors(n){if(!this._attrValues)this._attrValues=new Map;for(let o of Object.keys(n)){let f=$(o),i=n[o];if(o==="value"){console.warn(`${this.tagName}: 'value' cannot be an attribute. Use the Component value property instead.`);continue}if(typeof i==="object"&&i!==null){console.warn(`${this.tagName}: initAttributes.${o} is an object. Use a regular property instead.`);continue}let c=this,m=!1;while(c){let r=Object.getOwnPropertyDescriptor(c,o);if(r){if(!r.configurable||r.get||r.set){m=!0;break}break}c=Object.getPrototypeOf(c)}if(m)continue;Object.defineProperty(this,o,{enumerable:!1,get:()=>{if(typeof i==="boolean")return this.hasAttribute(f);else if(this.hasAttribute(f))return typeof i==="number"?parseFloat(this.getAttribute(f)):this.getAttribute(f);else if(this._attrValues.has(o))return this._attrValues.get(o);else return i},set:(r)=>{if(typeof i==="boolean"){if(r!==this[o]){if(r)this.setAttribute(f,"");else this.removeAttribute(f);this.queueRender()}}else if(typeof i==="number"){if(r!==parseFloat(this[o]))this.setAttribute(f,r),this.queueRender()}else if(typeof r==="object"||`${r}`!==`${this[o]}`){if(r===null||r===void 0||typeof r==="object")this.removeAttribute(f);else this.setAttribute(f,r);this.queueRender(),this._attrValues.set(o,r)}}})}}connectedCallback(){if(jf(this.constructor.tagName),this.hydrate(),this.role!=null)this.setAttribute("role",this.role);if(this.constructor.formAssociated&&!this.hasAttribute("tabindex"))this.setAttribute("tabindex","0");if(this.onResize!==void 0){if(fn.observe(this),this._onResize==null)this._onResize=this.onResize.bind(this);this.addEventListener("resize",this._onResize)}if(this.value!=null&&this.getAttribute("value")!=null)this._value=this.getAttribute("value");if(this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this.queueRender()}disconnectedCallback(){fn.unobserve(this)}formResetCallback(){if(this.value!==void 0)this.value=this.defaultValue??""}formDisabledCallback(n){if(n)this.setAttribute("disabled","");else this.removeAttribute("disabled")}formStateRestoreCallback(n){if(this.value!==void 0&&typeof n==="string")this.value=n}_changeQueued=!1;_renderQueued=!1;queueRender(n=!1){if(!this._hydrated)return;if(!this._changeQueued)this._changeQueued=n;if(!this._renderQueued)this._renderQueued=!0,requestAnimationFrame(()=>{if(this._changeQueued){if(In(this,"change"),this.internals&&this.value!==void 0)this.internals.setFormValue(this.value)}this._changeQueued=!1,this._renderQueued=!1,this.render()})}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();let n=typeof this.content!=="function",o=typeof this.content==="function"?this.content(x):this.content,{styleSpec:f}=this.constructor,{styleNode:i}=this.constructor;if(f)i=this.constructor.styleNode=x.style(h(f)),delete this.constructor.styleNode;if(this.styleNode)console.warn(this,"styleNode is deprecrated, use static styleNode or statc styleSpec instead"),i=this.styleNode;if(i){let c=this.attachShadow({mode:"open"});c.appendChild(i.cloneNode(!0)),Vn(c,o,n)}else if(o!==null){let c=Array.from(this.childNodes);Vn(this,o,n),this.isSlotted=this.querySelector("slot,xin-slot")!==void 0;let m=Array.from(this.querySelectorAll("slot"));if(m.length>0)m.forEach(co.replaceSlot);if(c.length>0){let r={"":this};Array.from(this.querySelectorAll("xin-slot")).forEach((w)=>{r[w.name]=w}),c.forEach((w)=>{let E=r[""],M=w instanceof Element?r[w.slot]:E;(M!==void 0?M:E).append(w)})}}this._hydrated=!0}}render(){if(this._valueChanged&&this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this._valueChanged=!1}validateValue(){if(!this.internals||this.value===void 0)return;let n=typeof this.value==="string"?this.value:String(this.value);oo(this,n)}}class co extends j{static initAttributes={name:""};content=null;static replaceSlot(n){let o=document.createElement("xin-slot");if(n.name!=="")o.setAttribute("name",n.name);n.replaceWith(o)}}var fc=co.elementCreator({tag:"xin-slot"});var uf=(n=()=>!0)=>{let o=localStorage.getItem("xin-state");if(o!=null){let i=JSON.parse(o);for(let c of Object.keys(i).filter(n))if(X[c]!==void 0)Object.assign(X[c],i[c]);else X[c]=i[c]}let f=en(()=>{let i={},c=C(X);for(let m of Object.keys(c).filter(n))i[m]=c[m];localStorage.setItem("xin-state",JSON.stringify(i)),console.log("xin state saved to localStorage")},500);cn(n,f)};var mo="1.3.4";function Fn(n){return Object.assign(t,n),t}function Dn(n){return K("boxedProxy","boxedProxy is deprecated, please use tosi() instead"),Fn(n)}function Eo(n,o=!1){if(o)return K("xinProxy-boxed","xinProxy(..., true) is deprecated; use tosi(...) instead"),Dn(n);return Object.keys(n).forEach((f)=>{X[f]=n[f]}),X}var Kf={};async function Yn(n,o){let{type:f,styleSpec:i}=await o(n,{Color:y,Component:j,elements:x,svgElements:gn,mathML:tn,varDefault:Hn,vars:hn,xin:X,boxed:t,xinProxy:Eo,boxedProxy:Dn,tosi:Fn,makeComponent:Yn,bind:k,on:g,version:mo}),c={type:f,creator:f.elementCreator({tag:n,styleSpec:i})};return Kf[n]=c,c}var ro={},Rf=(n)=>import(n);class $n extends j{static initAttributes={tag:"anon-elt",src:"",property:"default"};loaded;blueprintLoaded=(n)=>{};async packaged(){let{tag:n,src:o,property:f}=this,i=`${n}.${f}:${o}`;if(!this.loaded){if(ro[i]===void 0)ro[i]=Rf(o).then((c)=>{let m=c[f];return Yn(n,m)});else console.log(`using cached ${n} with signature ${i}`);this.loaded=await ro[i],this.blueprintLoaded(this.loaded)}return this.loaded}}var Sf=$n.elementCreator({tag:"xin-blueprint",styleSpec:{":host":{display:"none"}}});class wo extends j{allLoaded=()=>{};constructor(){super()}async load(){let o=Array.from(this.querySelectorAll($n.tagName)).filter((f)=>f.src).map((f)=>f.packaged());await Promise.all(o),this.allLoaded()}connectedCallback(){super.connectedCallback(),this.load()}}var Bf=wo.elementCreator({tag:"xin-loader",styleSpec:{":host":{display:"none"}}});export{to as xinValue,Eo as xinProxy,go as xinPath,X as xin,K as warnDeprecated,mo as version,hn as vars,Hn as varDefault,oo as validateAgainstConstraints,Jo as updates,R as unobserve,no as touchElement,P as touch,C as tosiValue,No as tosiSetValue,D as tosiPath,Fn as tosi,Ln as throttle,gn as svgElements,b as settings,Df as onThemePreferencesChange,xf as onStylesheetChange,g as on,cn as observe,tn as mathML,Yn as makeComponent,Ff as invertLuminance,Xf as initVars,uf as hotReload,Ao as getThemePreferences,an as getListItem,vn as getListInstance,Tn as getListBinding,Pn as getCssVar,x as elements,On as deprecated,zf as deleteListItem,en as debounce,h as css,Dn as boxedProxy,t as boxed,Bf as blueprintLoader,Sf as blueprint,xn as bindings,k as bind,sf as StyleSheet,Mf as MoreMath,j as Component,y as Color,wo as BlueprintLoader,$n as Blueprint};

//# debugId=D349E1D29765535264756E2164756E21
//# sourceMappingURL=module.js.map
