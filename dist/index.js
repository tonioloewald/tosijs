(()=>{var{defineProperty:Jo,getOwnPropertyNames:rn,getOwnPropertyDescriptor:sn}=Object,tn=Object.prototype.hasOwnProperty;var le=new WeakMap,cn=(o)=>{var e=le.get(o),n;if(e)return e;if(e=Jo({},"__esModule",{value:!0}),o&&typeof o==="object"||typeof o==="function")rn(o).map((r)=>!tn.call(e,r)&&Jo(e,r,{get:()=>o[r],enumerable:!(n=sn(o,r))||n.enumerable}));return le.set(o,e),e};var fn=(o,e)=>{for(var n in e)Jo(o,n,{get:e[n],enumerable:!0,configurable:!0,set:(r)=>e[n]=()=>r})};var qn={};fn(qn,{xinValue:()=>Ee,xinProxy:()=>Fo,xinPath:()=>Ce,xin:()=>w,warnDeprecated:()=>F,version:()=>Do,vars:()=>Mo,varDefault:()=>to,validateAgainstConstraints:()=>zo,updates:()=>Vo,unobserve:()=>J,touchElement:()=>$o,touch:()=>q,tosiValue:()=>p,tosiSetValue:()=>we,tosiPath:()=>x,tosi:()=>mo,throttle:()=>ro,svgElements:()=>Lo,settings:()=>Q,on:()=>B,observe:()=>Ho,mathML:()=>ko,makeComponent:()=>uo,invertLuminance:()=>Qe,initVars:()=>je,hotReload:()=>Ne,getListItem:()=>ao,getListInstance:()=>Xo,getListBinding:()=>so,getCssVar:()=>bo,elements:()=>u,deprecated:()=>Co,deleteListItem:()=>Ie,debounce:()=>xo,css:()=>K,boxedProxy:()=>lo,boxed:()=>V,blueprintLoader:()=>en,blueprint:()=>on,bindings:()=>io,bind:()=>S,StyleSheet:()=>Je,MoreMath:()=>Ye,Component:()=>a,Color:()=>d,BlueprintLoader:()=>Yo,Blueprint:()=>yo});function $(o){if(o==null||typeof o!=="object")return o;if(o instanceof Set)return new Set(o);else if(Array.isArray(o))return o.map($);let e={};for(let n in o){let r=o[n];if(o!=null&&typeof o==="object")e[n]=$(r);else e[n]=r}return e}var jo="-xin-data",j=`.${jo}`,Qo="-xin-event",qo=`.${Qo}`,T=Symbol.for("xin-path"),D=Symbol.for("xin-value"),Go="xinObserve",Zo="xinBind",Oo="xinOn",P=Symbol("list-binding"),wo=Symbol("list-instance"),Wo=new Map;function ue(o,e){let n=Wo.get(o);if(n===void 0)n=new Set,Wo.set(o,n);n.add(e)}function ye(o){return Wo.get(o)}var de=new Set;function F(o,e){if(!de.has(o))console.warn(e),de.add(o)}function Co(o,e){let n=!1;return(...r)=>{if(!n)console.warn(e),n=!0;return o(...r)}}var x=(o)=>{return o&&o[T]||void 0};function p(o){if(typeof o==="object"&&o!==null){let e=o[D];return e!==void 0?e:o}return o}function we(o,e){if(x(o)===void 0)throw Error("tosiSetValue requires a xin or boxed proxy");o[D]=e}var Ce=Co(x,"xinPath is deprecated. Use tosiPath instead."),Ee=Co(p,"xinValue is deprecated. Use tosiValue instead."),U=new WeakMap,z=new WeakMap;var A=(o)=>{let e=o.cloneNode();if(e instanceof Element){let n=z.get(o),r=U.get(o);if(n!=null)z.set(e,$(n));if(r!=null)U.set(e,$(r))}for(let n of Array.from(o instanceof HTMLTemplateElement?o.content.childNodes:o.childNodes))if(n instanceof Element||n instanceof DocumentFragment)e.appendChild(A(n));else e.appendChild(n.cloneNode());return e};var Q={debug:!1,perf:!1};var mn=(o)=>{try{return JSON.stringify(o)}catch(e){return"{has circular references}"}},Uo=(...o)=>Error(o.map(mn).join(" "));var ln=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1),dn=0,un=()=>(parseInt("10000",36)+ ++dn).toString(36).slice(-5),yn=()=>ln()+un(),Ro=Symbol("delete"),xe=Symbol("new-object"),Ao=Symbol("automatic-index");function be(o){if(o==="")return[];if(Array.isArray(o))return o;else{let e=[];while(o.length>0){let n=o.search(/\[[^\]]+\]/);if(n===-1){e.push(o.split("."));break}else{let r=o.slice(0,n);if(o=o.slice(n),r!=="")e.push(r.split("."));if(n=o.indexOf("]")+1,e.push(o.slice(1,n-1)),o.slice(n,n+1)===".")n+=1;o=o.slice(n)}}return e}}var Y=new WeakMap;function Me(o,e){if(Y.get(o)===void 0)Y.set(o,{});if(Y.get(o)[e]===void 0)Y.get(o)[e]={};let n=Y.get(o)[e];if(e==="_auto_")o.forEach((r,i)=>{if(r[Ao]===void 0)r[Ao]=yn();n[r[Ao]+""]=i});else o.forEach((r,i)=>{n[g(r,e)+""]=i});return n}function wn(o,e){if(Y.get(o)===void 0||Y.get(o)[e]===void 0)return Me(o,e);else return Y.get(o)[e]}function Cn(o,e,n){n=n+"";let r=wn(o,e)[n];if(r===void 0||g(o[r],e)+""!==n)r=Me(o,e)[n];return r}function En(o,e,n){if(o[e]===void 0&&n!==void 0)o[e]=n;return o[e]}function Te(o,e,n,r){let i=e!==""?Cn(o,e,n):n;if(r===Ro)return o.splice(i,1),Y.delete(o),Symbol("deleted");else if(r===xe){if(e===""&&o[i]===void 0)o[i]={}}else if(r!==void 0)if(i!==void 0)o[i]=r;else if(e!==""&&g(r,e)+""===n+"")o.push(r),i=o.length-1;else throw Error(`byIdPath insert failed at [${e}=${n}]`);return o[i]}function he(o){if(!Array.isArray(o))throw Uo("setByPath failed: expected array, found",o)}function pe(o){if(o==null||!(o instanceof Object))throw Uo("setByPath failed: expected Object, found",o)}function g(o,e){let n=be(e),r=o,i,s,t,c;for(i=0,s=n.length;r!==void 0&&i<s;i++){let f=n[i];if(Array.isArray(f))for(t=0,c=f.length;r!==void 0&&t<c;t++){let m=f[t];r=r[m]}else if(r.length===0){if(r=r[Number(f.slice(1))],f[0]!=="=")return}else if(f.includes("=")){let[m,...l]=f.split("=");r=Te(r,m,l.join("="))}else t=parseInt(f,10),r=r[t]}return r}function Le(o,e,n){let r=o;if(e==="")throw Error("setByPath cannot be used to set the root object");let i=be(e);while(r!=null&&i.length>0){let s=i.shift();if(typeof s==="string"){let t=s.indexOf("=");if(t>-1){if(t===0)pe(r);else he(r);let c=s.slice(0,t),f=s.slice(t+1);if(r=Te(r,c,f,i.length>0?xe:n),i.length===0)return!0}else{he(r);let c=parseInt(s,10);if(i.length>0)r=r[c];else{if(n!==Ro){if(r[c]===n)return!1;r[c]=n}else r.splice(c,1);return!0}}}else if(Array.isArray(s)&&s.length>0){pe(r);while(s.length>0){let t=s.shift();if(s.length>0||i.length>0)r=En(r,t,s.length>0?{}:[]);else{if(n!==Ro){if(r[t]===n)return!1;r[t]=n}else{if(!Object.prototype.hasOwnProperty.call(r,t))return!1;delete r[t]}return!0}}}else throw Error(`setByPath failed, bad path ${e}`)}throw Error(`setByPath(${o}, ${e}, ${n}) failed`)}var ke=Symbol("observer should be removed"),Eo=[],ho=[],Ko=!1,Bo,Io;function Se(o,e,n,r){let i=ye(o);if(i===void 0)return[];let s=[];for(let t of i){let c=g(n,t);if(c!==void 0)s.push(`${o}[${t}=${c}]${r}`)}return s}class He{description;test;callback;constructor(o,e){let n=typeof e==="string"?`"${e}"`:`function ${e.name}`,r;if(typeof o==="string")this.test=(i)=>typeof i==="string"&&i!==""&&(o.startsWith(i)||i.startsWith(o)),r=`test = "${o}"`;else if(o instanceof RegExp)this.test=o.test.bind(o),r=`test = "${o.toString()}"`;else if(o instanceof Function)this.test=o,r=`test = function ${o.name}`;else throw Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${r}, ${n}`,typeof e==="function")this.callback=e;else throw Error("expect callback to be a path or function");Eo.push(this)}}var Vo=async()=>{if(Bo===void 0)return;await Bo},hn=()=>{if(Q.perf)console.time("xin async update");let o=Array.from(ho);for(let e of o)Eo.filter((n)=>{let r;try{r=n.test(e)}catch(i){throw Error(`Listener ${n.description} threw "${i}" at "${e}"`)}if(r===ke)return J(n),!1;return r}).forEach((n)=>{let r;try{r=n.callback(e)}catch(i){console.error(`Listener ${n.description} threw "${i}" handling "${e}"`)}if(r===ke)J(n)});if(ho.splice(0),Ko=!1,typeof Io==="function")Io();if(Q.perf)console.timeEnd("xin async update")},q=(o)=>{let e=typeof o==="string"?o:x(o);if(e===void 0)throw console.error("touch was called on an invalid target",o),Error("touch was called on an invalid target");if(Ko===!1)Bo=new Promise((n)=>{Io=n}),Ko=setTimeout(hn);if(ho.find((n)=>e.startsWith(n))==null)ho.push(e)},G=(o,e)=>{return new He(o,e)},J=(o)=>{let e=Eo.indexOf(o);if(e>-1)Eo.splice(e,1);else throw Error("unobserve failed, listener not found")};var N={},_o=null,Xe=(o)=>{_o=o},po=()=>{if(_o===null)throw Error("xin proxy not initialized");return _o},vo=null,Po=null,ae=(o,e)=>{vo=o,Po=e},oo=()=>{if(vo===null)throw Error("bind not initialized");return vo},eo=()=>{if(Po===null)throw Error("on not initialized");return Po};var No=(o,e)=>{let n=new Event(e);o.dispatchEvent(n)},ze=(o)=>{if(o instanceof HTMLInputElement)return o.type;else if(o instanceof HTMLSelectElement&&o.hasAttribute("multiple"))return"multi-select";else return"other"},De=(o,e)=>{switch(ze(o)){case"radio":o.checked=o.value===e;break;case"checkbox":o.checked=!!e;break;case"date":o.valueAsDate=new Date(e);break;case"multi-select":for(let n of Array.from(o.querySelectorAll("option")))n.selected=e[n.value];break;default:o.value=e}},Fe=(o)=>{switch(ze(o)){case"radio":{let e=o.parentElement?.querySelector(`[name="${o.name}"]:checked`);return e!=null?e.value:null}case"checkbox":return o.checked;case"date":return o.valueAsDate?.toISOString();case"multi-select":return Array.from(o.querySelectorAll("option")).reduce((e,n)=>{return e[n.value]=n.selected,e},{});default:return o.value}},{ResizeObserver:$e}=globalThis,no=$e!=null?new $e((o)=>{for(let e of o){let n=e.target;No(n,"resize")}}):{observe(){},unobserve(){}},oe=(o,e,n=!0)=>{if(o!=null&&e!=null)if(typeof e==="string")o.textContent=e;else if(Array.isArray(e))e.forEach((r)=>{o.append(r instanceof Node&&n?A(r):r)});else if(e instanceof Node)o.append(n?A(e):e);else throw Error("expect text content or document node")};var xo=(o,e=250)=>{let n;return(...r)=>{if(n!==void 0)clearTimeout(n);n=setTimeout(()=>{o(...r)},e)}},ro=(o,e=250)=>{let n,r=Date.now()-e,i=!1;return(...s)=>{if(clearTimeout(n),n=setTimeout(()=>{o(...s),r=Date.now()},e),!i&&Date.now()-r>=e){i=!0;try{o(...s),r=Date.now()}finally{i=!1}}}};var io={value:{toDOM:De,fromDOM(o){return Fe(o)}},text:{toDOM(o,e){o.textContent=e}},enabled:{toDOM(o,e){o.disabled=!e}},disabled:{toDOM(o,e){o.disabled=Boolean(e)}},list:{toDOM(o,e,n){so(o,e,n).update(e)}}};function b(o){return o.replace(/[A-Z]/g,(e)=>{return`-${e.toLocaleLowerCase()}`})}function ee(o){return o.replace(/-([a-z])/g,(e,n)=>{return n.toLocaleUpperCase()})}var pn=180/Math.PI,xn=Math.PI/180;function k(o,e,n){return n<o?NaN:e<o?o:e>n?n:e}function W(o,e,n,r=!0){if(r)n=k(0,n,1);return n*(e-o)+o}var Ye={RADIANS_TO_DEGREES:pn,DEGREES_TO_RADIANS:xn,clamp:k,lerp:W};function bo(o,e=document.body){let n=getComputedStyle(e);if(o.endsWith(")")&&o.startsWith("var("))o=o.slice(4,-1);return n.getPropertyValue(o).trim()}var bn=(o,e,n)=>{return(0.299*o+0.587*e+0.114*n)/255},R=(o)=>("00"+Math.round(Number(o)).toString(16)).slice(-2);class ge{h;s;l;constructor(o,e,n){o/=255,e/=255,n/=255;let r=Math.max(o,e,n),i=r-Math.min(o,e,n),s=i!==0?r===o?(e-n)/i:r===e?2+(n-o)/i:4+(o-e)/i:0;this.h=60*s<0?60*s+360:60*s,this.s=i!==0?r<=0.5?i/(2*r-i):i/(2-(2*r-i)):0,this.l=(2*r-i)/2}}var v=globalThis.document!==void 0?globalThis.document.createElement("span"):void 0;class d{r;g;b;a;static fromVar(o,e=document.body){return d.fromCss(bo(o,e))}static fromCss(o){let e=o;if(v instanceof HTMLSpanElement)v.style.color="black",v.style.color=o,document.body.appendChild(v),e=getComputedStyle(v).color,v.remove();let[n,r,i,s]=e.match(/[\d.]+/g)||["0","0","0","0"],t=e.startsWith("color(srgb")?255:1;return new d(Number(n)*t,Number(r)*t,Number(i)*t,s==null?1:Number(s))}static fromHsl(o,e,n,r=1){let i,s,t;if(e===0)i=s=t=n;else{let f=(E,M,C)=>{if(C<0)C+=1;if(C>1)C-=1;if(C<0.16666666666666666)return E+(M-E)*6*C;if(C<0.5)return M;if(C<0.6666666666666666)return E+(M-E)*(0.6666666666666666-C)*6;return E},m=n<0.5?n*(1+e):n+e-n*e,l=2*n-m,y=(o%360+360)%360/360;i=f(l,m,y+0.3333333333333333),s=f(l,m,y),t=f(l,m,y-0.3333333333333333)}let c=new d(i*255,s*255,t*255,r);return c.hslCached={h:(o%360+360)%360,s:e,l:n},c}static black=new d(0,0,0);static white=new d(255,255,255);constructor(o,e,n,r=1){this.r=k(0,o,255),this.g=k(0,e,255),this.b=k(0,n,255),this.a=k(0,r,1)}get inverse(){return new d(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:o,s:e,l:n}=this._hsl;return d.fromHsl(o,e,1-n,this.a)}get opaque(){return this.a===1?this:new d(this.r,this.g,this.b,1)}contrasting(o=1){return this.opaque.blend(this.brightness>0.5?d.black:d.white,o)}get rgb(){let{r:o,g:e,b:n}=this;return`rgb(${o.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)})`}get rgba(){let{r:o,g:e,b:n,a:r}=this;return`rgba(${o.toFixed(0)},${e.toFixed(0)},${n.toFixed(0)},${r.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}hslCached;get _hsl(){if(this.hslCached==null)this.hslCached=new ge(this.r,this.g,this.b);return this.hslCached}get hsl(){let{h:o,s:e,l:n}=this._hsl;return`hsl(${o.toFixed(0)}deg ${(e*100).toFixed(0)}% ${(n*100).toFixed(0)}%)`}get hsla(){let{h:o,s:e,l:n}=this._hsl;return`hsl(${o.toFixed(0)}deg ${(e*100).toFixed(0)}% ${(n*100).toFixed(0)}% / ${(this.a*100).toFixed(0)}%)`}get mono(){let o=this.brightness*255;return new d(o,o,o)}get brightness(){return bn(this.r,this.g,this.b)}get html(){return this.toString()}toString(){return this.a===1?"#"+R(this.r)+R(this.g)+R(this.b):"#"+R(this.r)+R(this.g)+R(this.b)+R(Math.floor(255*this.a))}brighten(o){let{h:e,s:n,l:r}=this._hsl,i=k(0,r+o*(1-r),1);return d.fromHsl(e,n,i,this.a)}darken(o){let{h:e,s:n,l:r}=this._hsl,i=k(0,r*(1-o),1);return d.fromHsl(e,n,i,this.a)}saturate(o){let{h:e,s:n,l:r}=this._hsl,i=k(0,n+o*(1-n),1);return d.fromHsl(e,i,r,this.a)}desaturate(o){let{h:e,s:n,l:r}=this._hsl,i=k(0,n*(1-o),1);return d.fromHsl(e,i,r,this.a)}rotate(o){let{h:e,s:n,l:r}=this._hsl,i=(e+360+o)%360;return d.fromHsl(i,n,r,this.a)}opacity(o){let{h:e,s:n,l:r}=this._hsl;return d.fromHsl(e,n,r,o)}swatch(){return console.log(`%c      %c ${this.html}, ${this.rgba}`,`background-color: ${this.html}`,"background-color: transparent"),this}blend(o,e){return new d(W(this.r,o.r,e),W(this.g,o.g,e),W(this.b,o.b,e),W(this.a,o.a,e))}static blendHue(o,e,n){let r=(e-o+720)%360;if(r<180)return o+n*r;else return o-(360-r)*n}mix(o,e){let n=this._hsl,r=o._hsl;return d.fromHsl(n.s===0?r.h:r.s===0?n.h:d.blendHue(n.h,r.h,e),W(n.s,r.s,e),W(n.l,r.l,e),W(this.a,o.a,e))}colorMix(o,e){return d.fromCss(`color-mix(in hsl, ${this.html}, ${o.html} ${(e*100).toFixed(0)}%)`)}}function Je(o,e){let n=u.style(K(e));n.id=o,document.head.append(n)}var Mn=["animation-iteration-count","flex","flex-base","flex-grow","flex-shrink","opacity","order","tab-size","widows","z-index","zoom"],ne=(o,e)=>{if(typeof e==="number"&&!Mn.includes(o))e=`${e}px`;if(o.startsWith("_"))if(o.startsWith("__"))o="--"+o.substring(2),e=`var(${o}-default, ${e})`;else o="--"+o.substring(1);return{prop:o,value:String(e)}},Tn=(o,e,n)=>{if(n===void 0)return"";if(n instanceof d)n=n.html;let r=ne(e,n);return`${o}  ${r.prop}: ${r.value};`},We=(o,e,n="")=>{let r=b(o);if(typeof e==="object"&&!(e instanceof d)){let i=Object.keys(e).map((s)=>We(s,e[s],`${n}  `)).join(`
`);return`${n}  ${o} {
${i}
${n}  }`}else return Tn(n,r,e)},K=(o,e="")=>{return Object.keys(o).map((r)=>{let i=o[r];if(typeof i==="string"){if(r==="@import")return`@import url('${i}');`;throw Error("top-level string value only allowed for `@import`")}let s=Object.keys(i).map((t)=>We(t,i[t])).join(`
`);return`${e}${r} {
${s}
}`}).join(`

`)},je=(o)=>{F("initVars","initVars is deprecated. Just use _ and __ prefixes instead.");let e={};for(let n of Object.keys(o)){let r=o[n],i=b(n);e[`--${i}`]=typeof r==="number"&&r!==0?String(r)+"px":r}return e},Qe=(o)=>{let e={};for(let n of Object.keys(o)){let r=o[n];if(r instanceof d)e[n]=r.inverseLuminance;else if(typeof r==="string"&&r.match(/^(#[0-9a-fA-F]{3}|rgba?\(|hsla?\()/))e[n]=d.fromCss(r).inverseLuminance}return e},to=new Proxy({},{get(o,e){if(o[e]===void 0){let n="--"+b(e);o[e]=(r)=>`var(${n}, ${r})`}return o[e]}}),Mo=new Proxy({},{get(o,e){if(e==="default")return to;if(o[e]==null){e=b(e);let[,n,,r,i,s]=e.match(/^([-\w]*?)((_)?(\d+)(\w?))?$/)||["",e],t=`--${n}`;if(i!=null){let c=r==null?Number(i)/100:-Number(i)/100;switch(s){case"b":{let f=d.fromVar(t);o[e]=c>0?f.brighten(c).rgba:f.darken(-c).rgba}break;case"s":{let f=d.fromVar(t);o[e]=c>0?f.saturate(c).rgba:f.desaturate(-c).rgba}break;case"h":{let f=d.fromVar(t);o[e]=f.rotate(c*100).rgba}break;case"o":{let f=d.fromVar(t);o[e]=f.opacity(c).rgba}break;case"":o[e]=`calc(var(${t}) * ${c})`;break;default:throw console.error(s),Error(`Unrecognized method ${s} for css variable ${t}`)}}else o[e]=`var(${t})`}return o[e]}});var qe="http://www.w3.org/1998/Math/MathML",Ge="http://www.w3.org/2000/svg";var To={},Ze=(o,e,n)=>{let r=ne(b(e),n);if(r.prop.startsWith("--"))o.style.setProperty(r.prop,r.value);else o.style[e]=r.value},Ln=(o)=>{return{toDOM(e,n){Ze(e,o,n)}}},Oe=(o,e,n)=>{if(e==="style")if(typeof n==="object")for(let r of Object.keys(n))if(x(n[r]))S(o,n[r],Ln(r));else Ze(o,r,n[r]);else o.setAttribute("style",n);else{let r=b(e),i=o.constructor.observedAttributes;if(i?.includes(e)||i?.includes(r))if(typeof n==="boolean")n?o.setAttribute(r,""):o.removeAttribute(r);else o.setAttribute(r,n);else if(o[e]!==void 0){let{MathMLElement:t}=globalThis;if(o instanceof SVGElement||t!==void 0&&o instanceof t)o.setAttribute(e,n);else o[e]=n}else if(r==="class")n.split(" ").forEach((t)=>{o.classList.add(t)});else if(o[r]!==void 0)o[r]=n;else if(typeof n==="boolean")n?o.setAttribute(r,""):o.removeAttribute(r);else o.setAttribute(r,n)}},kn=(o)=>{return{toDOM(e,n){Oe(e,o,n)}}},Sn=(o,e,n)=>{if(e==="apply")n(o);else if(e.match(/^on[A-Z]/)!=null){let r=e.substring(2).toLowerCase();B(o,r,n)}else if(e==="bind")if((typeof n.binding==="string"?io[n.binding]:n.binding)!==void 0&&n.value!==void 0)S(o,n.value,n.binding instanceof Function?{toDOM:n.binding}:n.binding);else throw Error("bad binding");else if(e.match(/^bind[A-Z]/)!=null){let r=e.substring(4,5).toLowerCase()+e.substring(5),i=io[r];if(i!==void 0)S(o,n,i);else throw Error(`${e} is not allowed, bindings.${r} is not defined`)}else if(x(n))S(o,n,kn(e));else Oe(o,e,n)},re=(o,...e)=>{if(To[o]===void 0){let[i,s]=o.split("|");if(s===void 0)To[o]=globalThis.document.createElement(i);else To[o]=globalThis.document.createElementNS(s,i)}let n=To[o].cloneNode(),r={};for(let i of e)if(i instanceof Element||i instanceof DocumentFragment||typeof i==="string"||typeof i==="number")if(n instanceof HTMLTemplateElement)n.content.append(i);else n.append(i);else if(x(i))n.append(u.span({bindText:i}));else Object.assign(r,i);for(let i of Object.keys(r)){let s=r[i];Sn(n,i,s)}return n},ie=(...o)=>{let e=globalThis.document.createDocumentFragment();for(let n of o)e.append(n);return e},u=new Proxy({fragment:ie},{get(o,e){if(e=e.replace(/[A-Z]/g,(n)=>`-${n.toLocaleLowerCase()}`),o[e]===void 0)o[e]=(...n)=>re(e,...n);return o[e]},set(){throw Error("You may not add new properties to elements")}}),Lo=new Proxy({fragment:ie},{get(o,e){if(o[e]===void 0)o[e]=(...n)=>re(`${e}|${Ge}`,...n);return o[e]},set(){throw Error("You may not add new properties to elements")}}),ko=new Proxy({fragment:ie},{get(o,e){if(o[e]===void 0)o[e]=(...n)=>re(`${e}|${qe}`,...n);return o[e]},set(){throw Error("You may not add new properties to elements")}});var Hn=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],Xn=!0,an=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,$n=(o)=>an.test(o),Z=(o="",e="")=>{if(o==="")return e;else if(e.match(/^\d+$/)!==null||e.includes("="))return`${o}[${e}]`;else return`${o}.${e}`},Re={};function se(o,e){if(o!==null&&(typeof o==="object"||typeof o==="function"))return o;return new Proxy(Re,O(e,!0))}var So=()=>new Proxy({},O("^",!0)),Ue=!1;function I(){if(!Ue)console.warn("xinValue, tosiValue, xinPath, tosiPath, etc. are deprecated. Use value, path, observe, bind, on, binding, listBinding instead."),Ue=!0}var Ae=(o)=>{return o===Re},O=(o,e)=>({get(n,r){if(Ae(n)){let c=()=>g(N,o);switch(r){case"path":return o;case"value":return c();case"valueOf":case"toJSON":return()=>c();case Symbol.toPrimitive:return(f)=>{let m=c();if(f==="number")return Number(m);if(f==="string")return String(m);return m};case"toString":return()=>String(c());case"observe":return(f)=>{let m=G(o,f);return()=>J(m)};case"on":return(f,m)=>eo()(f,m,c());case"bind":return(f,m,l)=>{oo()(f,o,m,l)};case"binding":return(f)=>({bind:{value:o,binding:f}});case"listBinding":return(f=({span:l})=>l({bindText:"^"}),m={})=>[{bindList:{value:o,...m}},u.template(f(u,So()))];case D:case"xinValue":case"tosiValue":return I(),c();case T:case"xinPath":case"tosiPath":return I(),o;case Go:case"tosiObserve":return I(),(f)=>{let m=G(o,f);return()=>J(m)};case Oo:case"tosiOn":return I(),(f,m)=>eo()(f,m,c());case Zo:case"tosiBind":return I(),(f,m,l)=>{oo()(f,o,m,l)};case"tosiBinding":return I(),(f)=>({bind:{value:o,binding:f}});case"tosiListBinding":return I(),(f=({span:l})=>l({bindText:"^"}),m={})=>[{bindList:{value:o,...m}},u.template(f(u,So()))]}if(typeof r==="string"&&/^\d+$/.test(r)){let f=c();if(typeof f==="string")return f[parseInt(r,10)]}if(r==="length"){let f=c();if(typeof f==="string")return f.length}return}if(e&&!(r in n))switch(r){case"path":return o;case"value":return n.valueOf?n.valueOf():n;case"valueOf":case"toJSON":return()=>n.valueOf?n.valueOf():n;case"observe":return(c)=>{let f=G(o,c);return()=>J(f)};case"on":return(c,f)=>eo()(c,f,p(n));case"bind":return(c,f,m)=>{oo()(c,o,f,m)};case"binding":return(c)=>({bind:{value:o,binding:c}});case"listBinding":return(c=({span:m})=>m({bindText:"^"}),f={})=>[{bindList:{value:o,...f}},u.template(c(u,So()))]}switch(r){case T:case"xinPath":case"tosiPath":return o;case D:case"xinValue":case"tosiValue":return n.valueOf?n.valueOf():n;case Go:case"xinObserve":case"tosiObserve":return(c)=>{let f=G(o,c);return()=>J(f)};case Oo:case"xinOn":case"tosiOn":return(c,f)=>eo()(c,f,p(n));case Zo:case"xinBind":case"tosiBind":return(c,f,m)=>{oo()(c,o,f,m)};case"tosiBinding":return(c)=>({bind:{value:o,binding:c}});case"tosiListBinding":return(c=({span:m})=>m({bindText:"^"}),f={})=>[{bindList:{value:o,...f}},u.template(c(u,So()))]}if(typeof r==="symbol")return n[r];let i=Object.getOwnPropertyDescriptor(n,r);if(i&&!i.configurable&&!i.writable&&"value"in i)return i.value;let s=r,t=s.match(/^([^.[]+)\.(.+)$/)??s.match(/^([^\]]+)(\[.+)/)??s.match(/^(\[[^\]]+\])\.(.+)$/)??s.match(/^(\[[^\]]+\])\[(.+)$/);if(t!==null){let[,c,f]=t,m=Z(o,c),l=g(n,c);return l!==null&&typeof l==="object"?new Proxy(l,O(m,e))[f]:l}if(s.startsWith("[")&&s.endsWith("]"))s=s.substring(1,s.length-1);if(!Array.isArray(n)&&n[s]!==void 0||Array.isArray(n)&&s.includes("=")){let c;if(s.includes("=")){let[f,m]=s.split("=");c=n.find((l)=>`${g(l,f)}`===m)}else c=n[s];if(c instanceof Object){let f=Z(o,s);return new Proxy(c instanceof Function?c.bind(n):c,O(f,e))}else return e?se(c,Z(o,s)):c}else if(Array.isArray(n)){let c=n[s];return typeof c==="function"?(...f)=>{let m=f.map((y)=>p(y)),l=c.apply(n,m);if(Hn.includes(s))q(o);if(l!=null&&typeof l==="object"){if(s==="find"||s==="findLast"||s==="at"){let y=n.indexOf(l);if(y!==-1)return new Proxy(l,O(Z(o,String(y)),e))}}return l}:typeof c==="object"?new Proxy(c,O(Z(o,s),e)):e?se(c,Z(o,s)):c}else return e?se(n[s],Z(o,s)):n[s]},set(n,r,i){i=p(i);let s=r===D||r==="xinValue"||r==="tosiValue"||r==="value"&&(Ae(n)||e),t=s?o:Z(o,r);if(Xn&&!$n(t))throw Error(`setting invalid path ${t}`);if(p(w[t])!==i&&Le(N,t,i)){q(t);let f=o.match(/^(.+)\[(\d+)\]$/);if(f!==null){let[,m,l]=f,y=parseInt(l,10),E=s?"":`.${r}`,M=Se(m,y,n,E);for(let C of M)q(C)}}return!0}}),Ho=(o,e)=>{let n=typeof e==="function"?e:w[e];if(typeof n!=="function")throw Error(`observe expects a function or path to a function, ${e} is neither`);return G(o,n)},w=new Proxy(N,O("",!1));Xe(w);var V=new Proxy(N,O("",!0));var zn=16,Dn=100;function Ke(o,e){let n=Array.from(o.querySelectorAll(j));if(o.matches(j))n.unshift(o);for(let r of n){let i=z.get(r);for(let s of i){if(s.path.startsWith("^"))s.path=`${e}${s.path.substring(1)}`;if(s.binding.toDOM!=null)s.binding.toDOM(r,w[s.path])}}}class Be{boundElement;listTop;listBottom;template;options;itemToElement;array=[];_update;_previousSlice;static filterBoundObservers=new WeakMap;constructor(o,e,n={}){if(this.boundElement=o,this.itemToElement=new WeakMap,n.idPath!=null){let r=x(e);if(r!=null)ue(r,n.idPath)}if(o.children.length!==1)throw Error("ListBinding expects an element with exactly one child element");if(o.children[0]instanceof HTMLTemplateElement){let r=o.children[0];if(r.content.children.length!==1)throw Error("ListBinding expects a template with exactly one child element");this.template=A(r.content.children[0])}else this.template=o.children[0],this.template.remove();if(this.options=n,this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.listTop.classList.add("virtual-list-padding"),this.listBottom.classList.add("virtual-list-padding"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),n.virtual!=null)if(no.observe(this.boundElement),this._update=ro(()=>{this.update(this.array,!0)},zn),this.boundElement.addEventListener("resize",this._update),n.virtual.scrollContainer==="window")window.addEventListener("scroll",this._update),window.addEventListener("resize",this._update);else this.boundElement.addEventListener("scroll",this._update)}visibleSlice(){let{virtual:o,hiddenProp:e,visibleProp:n}=this.options,r=this.array;if(e!==void 0)r=r.filter((f)=>f[e]!==!0);if(n!==void 0)r=r.filter((f)=>f[n]===!0);if(this.options.filter&&this.needle!==void 0)r=this.options.filter(r,this.needle);let i=0,s=r.length-1,t=0,c=0;if(o!=null&&this.boundElement instanceof HTMLElement){let f=this.boundElement.offsetWidth,m=o.scrollContainer==="window",l,y;if(m){l=window.innerHeight;let _=this.boundElement.getBoundingClientRect();y=Math.max(0,-_.top)}else l=this.boundElement.offsetHeight,y=this.boundElement.scrollTop;if(o.visibleColumns==null)o.visibleColumns=o.width!=null?Math.max(1,Math.floor(f/o.width)):1;let E=Math.ceil(l/o.height)+(o.rowChunkSize||1),M=Math.ceil(r.length/o.visibleColumns),C=o.visibleColumns*E,H=Math.floor(y/o.height);if(H>M-E+1)H=Math.max(0,M-E+1);if(o.rowChunkSize)H-=H%o.rowChunkSize;i=H*o.visibleColumns,s=i+C-1,t=H*o.height,c=Math.max((M-E)*o.height-t,0)}return{items:r,firstItem:i,lastItem:s,topBuffer:t,bottomBuffer:c}}needle;filter=ro((o)=>{if(this.needle!==o)this.needle=o,this.update(this.array)},Dn);update(o,e){if(o==null)o=[];this.array=o;let{hiddenProp:n,visibleProp:r}=this.options,i=x(o),s=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",s.items.length===0);let t=this._previousSlice,{firstItem:c,lastItem:f,topBuffer:m,bottomBuffer:l}=s;if(n===void 0&&r===void 0&&e===!0&&t!=null&&c===t.firstItem&&f===t.lastItem)return;this._previousSlice=s;let y=0,E=0,M=0;for(let h of Array.from(this.boundElement.children)){if(h===this.listTop||h===this.listBottom)continue;let X=h[wo];if(X==null)h.remove();else{let L=s.items.indexOf(X);if(L<c||L>f)h.remove(),this.itemToElement.delete(X),y++}}this.listTop.style.height=String(m)+"px",this.listBottom.style.height=String(l)+"px";let C=[],{idPath:H}=this.options;for(let h=c;h<=f;h++){let X=s.items[h];if(X===void 0)continue;let L=this.itemToElement.get(p(X));if(L==null){if(M++,L=A(this.template),typeof X==="object")this.itemToElement.set(p(X),L),L[wo]=p(X);if(this.boundElement.insertBefore(L,this.listBottom),H!=null){let go=X[H],nn=`${i}[${H}=${go}]`;Ke(L,nn)}else{let go=`${i}[${h}]`;Ke(L,go)}}C.push(L)}let _=null;for(let h of C){if(h.previousElementSibling!==_)if(E++,_?.nextElementSibling!=null)this.boundElement.insertBefore(h,_.nextElementSibling);else this.boundElement.insertBefore(h,this.listBottom);_=h}if(Q.perf)console.log(i,"updated",{removed:y,created:M,moved:E})}}var so=(o,e,n)=>{let r=o[P];if(e&&r===void 0)r=new Be(o,e,n),o[P]=r;return r},Xo=(o)=>{let e;while(!(e=o[wo])&&o&&o.parentElement)o=o.parentElement;return e?{element:o,item:e}:void 0},ao=(o)=>{let e=Xo(o);return e?e.item:void 0},Ie=(o)=>{let e=Xo(o);if(!e)return console.error("deleteListItem failed, element is not part of a list instance",o),!1;let n=so(e.element.parentElement);if(!n.options.idPath)return console.error("deleteListItem failed, list binding has no idPath",o.parentElement,n),!1;let r=n.array.indexOf(e.item);if(r>-1)return n.array.splice(r,1),!0;return!1};var{document:co,MutationObserver:Ve}=globalThis,$o=(o,e)=>{let n=z.get(o);if(n==null)return;for(let r of n){let{binding:i,options:s}=r,{path:t}=r,{toDOM:c}=i;if(c!=null){if(t.startsWith("^")){let f=ao(o);if(f!=null&&f[T]!=null)t=r.path=`${f[T]}${t.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${t}`,o,"is not part of a list"),Error(`Cannot resolve relative binding ${t}`)}if(e==null||t.startsWith(e))c(o,po()[t],s)}}};if(Ve!=null)new Ve((e)=>{e.forEach((n)=>{Array.from(n.addedNodes).forEach((r)=>{if(r instanceof Element)Array.from(r.querySelectorAll(j)).forEach((i)=>$o(i))})})}).observe(co.body,{subtree:!0,childList:!0});G(()=>!0,(o)=>{let e=Array.from(co.querySelectorAll(j));for(let n of e)$o(n,o)});var _e=(o)=>{let e=o.target?.closest(j);while(e!=null){let n=z.get(e);for(let r of n){let{binding:i,path:s}=r,{fromDOM:t}=i;if(t!=null){let c;try{c=t(e,r.options)}catch(f){throw console.error("Cannot get value from",e,"via",r),Error("Cannot obtain value fromDOM")}if(c!=null){let f=po(),m=f[s];if(m==null)f[s]=c;else{let l=m[T]!=null?m[D]:m,y=c[T]!=null?c[D]:c;if(l!==y)f[s]=y}}}}e=e.parentElement.closest(j)}};if(globalThis.document!=null)co.body.addEventListener("change",_e,!0),co.body.addEventListener("input",_e,!0);function S(o,e,n,r){if(o instanceof DocumentFragment)throw Error("bind cannot bind to a DocumentFragment");let i;if(typeof e==="object"&&e[T]===void 0&&r===void 0){let{value:c}=e;i=typeof c==="string"?c:c[T],r=e,delete r.value}else i=typeof e==="string"?e:e[T];if(i==null)throw Error("bind requires a path or object with xin Proxy");let{toDOM:s}=n;o.classList?.add(jo);let t=z.get(o);if(t==null)t=[],z.set(o,t);if(t.push({path:i,binding:n,options:r}),s!=null&&!i.startsWith("^"))q(i);if(r?.filter&&r?.needle)S(o,r.needle,{toDOM(c,f){console.log({needle:f}),c[P]?.filter(f)}});return o}var ve=new Set,Fn=(o)=>{let e=o?.target?.closest(qo),n=!1,r=new Proxy(o,{get(s,t){if(t==="stopPropagation")return()=>{o.stopPropagation(),n=!0};else{let c=s[t];return typeof c==="function"?c.bind(s):c}}}),i=new Set;while(!n&&e!=null){let t=U.get(e)[o.type]||i;for(let c of t){if(typeof c==="function")c(r);else{let f=po()[c];if(typeof f==="function")f(r);else throw Error(`no event handler found at path ${c}`)}if(n)continue}e=e.parentElement!=null?e.parentElement.closest(qo):null}};function B(o,e,n){let r=U.get(o);if(o.classList.add(Qo),r==null)r={},U.set(o,r);if(!r[e])r[e]=new Set;if(r[e].add(n),!ve.has(e))ve.add(e),co.body.addEventListener(e,Fn,!0);return()=>{r[e].delete(n)}}ae(S,B);function zo(o,e){if(!o.internals)return;let n={},r="";if(o.hasAttribute("required")&&e==="")n.valueMissing=!0,r="Please fill out this field.";let i=o.getAttribute("minlength");if(i&&e.length<parseInt(i,10))n.tooShort=!0,r=`Please use at least ${i} characters.`;let s=o.getAttribute("maxlength");if(s&&e.length>parseInt(s,10))n.tooLong=!0,r=`Please use no more than ${s} characters.`;let t=o.getAttribute("pattern");if(t&&e!=="")try{if(!new RegExp(`^(?:${t})$`).test(e))n.patternMismatch=!0,r="Please match the requested format."}catch{}if(Object.keys(n).length>0)o.internals.setValidity(n,r,o);else o.internals.setValidity({})}var Yn=0;function te(){return`custom-elt${(Yn++).toString(36)}`}var Pe=0,ce=null;function gn(){if(ce===null)ce=new MutationObserver((o)=>{let e=new Set;for(let n of o)if(n.type==="attributes"&&n.target instanceof a){let r=n.target,i=ee(n.attributeName);if(r._legacyTrackedAttrs?.has(i))e.add(r)}for(let n of e)n.queueRender(!1)});return ce}var fo={};function Jn(o,e){let n=fo[o],r=K(e).replace(/:host\b/g,o);fo[o]=n?n+`
`+r:r}function Wn(o){if(fo[o])document.head.append(u.style({id:o+"-component"},fo[o]));delete fo[o]}class a extends HTMLElement{static elements=u;static _elementCreator;static initAttributes;static formAssociated;internals;get validity(){return this.internals?.validity}get validationMessage(){return this.internals?.validationMessage??""}get willValidate(){return this.internals?.willValidate??!1}checkValidity(){return this.internals?.checkValidity()??!0}reportValidity(){return this.internals?.reportValidity()??!0}setCustomValidity(o){if(this.internals)if(o)this.internals.setValidity({customError:!0},o);else this.internals.setValidity({})}setValidity(o,e,n){this.internals?.setValidity(o,e,n)}setFormValue(o,e){this.internals?.setFormValue(o,e)}static get observedAttributes(){let o=this.initAttributes;if(o)return["hidden",...Object.keys(o).map(b)];return["hidden"]}instanceId;styleNode;static styleSpec;static styleNode;content=u.slot();isSlotted;static _tagName=null;static get tagName(){return this._tagName}_legacyTrackedAttrs;_attrValues;_valueChanged=!1;static StyleNode(o){return console.warn("StyleNode is deprecated, just assign static styleSpec: XinStyleSheet to the class directly"),u.style(K(o))}static elementCreator(o={}){let e=this;if(e._elementCreator==null){let{tag:n,styleSpec:r}=o,i=o!=null?n:null;if(i==null)if(typeof e.name==="string"&&e.name!==""){if(i=b(e.name),i.startsWith("-"))i=i.slice(1)}else i=te();if(customElements.get(i)!=null)console.warn(`${i} is already defined`);if(i.match(/\w+(-\w+)+/)==null)console.warn(`${i} is not a legal tag for a custom-element`),i=te();while(customElements.get(i)!==void 0)i=te();if(e._tagName=i,r!==void 0)Jn(i,r);window.customElements.define(i,this,o),e._elementCreator=u[i]}return e._elementCreator}initAttributes(...o){if(F("initAttributes","initAttributes() is deprecated. Use static initAttributes = { ... } instead."),!this._legacyTrackedAttrs)this._legacyTrackedAttrs=new Set;for(let i of o)this._legacyTrackedAttrs.add(i);gn().observe(this,{attributes:!0});let n={},r={};o.forEach((i)=>{n[i]=$(this[i]);let s=b(i);Object.defineProperty(this,i,{enumerable:!1,get(){if(typeof n[i]==="boolean")return this.hasAttribute(s);else if(this.hasAttribute(s))return typeof n[i]==="number"?parseFloat(this.getAttribute(s)):this.getAttribute(s);else if(r[i]!==void 0)return r[i];else return n[i]},set(t){if(typeof n[i]==="boolean"){if(t!==this[i]){if(t)this.setAttribute(s,"");else this.removeAttribute(s);this.queueRender()}}else if(typeof n[i]==="number"){if(t!==parseFloat(this[i]))this.setAttribute(s,t),this.queueRender()}else if(typeof t==="object"||`${t}`!==`${this[i]}`){if(t===null||t===void 0||typeof t==="object")this.removeAttribute(s);else this.setAttribute(s,t);this.queueRender(),r[i]=t}}})})}initValue(){let o=Object.getOwnPropertyDescriptor(this,"value");if(o===void 0||o.get!==void 0||o.set!==void 0)return;let e=this.hasAttribute("value")?this.getAttribute("value"):$(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get(){return e},set(n){if(e!==n)e=n,this._valueChanged=!0,this.queueRender(!0)}})}_parts;get parts(){let o=this.shadowRoot!=null?this.shadowRoot:this;if(this._parts==null)this._parts=new Proxy({},{get(e,n){if(e[n]===void 0){let r=o.querySelector(`[part="${n}"]`);if(r==null)r=o.querySelector(n);if(r==null)throw Error(`elementRef "${n}" does not exist!`);r.removeAttribute("data-ref"),e[n]=r}return e[n]}});return this._parts}attributeChangedCallback(o,e,n){let r=ee(o);if(!this._legacyTrackedAttrs?.has(r))this.queueRender(!1)}constructor(){super();if(Pe+=1,this.constructor.formAssociated&&typeof this.attachInternals==="function"&&!this.internals)this.internals=this.attachInternals();let o=this.constructor.initAttributes;if(o)this._setupAttributeAccessors(o);this.instanceId=`${this.tagName.toLocaleLowerCase()}-${Pe}`,this._value=$(this.defaultValue)}_setupAttributeAccessors(o){if(!this._attrValues)this._attrValues=new Map;for(let e of Object.keys(o)){let n=b(e),r=o[e];if(e==="value"){console.warn(`${this.tagName}: 'value' cannot be an attribute. Use the Component value property instead.`);continue}if(typeof r==="object"&&r!==null){console.warn(`${this.tagName}: initAttributes.${e} is an object. Use a regular property instead.`);continue}let i=this,s=!1;while(i){let t=Object.getOwnPropertyDescriptor(i,e);if(t){if(!t.configurable||t.get||t.set){s=!0;break}break}i=Object.getPrototypeOf(i)}if(s)continue;Object.defineProperty(this,e,{enumerable:!1,get:()=>{if(typeof r==="boolean")return this.hasAttribute(n);else if(this.hasAttribute(n))return typeof r==="number"?parseFloat(this.getAttribute(n)):this.getAttribute(n);else if(this._attrValues.has(e))return this._attrValues.get(e);else return r},set:(t)=>{if(typeof r==="boolean"){if(t!==this[e]){if(t)this.setAttribute(n,"");else this.removeAttribute(n);this.queueRender()}}else if(typeof r==="number"){if(t!==parseFloat(this[e]))this.setAttribute(n,t),this.queueRender()}else if(typeof t==="object"||`${t}`!==`${this[e]}`){if(t===null||t===void 0||typeof t==="object")this.removeAttribute(n);else this.setAttribute(n,t);this.queueRender(),this._attrValues.set(e,t)}}})}}connectedCallback(){if(Wn(this.constructor.tagName),this.hydrate(),this.role!=null)this.setAttribute("role",this.role);if(this.constructor.formAssociated&&!this.hasAttribute("tabindex"))this.setAttribute("tabindex","0");if(this.onResize!==void 0){if(no.observe(this),this._onResize==null)this._onResize=this.onResize.bind(this);this.addEventListener("resize",this._onResize)}if(this.value!=null&&this.getAttribute("value")!=null)this._value=this.getAttribute("value");if(this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this.queueRender()}disconnectedCallback(){no.unobserve(this)}formResetCallback(){if(this.value!==void 0)this.value=this.defaultValue??""}formDisabledCallback(o){if(o)this.setAttribute("disabled","");else this.removeAttribute("disabled")}formStateRestoreCallback(o){if(this.value!==void 0&&typeof o==="string")this.value=o}_changeQueued=!1;_renderQueued=!1;queueRender(o=!1){if(!this._hydrated)return;if(!this._changeQueued)this._changeQueued=o;if(!this._renderQueued)this._renderQueued=!0,requestAnimationFrame(()=>{if(this._changeQueued){if(No(this,"change"),this.internals&&this.value!==void 0)this.internals.setFormValue(this.value)}this._changeQueued=!1,this._renderQueued=!1,this.render()})}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();let o=typeof this.content!=="function",e=typeof this.content==="function"?this.content(u):this.content,{styleSpec:n}=this.constructor,{styleNode:r}=this.constructor;if(n)r=this.constructor.styleNode=u.style(K(n)),delete this.constructor.styleNode;if(this.styleNode)console.warn(this,"styleNode is deprecrated, use static styleNode or statc styleSpec instead"),r=this.styleNode;if(r){let i=this.attachShadow({mode:"open"});i.appendChild(r.cloneNode(!0)),oe(i,e,o)}else if(e!==null){let i=Array.from(this.childNodes);oe(this,e,o),this.isSlotted=this.querySelector("slot,xin-slot")!==void 0;let s=Array.from(this.querySelectorAll("slot"));if(s.length>0)s.forEach(fe.replaceSlot);if(i.length>0){let t={"":this};Array.from(this.querySelectorAll("xin-slot")).forEach((c)=>{t[c.name]=c}),i.forEach((c)=>{let f=t[""],m=c instanceof Element?t[c.slot]:f;(m!==void 0?m:f).append(c)})}}this._hydrated=!0}}render(){if(this._valueChanged&&this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this._valueChanged=!1}validateValue(){if(!this.internals||this.value===void 0)return;let o=typeof this.value==="string"?this.value:String(this.value);zo(this,o)}}class fe extends a{static initAttributes={name:""};content=null;static replaceSlot(o){let e=document.createElement("xin-slot");if(o.name!=="")e.setAttribute("name",o.name);o.replaceWith(e)}}var ni=fe.elementCreator({tag:"xin-slot"});var Ne=(o=()=>!0)=>{let e=localStorage.getItem("xin-state");if(e!=null){let r=JSON.parse(e);for(let i of Object.keys(r).filter(o))if(w[i]!==void 0)Object.assign(w[i],r[i]);else w[i]=r[i]}let n=xo(()=>{let r={},i=p(w);for(let s of Object.keys(i).filter(o))r[s]=i[s];localStorage.setItem("xin-state",JSON.stringify(r)),console.log("xin state saved to localStorage")},500);Ho(o,n)};var Do="1.2.0";function mo(o){return Object.assign(V,o),V}function lo(o){return F("boxedProxy","boxedProxy is deprecated, please use tosi() instead"),mo(o)}function Fo(o,e=!1){if(e)return F("xinProxy-boxed","xinProxy(..., true) is deprecated; use tosi(...) instead"),lo(o);return Object.keys(o).forEach((n)=>{w[n]=o[n]}),w}var jn={};async function uo(o,e){let{type:n,styleSpec:r}=await e(o,{Color:d,Component:a,elements:u,svgElements:Lo,mathML:ko,varDefault:to,vars:Mo,xin:w,boxed:V,xinProxy:Fo,boxedProxy:lo,tosi:mo,makeComponent:uo,bind:S,on:B,version:Do}),i={type:n,creator:n.elementCreator({tag:o,styleSpec:r})};return jn[o]=i,i}var me={},Qn=(o)=>import(o);class yo extends a{static initAttributes={tag:"anon-elt",src:"",property:"default"};loaded;blueprintLoaded=(o)=>{};async packaged(){let{tag:o,src:e,property:n}=this,r=`${o}.${n}:${e}`;if(!this.loaded){if(me[r]===void 0)me[r]=Qn(e).then((i)=>{let s=i[n];return uo(o,s)});else console.log(`using cached ${o} with signature ${r}`);this.loaded=await me[r],this.blueprintLoaded(this.loaded)}return this.loaded}}var on=yo.elementCreator({tag:"xin-blueprint",styleSpec:{":host":{display:"none"}}});class Yo extends a{allLoaded=()=>{};constructor(){super()}async load(){let e=Array.from(this.querySelectorAll(yo.tagName)).filter((n)=>n.src).map((n)=>n.packaged());await Promise.all(e),this.allLoaded()}connectedCallback(){super.connectedCallback(),this.load()}}var en=Yo.elementCreator({tag:"xin-loader",styleSpec:{":host":{display:"none"}}});})();

//# debugId=A9988EBD5902D20164756E2164756E21
//# sourceMappingURL=index.js.map
