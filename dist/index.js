(()=>{var{defineProperty:Rn,getOwnPropertyNames:Lf,getOwnPropertyDescriptor:xf}=Object,Hf=Object.prototype.hasOwnProperty;var xo=new WeakMap,Tf=(n)=>{var o=xo.get(n),f;if(o)return o;if(o=Rn({},"__esModule",{value:!0}),n&&typeof n==="object"||typeof n==="function")Lf(n).map((i)=>!Hf.call(o,i)&&Rn(o,i,{get:()=>n[i],enumerable:!(f=xf(n,i))||f.enumerable}));return xo.set(n,o),o};var sf=(n,o)=>{for(var f in o)Rn(n,f,{get:o[f],enumerable:!0,configurable:!0,set:(i)=>o[f]=()=>i})};var gf={};sf(gf,{xinValue:()=>Fo,xinProxy:()=>An,xinPath:()=>Xo,xin:()=>X,warnDeprecated:()=>O,version:()=>On,vars:()=>Zn,varDefault:()=>rn,validateAgainstConstraints:()=>qn,updates:()=>tn,unobserve:()=>K,touchElement:()=>Un,touch:()=>B,tosiValue:()=>s,tosiSetValue:()=>Co,tosiPath:()=>Y,tosi:()=>yn,throttle:()=>En,svgElements:()=>kn,settings:()=>S,scrollListItemIntoView:()=>of,onThemePreferencesChange:()=>_o,onStylesheetChange:()=>Bo,on:()=>N,observe:()=>a,mathML:()=>Gn,makeComponent:()=>xn,invertLuminance:()=>Po,initVars:()=>bo,hotReload:()=>rf,getThemePreferences:()=>co,getListItem:()=>dn,getListInstance:()=>Wn,getListBinding:()=>v,getCssVar:()=>$n,elements:()=>T,deprecated:()=>Cn,deleteListItem:()=>nf,debounce:()=>Yn,css:()=>V,boxedProxy:()=>Ln,boxed:()=>g,blueprintLoader:()=>wf,blueprint:()=>Mf,bindings:()=>mn,bind:()=>k,StyleSheet:()=>Io,MoreMath:()=>Ro,Component:()=>W,Color:()=>y,BlueprintLoader:()=>jn,Blueprint:()=>Hn});function d(n){if(n==null||typeof n!=="object")return n;if(n instanceof Set)return new Set(n);else if(Array.isArray(n))return n.map(d);let o={};for(let f in n){let i=n[f];if(n!=null&&typeof n==="object")o[f]=d(i);else o[f]=i}return o}var Sn="-xin-data",u=`.${Sn}`,Bn="-xin-event",In=`.${Bn}`,J=Symbol.for("xin-path"),q=Symbol.for("xin-value"),Vn="xinObserve",bn="xinBind",Pn="xinOn",t=Symbol("list-binding"),sn=Symbol("list-instance"),un=new Map;function To(n,o){let f=un.get(n);if(f===void 0)f=new Set,un.set(n,f);f.add(o)}function so(n){return un.get(n)}var Ho=new Set;function O(n,o){if(!Ho.has(n))console.warn(o),Ho.add(n)}function Cn(n,o){let f=!1;return(...i)=>{if(!f)console.warn(o),f=!0;return n(...i)}}var Y=(n)=>{return n&&n[J]||void 0};function s(n){if(typeof n==="object"&&n!==null){let o=n[q];return o!==void 0?o:n}return n}function Co(n,o){if(Y(n)===void 0)throw Error("tosiSetValue requires a xin or boxed proxy");n[q]=o}var Xo=Cn(Y,"xinPath is deprecated. Use tosiPath instead."),Fo=Cn(s,"xinValue is deprecated. Use tosiValue instead."),_=new WeakMap,U=new WeakMap;var h=(n)=>{let o=n.cloneNode();if(o instanceof Element){let f=U.get(n),i=_.get(n);if(f!=null)U.set(o,d(f));if(i!=null)_.set(o,d(i))}for(let f of Array.from(n instanceof HTMLTemplateElement?n.content.childNodes:n.childNodes))if(f instanceof Element||f instanceof DocumentFragment)o.appendChild(h(f));else o.appendChild(f.cloneNode());return o};var S={debug:!1,perf:!1};var Cf=(n)=>{try{return JSON.stringify(n)}catch(o){return"{has circular references}"}},_n=(...n)=>Error(n.map(Cf).join(" "));var Xf=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1),Ff=0,Df=()=>(parseInt("10000",36)+ ++Ff).toString(36).slice(-5),Yf=()=>Xf()+Df(),pn=Symbol("delete"),$o=Symbol("new-object"),hn=Symbol("automatic-index");function Jo(n){if(n==="")return[];if(Array.isArray(n))return n;else{let o=[];while(n.length>0){let f=n.search(/\[[^\]]+\]/);if(f===-1){o.push(n.split("."));break}else{let i=n.slice(0,f);if(n=n.slice(f),i!=="")o.push(i.split("."));if(f=n.indexOf("]")+1,o.push(n.slice(1,f-1)),n.slice(f,f+1)===".")f+=1;n=n.slice(f)}}return o}}var A=new WeakMap;function Zo(n,o){if(A.get(n)===void 0)A.set(n,{});if(A.get(n)[o]===void 0)A.get(n)[o]={};let f=A.get(n)[o];if(o==="_auto_")n.forEach((i,c)=>{if(i[hn]===void 0)i[hn]=Yf();f[i[hn]+""]=c});else n.forEach((i,c)=>{f[j(i,o)+""]=c});return f}function $f(n,o){if(A.get(n)===void 0||A.get(n)[o]===void 0)return Zo(n,o);else return A.get(n)[o]}function Jf(n,o,f){f=f+"";let i=$f(n,o)[f];if(i===void 0||j(n[i],o)+""!==f)i=Zo(n,o)[f];return i}function Zf(n,o,f){if(n[o]===void 0&&f!==void 0)n[o]=f;return n[o]}function Qo(n,o,f,i){let c=o!==""?Jf(n,o,f):f;if(i===pn)return n.splice(c,1),A.delete(n),Symbol("deleted");else if(i===$o){if(o===""&&n[c]===void 0)n[c]={}}else if(i!==void 0)if(c!==void 0)n[c]=i;else if(o!==""&&j(i,o)+""===f+"")n.push(i),c=n.length-1;else throw Error(`byIdPath insert failed at [${o}=${f}]`);return n[c]}function Do(n){if(!Array.isArray(n))throw _n("setByPath failed: expected array, found",n)}function Yo(n){if(n==null||!(n instanceof Object))throw _n("setByPath failed: expected Object, found",n)}function j(n,o){let f=Jo(o),i=n,c,m,r,M;for(c=0,m=f.length;i!==void 0&&c<m;c++){let E=f[c];if(Array.isArray(E))for(r=0,M=E.length;i!==void 0&&r<M;r++){let w=E[r];i=i[w]}else if(i.length===0){if(i=i[Number(E.slice(1))],E[0]!=="=")return}else if(E.includes("=")){let[w,...L]=E.split("=");i=Qo(i,w,L.join("="))}else r=parseInt(E,10),i=i[r]}return i}function ko(n,o,f){let i=n;if(o==="")throw Error("setByPath cannot be used to set the root object");let c=Jo(o);while(i!=null&&c.length>0){let m=c.shift();if(typeof m==="string"){let r=m.indexOf("=");if(r>-1){if(r===0)Yo(i);else Do(i);let M=m.slice(0,r),E=m.slice(r+1);if(i=Qo(i,M,E,c.length>0?$o:f),c.length===0)return!0}else{Do(i);let M=parseInt(m,10);if(c.length>0)i=i[M];else{if(f!==pn){if(i[M]===f)return!1;i[M]=f}else i.splice(M,1);return!0}}}else if(Array.isArray(m)&&m.length>0){Yo(i);while(m.length>0){let r=m.shift();if(m.length>0||c.length>0)i=Zf(i,r,m.length>0?{}:[]);else{if(f!==pn){if(i[r]===f)return!1;i[r]=f}else{if(!Object.prototype.hasOwnProperty.call(i,r))return!1;delete i[r]}return!0}}}else throw Error(`setByPath failed, bad path ${o}`)}throw Error(`setByPath(${n}, ${o}, ${f}) failed`)}var Go=Symbol("observer should be removed"),Xn=[],Fn=[],Nn=!1,en,gn;function zo(n,o,f,i){let c=so(n);if(c===void 0)return[];let m=[];for(let r of c){let M=j(f,r);if(M!==void 0)m.push(`${n}[${r}=${M}]${i}`)}return m}class Wo{description;test;callback;constructor(n,o){let f=typeof o==="string"?`"${o}"`:`function ${o.name}`,i;if(typeof n==="string")this.test=(c)=>typeof c==="string"&&c!==""&&(n.startsWith(c)||c.startsWith(n)),i=`test = "${n}"`;else if(n instanceof RegExp)this.test=n.test.bind(n),i=`test = "${n.toString()}"`;else if(n instanceof Function)this.test=n,i=`test = function ${n.name}`;else throw Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${i}, ${f}`,typeof o==="function")this.callback=o;else throw Error("expect callback to be a path or function");Xn.push(this)}}var tn=async()=>{if(en===void 0)return;await en},Qf=()=>{if(S.perf)console.time("xin async update");let n=Array.from(Fn);Fn.length=0,Nn=!1;for(let o of n)Xn.filter((f)=>{let i;try{i=f.test(o)}catch(c){throw Error(`Listener ${f.description} threw "${c}" at "${o}"`)}if(i===Go)return K(f),!1;return i}).forEach((f)=>{let i;try{i=f.callback(o)}catch(c){console.error(`Listener ${f.description} threw "${c}" handling "${o}"`)}if(i===Go)K(f)});if(typeof gn==="function")gn();if(S.perf)console.timeEnd("xin async update")},B=(n)=>{let o=typeof n==="string"?n:Y(n);if(o===void 0)throw console.error("touch was called on an invalid target",n),Error("touch was called on an invalid target");if(Nn===!1)en=new Promise((f)=>{gn=f}),Nn=setTimeout(Qf);if(Fn.find((f)=>o.startsWith(f))==null)Fn.push(o)},I=(n,o)=>{return new Wo(n,o)},K=(n)=>{let o=Xn.indexOf(n);if(o>-1)Xn.splice(o,1);else throw Error("unobserve failed, listener not found")};var nn={},vn=null,Uo=(n)=>{vn=n},Dn=()=>{if(vn===null)throw Error("xin proxy not initialized");return vn},ln=null,an=null,qo=(n,o)=>{ln=n,an=o},on=()=>{if(ln===null)throw Error("bind not initialized");return ln},fn=()=>{if(an===null)throw Error("on not initialized");return an};var no=(n,o)=>{let f=new Event(o);n.dispatchEvent(f)},Ao=(n)=>{if(n instanceof HTMLInputElement)return n.type;else if(n instanceof HTMLSelectElement&&n.hasAttribute("multiple"))return"multi-select";else return"other"},jo=(n,o)=>{switch(Ao(n)){case"radio":n.checked=n.value===o;break;case"checkbox":n.checked=!!o;break;case"date":n.valueAsDate=new Date(o);break;case"multi-select":for(let f of Array.from(n.querySelectorAll("option")))f.selected=o[f.value];break;default:n.value=o}},Ko=(n)=>{switch(Ao(n)){case"radio":{let o=n.parentElement?.querySelector(`[name="${n.name}"]:checked`);return o!=null?o.value:null}case"checkbox":return n.checked;case"date":return n.valueAsDate?.toISOString();case"multi-select":return Array.from(n.querySelectorAll("option")).reduce((o,f)=>{return o[f.value]=f.selected,o},{});default:return n.value}},{ResizeObserver:Oo}=globalThis,cn=Oo!=null?new Oo((n)=>{for(let o of n){let f=o.target;no(f,"resize")}}):{observe(){},unobserve(){}},oo=(n,o,f=!0)=>{if(n!=null&&o!=null)if(typeof o==="string")n.textContent=o;else if(Array.isArray(o))o.forEach((i)=>{n.append(i instanceof Node&&f?h(i):i)});else if(o instanceof Node)n.append(f?h(o):o);else throw Error("expect text content or document node")};var Yn=(n,o=250)=>{let f;return(...i)=>{if(f!==void 0)clearTimeout(f);f=setTimeout(()=>{n(...i)},o)}},En=(n,o=250)=>{let f,i=Date.now()-o,c=!1;return(...m)=>{if(clearTimeout(f),f=setTimeout(()=>{n(...m),i=Date.now()},o),!c&&Date.now()-i>=o){c=!0;try{n(...m),i=Date.now()}finally{c=!1}}}};var mn={value:{toDOM:jo,fromDOM(n){return Ko(n)}},text:{toDOM(n,o){n.textContent=o}},enabled:{toDOM(n,o){n.disabled=!o}},disabled:{toDOM(n,o){n.disabled=Boolean(o)}},list:{toDOM(n,o,f){v(n,o,f).update(o)}}};function $(n){return n.replace(/[A-Z]/g,(o)=>{return`-${o.toLocaleLowerCase()}`})}function fo(n){return n.replace(/-([a-z])/g,(o,f)=>{return f.toLocaleUpperCase()})}var kf=180/Math.PI,Gf=Math.PI/180;function Q(n,o,f){return f<n?NaN:o<n?n:o>f?f:o}function R(n,o,f,i=!0){if(i)f=Q(0,f,1);return f*(o-n)+n}var Ro={RADIANS_TO_DEGREES:kf,DEGREES_TO_RADIANS:Gf,clamp:Q,lerp:R};function $n(n,o=document.body){let f=getComputedStyle(o);if(n.endsWith(")")&&n.startsWith("var("))n=n.slice(4,-1);return f.getPropertyValue(n).trim()}var zf=(n,o,f)=>{return(0.299*n+0.587*o+0.114*f)/255},p=(n)=>("00"+Math.round(Number(n)).toString(16)).slice(-2);class uo{h;s;l;constructor(n,o,f){n/=255,o/=255,f/=255;let i=Math.max(n,o,f),c=i-Math.min(n,o,f),m=c!==0?i===n?(o-f)/c:i===o?2+(f-n)/c:4+(n-o)/c:0;this.h=60*m<0?60*m+360:60*m,this.s=c!==0?i<=0.5?c/(2*i-c):c/(2-(2*i-c)):0,this.l=(2*i-c)/2}}var l=globalThis.document!==void 0?globalThis.document.createElement("span"):void 0;class y{r;g;b;a;static fromVar(n,o=document.body){return y.fromCss($n(n,o))}static fromCss(n){let o=n.match(/^#([0-9a-fA-F]+)$/);if(o){let E=o[1];if(E.length===3)return new y(parseInt(E[0]+E[0],16),parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16));if(E.length===4)return new y(parseInt(E[0]+E[0],16),parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16)/255);if(E.length===6)return new y(parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16));if(E.length===8)return new y(parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16),parseInt(E.slice(6,8),16)/255)}let f=n;if(l instanceof HTMLSpanElement)l.style.color="black",l.style.color=n,document.body.appendChild(l),f=getComputedStyle(l).color,l.remove();let[i,c,m,r]=f.match(/[\d.]+/g)||["0","0","0","0"],M=f.startsWith("color(srgb")?255:1;return new y(Number(i)*M,Number(c)*M,Number(m)*M,r==null?1:Number(r))}static fromHsl(n,o,f,i=1){let c,m,r;if(o===0)c=m=r=f;else{let E=(C,F,x)=>{if(x<0)x+=1;if(x>1)x-=1;if(x<0.16666666666666666)return C+(F-C)*6*x;if(x<0.5)return F;if(x<0.6666666666666666)return C+(F-C)*(0.6666666666666666-x)*6;return C},w=f<0.5?f*(1+o):f+o-f*o,L=2*f-w,H=(n%360+360)%360/360;c=E(L,w,H+0.3333333333333333),m=E(L,w,H),r=E(L,w,H-0.3333333333333333)}let M=new y(c*255,m*255,r*255,i);return M.hslCached={h:(n%360+360)%360,s:o,l:f},M}static black=new y(0,0,0);static white=new y(255,255,255);constructor(n,o,f,i=1){this.r=Q(0,n,255),this.g=Q(0,o,255),this.b=Q(0,f,255),this.a=Q(0,i,1)}get inverse(){return new y(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:n,s:o,l:f}=this._hsl;return y.fromHsl(n,o,1-f,this.a)}get opaque(){return this.a===1?this:new y(this.r,this.g,this.b,1)}contrasting(n=1){return this.opaque.blend(this.brightness>0.5?y.black:y.white,n)}get rgb(){let{r:n,g:o,b:f}=this;return`rgb(${n.toFixed(0)},${o.toFixed(0)},${f.toFixed(0)})`}get rgba(){let{r:n,g:o,b:f,a:i}=this;return`rgba(${n.toFixed(0)},${o.toFixed(0)},${f.toFixed(0)},${i.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}hslCached;get _hsl(){if(this.hslCached==null)this.hslCached=new uo(this.r,this.g,this.b);return this.hslCached}get hsl(){let{h:n,s:o,l:f}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(o*100).toFixed(0)}% ${(f*100).toFixed(0)}%)`}get hsla(){let{h:n,s:o,l:f}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(o*100).toFixed(0)}% ${(f*100).toFixed(0)}% / ${(this.a*100).toFixed(0)}%)`}get mono(){let n=this.brightness*255;return new y(n,n,n)}get brightness(){return zf(this.r,this.g,this.b)}get html(){return this.toString()}toString(){return this.a===1?"#"+p(this.r)+p(this.g)+p(this.b):"#"+p(this.r)+p(this.g)+p(this.b)+p(Math.floor(255*this.a))}brighten(n){let{h:o,s:f,l:i}=this._hsl,c=Q(0,i+n*(1-i),1);return y.fromHsl(o,f,c,this.a)}darken(n){let{h:o,s:f,l:i}=this._hsl,c=Q(0,i*(1-n),1);return y.fromHsl(o,f,c,this.a)}saturate(n){let{h:o,s:f,l:i}=this._hsl,c=Q(0,f+n*(1-f),1);return y.fromHsl(o,c,i,this.a)}desaturate(n){let{h:o,s:f,l:i}=this._hsl,c=Q(0,f*(1-n),1);return y.fromHsl(o,c,i,this.a)}rotate(n){let{h:o,s:f,l:i}=this._hsl,c=(o+360+n)%360;return y.fromHsl(c,f,i,this.a)}opacity(n){let{h:o,s:f,l:i}=this._hsl;return y.fromHsl(o,f,i,n)}swatch(){return console.log(`%c      %c ${this.html}, ${this.rgba}`,`background-color: ${this.html}`,"background-color: transparent"),this}blend(n,o){return new y(R(this.r,n.r,o),R(this.g,n.g,o),R(this.b,n.b,o),R(this.a,n.a,o))}static blendHue(n,o,f){let i=(o-n+720)%360;if(i<180)return n+f*i;else return n-(360-i)*f}mix(n,o){let f=this._hsl,i=n._hsl;return y.fromHsl(f.s===0?i.h:i.s===0?f.h:y.blendHue(f.h,i.h,o),R(f.s,i.s,o),R(f.l,i.l,o),R(this.a,n.a,o))}colorMix(n,o){return y.fromCss(`color-mix(in hsl, ${this.html}, ${n.html} ${(o*100).toFixed(0)}%)`)}static computedColorStylesheet=null;static computedColors=new Map;static recomputeQueued=!1;static registerComputedColor(n,o,f,i){if(!y.computedColors.has(n))y.computedColors.set(n,{varName:o,scale:f,method:i}),y.queueRecompute()}static queueRecompute(){if(y.recomputeQueued)return;y.recomputeQueued=!0,queueMicrotask(()=>{y.recomputeQueued=!1,y.recomputeColors()})}static recomputeColors(){if(y.computedColors.size===0)return;let n=[];for(let[f,{varName:i,scale:c,method:m}]of y.computedColors)try{let r=y.fromVar(i),M;switch(m){case"b":M=c>0?r.brighten(c):r.darken(-c);break;case"s":M=c>0?r.saturate(c):r.desaturate(-c);break;case"h":M=r.rotate(c*100);break;case"o":M=r.opacity(c);break;default:continue}n.push(`  ${f}: ${M.rgba};`)}catch(r){}if(n.length===0)return;let o=`:root {
${n.join(`
`)}
}`;if(y.computedColorStylesheet===null)y.computedColorStylesheet=document.createElement("style"),y.computedColorStylesheet.id="tosijs-computed-colors",document.head.append(y.computedColorStylesheet);y.computedColorStylesheet.textContent=o}}var Jn=new Set,So=!1;function Wf(){if(!So)So=!0,Jn.add(()=>y.queueRecompute())}function Bo(n){return Jn.add(n),()=>Jn.delete(n)}function df(){Wf();for(let n of Jn)n()}function Io(n,o){let f=s(o),i=T.style(V(f));i.id=n,document.head.append(i);let c=Y(o);if(c!==void 0)a(c,()=>{i.textContent=V(s(o)),df()})}var Uf=/^(animation-iteration-count|column-count|flex(-grow|-shrink)?|font-weight|line-height|opacity|order|orphans|scale|tab-size|widows|z-index|zoom)$/,io=(n,o)=>{if(typeof o==="number"&&!Uf.test(n))o=`${o}px`;if(n.startsWith("_"))if(n.startsWith("__"))n="--"+n.substring(2),o=`var(${n}-default, ${o})`;else n="--"+n.substring(1);return{prop:n,value:String(o)}},qf=(n,o,f)=>{if(f===void 0)return"";if(f instanceof y)f=f.html;let i=io(o,f);return`${n}  ${i.prop}: ${i.value};`},Vo=(n,o,f="")=>{let i=$(n);if(typeof o==="object"&&!(o instanceof y)){let c=Object.keys(o).map((m)=>Vo(m,o[m],`${f}  `)).join(`
`);return`${f}  ${n} {
${c}
${f}  }`}else return qf(f,i,o)},V=(n,o="")=>{return Object.keys(n).map((i)=>{let c=n[i];if(typeof c==="string"){if(i==="@import")return`@import url('${c}');`;throw Error("top-level string value only allowed for `@import`")}let m=Object.keys(c).map((r)=>Vo(r,c[r])).join(`
`);return`${o}${i} {
${m}
}`}).join(`

`)},bo=(n)=>{O("initVars","initVars is deprecated. Just use _ and __ prefixes instead.");let o={};for(let f of Object.keys(n)){let i=n[f],c=$(f);o[`--${c}`]=typeof i==="number"&&i!==0?String(i)+"px":i}return o},Po=(n)=>{let o={};for(let f of Object.keys(n)){let i=n[f];if(i instanceof y)o[f]=i.inverseLuminance;else if(typeof i==="string"&&i.match(/^(#[0-9a-fA-F]{3}|rgba?\(|hsla?\()/))o[f]=y.fromCss(i).inverseLuminance}return o},rn=new Proxy({},{get(n,o){if(n[o]===void 0){let f="--"+$(o);n[o]=(i)=>`var(${f}, ${i})`}return n[o]}}),Zn=new Proxy({},{get(n,o){if(o==="default")return rn;if(n[o]==null){o=$(o);let[,f,,i,c,m]=o.match(/^([-\w]*?)((_)?(\d+)(\w?))?$/)||["",o],r=`--${f}`;if(c!=null){let M=i==null?Number(c)/100:-Number(c)/100;switch(m){case"b":case"s":case"h":case"o":{let E=`--${o}`;y.registerComputedColor(E,r,M,m),n[o]=`var(${E})`}break;case"":n[o]=`calc(var(${r}) * ${M})`;break;default:throw console.error(m),Error(`Unrecognized method ${m} for css variable ${r}`)}}else n[o]=`var(${r})`}return n[o]}});function co(){let n=(o)=>typeof matchMedia<"u"&&matchMedia(o).matches;return{colorScheme:n("(prefers-color-scheme: dark)")?"dark":"light",contrast:n("(prefers-contrast: more)")?"more":n("(prefers-contrast: less)")?"less":n("(prefers-contrast: custom)")?"custom":"no-preference",reducedMotion:n("(prefers-reduced-motion: reduce)"),reducedTransparency:n("(prefers-reduced-transparency: reduce)"),forcedColors:n("(forced-colors: active)")}}function _o(n){if(typeof matchMedia>"u")return()=>{};let o=["(prefers-color-scheme: dark)","(prefers-contrast: more)","(prefers-contrast: less)","(prefers-contrast: custom)","(prefers-reduced-motion: reduce)","(prefers-reduced-transparency: reduce)","(forced-colors: active)"],f=()=>n(co()),i=o.map((c)=>matchMedia(c));for(let c of i)c.addEventListener("change",f);return()=>{for(let c of i)c.removeEventListener("change",f)}}var ho="http://www.w3.org/1998/Math/MathML",po="http://www.w3.org/2000/svg";var Qn={},No=(n,o,f)=>{let i=io($(o),f);if(i.prop.startsWith("--"))n.style.setProperty(i.prop,i.value);else n.style[o]=i.value},Of=(n)=>{return{toDOM(o,f){No(o,n,f)}}},eo=(n,o,f)=>{if(o==="style")if(typeof f==="object")for(let i of Object.keys(f))if(Y(f[i]))k(n,f[i],Of(i));else No(n,i,f[i]);else n.setAttribute("style",f);else{let i=$(o),c=n.constructor.observedAttributes;if(c?.includes(o)||c?.includes(i))if(typeof f==="boolean")f?n.setAttribute(i,""):n.removeAttribute(i);else n.setAttribute(i,f);else if(n[o]!==void 0){let{MathMLElement:r}=globalThis;if(n instanceof SVGElement||r!==void 0&&n instanceof r)n.setAttribute(o,f);else n[o]=f}else if(i==="class")f.split(" ").forEach((r)=>{n.classList.add(r)});else if(n[i]!==void 0)n[i]=f;else if(typeof f==="boolean")f?n.setAttribute(i,""):n.removeAttribute(i);else n.setAttribute(i,f)}},Af=(n)=>{return{toDOM(o,f){eo(o,n,f)}}},jf=(n,o,f)=>{if(o==="apply")f(n);else if(o.match(/^on[A-Z]/)!=null){let i=o.substring(2).toLowerCase();N(n,i,f)}else if(o==="bind")if((typeof f.binding==="string"?mn[f.binding]:f.binding)!==void 0&&f.value!==void 0)k(n,f.value,f.binding instanceof Function?{toDOM:f.binding}:f.binding);else throw Error("bad binding");else if(o.match(/^bind[A-Z]/)!=null){let i=o.substring(4,5).toLowerCase()+o.substring(5),c=mn[i];if(c!==void 0)k(n,f,c);else throw Error(`${o} is not allowed, bindings.${i} is not defined`)}else if(Y(f))k(n,f,Af(o));else eo(n,o,f)},Eo=(n,...o)=>{if(Qn[n]===void 0){let[c,m]=n.split("|");if(m===void 0)Qn[n]=globalThis.document.createElement(c);else Qn[n]=globalThis.document.createElementNS(m,c)}let f=Qn[n].cloneNode(),i={};for(let c of o)if(c instanceof Element||c instanceof DocumentFragment||typeof c==="string"||typeof c==="number")if(f instanceof HTMLTemplateElement)f.content.append(c);else f.append(c);else if(Y(c))f.append(T.span({bindText:c}));else Object.assign(i,c);for(let c of Object.keys(i)){let m=i[c];jf(f,c,m)}return f},mo=(...n)=>{let o=globalThis.document.createDocumentFragment();for(let f of n)o.append(f);return o},T=new Proxy({fragment:mo},{get(n,o){if(o=o.replace(/[A-Z]/g,(f)=>`-${f.toLocaleLowerCase()}`),n[o]===void 0)n[o]=(...f)=>Eo(o,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}}),kn=new Proxy({fragment:mo},{get(n,o){if(n[o]===void 0)n[o]=(...f)=>Eo(`${o}|${po}`,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}}),Gn=new Proxy({fragment:mo},{get(n,o){if(n[o]===void 0)n[o]=(...f)=>Eo(`${o}|${ho}`,...f);return n[o]},set(){throw Error("You may not add new properties to elements")}});var Kf=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],Rf=!0,uf=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,Sf=(n)=>uf.test(n),b=(n="",o="")=>{if(n==="")return o;else if(o.match(/^\d+$/)!==null||o.includes("="))return`${n}[${o}]`;else return`${n}.${o}`},vo={};function ro(n,o){if(n!==null&&(typeof n==="object"||typeof n==="function"))return n;return new Proxy(vo,P(o,!0))}var zn=()=>new Proxy({},P("^",!0)),go=!1;function e(){if(!go)console.warn("xinValue, tosiValue, xinPath, tosiPath, etc. are deprecated. Use value, path, observe, bind, on, binding, listBinding instead."),go=!0}var to=(n)=>{return n===vo},P=(n,o)=>({get(f,i){if(to(f)){let M=()=>j(nn,n);switch(i){case"path":return n;case"value":return M();case"valueOf":case"toJSON":return()=>M();case Symbol.toPrimitive:return(E)=>{let w=M();if(E==="number")return Number(w);if(E==="string")return String(w);return w};case"toString":return()=>String(M());case"observe":return(E)=>{let w=I(n,E);return()=>K(w)};case"on":return(E,w)=>fn()(E,w,M());case"bind":return(E,w,L)=>{on()(E,n,w,L)};case"binding":return(E)=>({bind:{value:n,binding:E}});case"listBinding":return(E=({span:L})=>L({bindText:"^"}),w={})=>[{bindList:{value:n,...w}},T.template(E(T,zn()))];case q:case"xinValue":case"tosiValue":return e(),M();case J:case"xinPath":case"tosiPath":return e(),n;case Vn:case"tosiObserve":return e(),(E)=>{let w=I(n,E);return()=>K(w)};case Pn:case"tosiOn":return e(),(E,w)=>fn()(E,w,M());case bn:case"tosiBind":return e(),(E,w,L)=>{on()(E,n,w,L)};case"tosiBinding":return e(),(E)=>({bind:{value:n,binding:E}});case"tosiListBinding":return e(),(E=({span:L})=>L({bindText:"^"}),w={})=>[{bindList:{value:n,...w}},T.template(E(T,zn()))]}if(typeof i==="string"&&/^\d+$/.test(i)){let E=M();if(typeof E==="string")return E[parseInt(i,10)]}if(i==="length"){let E=M();if(typeof E==="string")return E.length}return}if(o&&!(i in f))switch(i){case"path":return n;case"value":return f.valueOf?f.valueOf():f;case"valueOf":case"toJSON":return()=>f.valueOf?f.valueOf():f;case"observe":return(M)=>{let E=I(n,M);return()=>K(E)};case"on":return(M,E)=>fn()(M,E,s(f));case"bind":return(M,E,w)=>{on()(M,n,E,w)};case"binding":return(M)=>({bind:{value:n,binding:M}});case"listBinding":return(M=({span:w})=>w({bindText:"^"}),E={})=>[{bindList:{value:n,...E}},T.template(M(T,zn()))]}switch(i){case J:case"xinPath":case"tosiPath":return n;case q:case"xinValue":case"tosiValue":return f.valueOf?f.valueOf():f;case Vn:case"xinObserve":case"tosiObserve":return(M)=>{let E=I(n,M);return()=>K(E)};case Pn:case"xinOn":case"tosiOn":return(M,E)=>fn()(M,E,s(f));case bn:case"xinBind":case"tosiBind":return(M,E,w)=>{on()(M,n,E,w)};case"tosiBinding":return(M)=>({bind:{value:n,binding:M}});case"tosiListBinding":return(M=({span:w})=>w({bindText:"^"}),E={})=>[{bindList:{value:n,...E}},T.template(M(T,zn()))]}if(typeof i==="symbol")return f[i];let c=Object.getOwnPropertyDescriptor(f,i);if(c&&!c.configurable&&!c.writable&&"value"in c)return c.value;let m=i,r=m.match(/^([^.[]+)\.(.+)$/)??m.match(/^([^\]]+)(\[.+)/)??m.match(/^(\[[^\]]+\])\.(.+)$/)??m.match(/^(\[[^\]]+\])\[(.+)$/);if(r!==null){let[,M,E]=r,w=b(n,M),L=j(f,M);return L!==null&&typeof L==="object"?new Proxy(L,P(w,o))[E]:L}if(m.startsWith("[")&&m.endsWith("]"))m=m.substring(1,m.length-1);if(!Array.isArray(f)&&f[m]!==void 0||Array.isArray(f)&&m.includes("=")){let M;if(m.includes("=")){let[E,w]=m.split("=");M=f.find((L)=>`${j(L,E)}`===w)}else M=f[m];if(M instanceof Object){let E=b(n,m);return new Proxy(M instanceof Function?M.bind(f):M,P(E,o))}else return o?ro(M,b(n,m)):M}else if(Array.isArray(f)){let M=f[m];return typeof M==="function"?(...E)=>{let w=E.map((H)=>s(H)),L=M.apply(f,w);if(Kf.includes(m))B(n);if(L!=null&&typeof L==="object"){if(m==="find"||m==="findLast"||m==="at"){let H=f.indexOf(L);if(H!==-1)return new Proxy(L,P(b(n,String(H)),o))}}return L}:typeof M==="object"?new Proxy(M,P(b(n,m),o)):o?ro(M,b(n,m)):M}else return o?ro(f[m],b(n,m)):f[m]},set(f,i,c){c=s(c);let m=i===q||i==="xinValue"||i==="tosiValue"||i==="value"&&(to(f)||o),r=m?n:b(n,i);if(Rf&&!Sf(r))throw Error(`setting invalid path ${r}`);if(s(X[r])!==c&&ko(nn,r,c)){B(r);let E=n.match(/^(.+)\[(\d+)\]$/);if(E!==null){let[,w,L]=E,H=parseInt(L,10),C=m?"":`.${i}`,F=zo(w,H,f,C);for(let x of F)B(x)}}return!0}}),a=(n,o)=>{let f=typeof o==="function"?o:X[o];if(typeof f!=="function")throw Error(`observe expects a function or path to a function, ${o} is neither`);return I(n,f)},X=new Proxy(nn,P("",!1));Uo(X);var g=new Proxy(nn,P("",!0));var Bf=16,If=100;function lo(n,o){let f=Array.from(n.querySelectorAll(u));if(n.matches(u))f.unshift(n);for(let i of f){let c=U.get(i);for(let m of c){if(m.path.startsWith("^"))m.path=`${o}${m.path.substring(1)}`;if(m.binding.toDOM!=null)m.binding.toDOM(i,X[m.path])}}}class ao{boundElement;listTop;listBottom;template;options;itemToElement;array=[];_update;_previousSlice;static filterBoundObservers=new WeakMap;constructor(n,o,f={}){if(this.boundElement=n,this.itemToElement=new WeakMap,f.idPath!=null){let i=Y(o);if(i!=null)To(i,f.idPath)}if(n.children.length!==1)throw Error("ListBinding expects an element with exactly one child element");if(n.children[0]instanceof HTMLTemplateElement){let i=n.children[0];if(i.content.children.length!==1)throw Error("ListBinding expects a template with exactly one child element");this.template=h(i.content.children[0])}else this.template=n.children[0],this.template.remove();if(this.options=f,this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.listTop.classList.add("virtual-list-padding"),this.listBottom.classList.add("virtual-list-padding"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),this.boundElement[t]=this,f.virtual!=null)if(cn.observe(this.boundElement),this._update=En(()=>{this.update(this.array,!0)},Bf),this.boundElement.addEventListener("resize",this._update),f.virtual.scrollContainer==="window")window.addEventListener("scroll",this._update),window.addEventListener("resize",this._update);else this.boundElement.addEventListener("scroll",this._update)}filteredArray(){let{hiddenProp:n,visibleProp:o}=this.options,f=this.array;if(n!==void 0)f=f.filter((i)=>i[n]!==!0);if(o!==void 0)f=f.filter((i)=>i[o]===!0);if(this.options.filter&&this.needle!==void 0)f=this.options.filter(f,this.needle);return f}visibleSlice(){let{virtual:n}=this.options,o=this.filteredArray(),f=0,i=o.length-1,c=0,m=0;if(n!=null&&this.boundElement instanceof HTMLElement){let r=this.boundElement.offsetWidth,M=n.scrollContainer==="window",E,w;if(M){E=window.innerHeight;let G=this.boundElement.getBoundingClientRect();w=Math.max(0,-G.top)}else E=this.boundElement.offsetHeight,w=this.boundElement.scrollTop;let L=n.width!=null?Math.max(1,Math.floor(r/n.width)):n.visibleColumns??1,H=Math.ceil(E/n.height)+(n.rowChunkSize||1),C=Math.ceil(o.length/L),F=L*H,x=Math.floor(w/n.height);if(x>C-H+1)x=Math.max(0,C-H+1);if(n.rowChunkSize)x-=x%n.rowChunkSize;f=x*L,i=f+F-1,c=x*n.height,m=Math.max((C-H)*n.height-c,0)}return{items:o,firstItem:f,lastItem:i,topBuffer:c,bottomBuffer:m}}needle;filter=En((n)=>{if(this.needle!==n)this.needle=n,this.update(this.array)},If);update(n,o){if(n==null)n=[];this.array=n;let{hiddenProp:f,visibleProp:i}=this.options,c=Y(n),m=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",m.items.length===0);let r=this._previousSlice,{firstItem:M,lastItem:E,topBuffer:w,bottomBuffer:L}=m;if(f===void 0&&i===void 0&&o===!0&&r!=null&&M===r.firstItem&&E===r.lastItem&&w===r.topBuffer&&L===r.bottomBuffer)return;this._previousSlice=m;let H=0,C=0,F=0;for(let D of Array.from(this.boundElement.children)){if(D===this.listTop||D===this.listBottom)continue;let z=D[sn];if(z==null)D.remove();else{let Z=m.items.indexOf(z);if(Z<M||Z>E)D.remove(),this.itemToElement.delete(z),H++}}this.listTop.style.height=String(w)+"px",this.listBottom.style.height=String(L)+"px";let x=[],{idPath:G}=this.options;for(let D=M;D<=E;D++){let z=m.items[D];if(z===void 0)continue;let Z=this.itemToElement.get(s(z));if(Z==null){if(F++,Z=h(this.template),typeof z==="object")this.itemToElement.set(s(z),Z),Z[sn]=s(z);if(this.boundElement.insertBefore(Z,this.listBottom),G!=null){let Kn=z[G],yf=`${c}[${G}=${Kn}]`;lo(Z,yf)}else{let Kn=`${c}[${D}]`;lo(Z,Kn)}}x.push(Z)}let Tn=null;for(let D of x){if(D.previousElementSibling!==Tn)if(C++,Tn?.nextElementSibling!=null)this.boundElement.insertBefore(D,Tn.nextElementSibling);else this.boundElement.insertBefore(D,this.listBottom);Tn=D}if(S.perf)console.log(c,"updated",{removed:H,created:F,moved:C})}}var v=(n,o,f)=>{let i=n[t];if(o&&i===void 0)i=new ao(n,o,f),n[t]=i;return i},Wn=(n)=>{let o;while(!(o=n[sn])&&n&&n.parentElement)n=n.parentElement;return o?{element:n,item:o}:void 0},dn=(n)=>{let o=Wn(n);return o?o.item:void 0},nf=(n)=>{let o=Wn(n);if(!o)return console.error("deleteListItem failed, element is not part of a list instance",n),!1;let f=v(o.element.parentElement);if(!f.options.idPath)return console.error("deleteListItem failed, list binding has no idPath",n.parentElement,f),!1;let i=f.array.indexOf(o.item);if(i>-1)return f.array.splice(i,1),!0;return!1},Vf={start:"start",middle:"center",end:"end",nearest:"nearest"},of=(n,o,f={})=>{let i=v(n);if(i==null)return console.error("scrollListItemIntoView failed, element has no list binding",n),!1;let{position:c="middle"}=f,m=i.filteredArray(),r=s(o)??o,M=m.indexOf(r);if(M===-1)return console.error("scrollListItemIntoView failed, item not found in list",o),!1;let{virtual:E}=i.options;if(E!=null&&n instanceof HTMLElement){let w=E.width!=null?Math.max(1,Math.floor(n.offsetWidth/E.width)):E.visibleColumns??1,H=Math.floor(M/w)*E.height,C=E.scrollContainer==="window",F=C?window.innerHeight:n.offsetHeight,x;switch(c){case"start":x=H;break;case"end":x=H-F+E.height;break;case"nearest":{let G=C?Math.max(0,-n.getBoundingClientRect().top):n.scrollTop;if(H<G)x=H;else if(H+E.height>G+F)x=H-F+E.height;else return!0;break}default:x=H-(F-E.height)/2}if(x=Math.max(0,x),C){let G=n.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:G+x,behavior:"smooth"})}else n.scrollTo({top:x,behavior:"smooth"})}else{let w=i.itemToElement.get(r);if(w==null)return console.error("scrollListItemIntoView failed, no DOM element found for item",o),!1;w.scrollIntoView({block:Vf[c]??"center",behavior:"smooth"})}return!0};var{document:Mn,MutationObserver:ff}=globalThis,Un=(n,o)=>{let f=U.get(n);if(f==null)return;for(let i of f){let{binding:c,options:m}=i,{path:r}=i,{toDOM:M}=c;if(M!=null){if(r.startsWith("^")){let E=dn(n);if(E!=null&&E[J]!=null)r=i.path=`${E[J]}${r.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${r}`,n,"is not part of a list"),Error(`Cannot resolve relative binding ${r}`)}if(o==null||r.startsWith(o))M(n,Dn()[r],m)}}};if(ff!=null)new ff((o)=>{o.forEach((f)=>{Array.from(f.addedNodes).forEach((i)=>{if(i instanceof Element)Array.from(i.querySelectorAll(u)).forEach((c)=>Un(c))})})}).observe(Mn.body,{subtree:!0,childList:!0});I(()=>!0,(n)=>{let o=Array.from(Mn.querySelectorAll(u));for(let f of o)Un(f,n)});var cf=(n)=>{let o=n.target?.closest(u);while(o!=null){let f=U.get(o);for(let i of f){let{binding:c,path:m}=i,{fromDOM:r}=c;if(r!=null){let M;try{M=r(o,i.options)}catch(E){throw console.error("Cannot get value from",o,"via",i),Error("Cannot obtain value fromDOM")}if(M!=null){let E=Dn(),w=E[m];if(w==null)E[m]=M;else{let L=w[J]!=null?w[q]:w,H=M[J]!=null?M[q]:M;if(L!==H)E[m]=H}}}}o=o.parentElement.closest(u)}};if(globalThis.document!=null)Mn.body.addEventListener("change",cf,!0),Mn.body.addEventListener("input",cf,!0);function k(n,o,f,i){if(n instanceof DocumentFragment)throw Error("bind cannot bind to a DocumentFragment");let c;if(typeof o==="object"&&o[J]===void 0&&i===void 0){let{value:M}=o;c=typeof M==="string"?M:M[J],i=o,delete i.value}else c=typeof o==="string"?o:o[J];if(c==null)throw Error("bind requires a path or object with xin Proxy");let{toDOM:m}=f;n.classList?.add(Sn);let r=U.get(n);if(r==null)r=[],U.set(n,r);if(r.push({path:c,binding:f,options:i}),m!=null&&!c.startsWith("^"))B(c);if(i?.filter&&i?.needle)k(n,i.needle,{toDOM(M,E){console.log({needle:E}),M[t]?.filter(E)}});return n}var Ef=new Set,bf=(n)=>{let o=n?.target?.closest(In),f=!1,i=new Proxy(n,{get(m,r){if(r==="stopPropagation")return()=>{n.stopPropagation(),f=!0};else{let M=m[r];return typeof M==="function"?M.bind(m):M}}}),c=new Set;while(!f&&o!=null){let r=_.get(o)[n.type]||c;for(let M of r){if(typeof M==="function")M(i);else{let E=Dn()[M];if(typeof E==="function")E(i);else throw Error(`no event handler found at path ${M}`)}if(f)continue}o=o.parentElement!=null?o.parentElement.closest(In):null}};function N(n,o,f){let i=_.get(n);if(n.classList.add(Bn),i==null)i={},_.set(n,i);if(!i[o])i[o]=new Set;if(i[o].add(f),!Ef.has(o))Ef.add(o),Mn.body.addEventListener(o,bf,!0);return()=>{i[o].delete(f)}}qo(k,N);function qn(n,o){if(!n.internals)return;let f={},i="";if(n.hasAttribute("required")&&o==="")f.valueMissing=!0,i="Please fill out this field.";let c=n.getAttribute("minlength");if(c&&o.length<parseInt(c,10))f.tooShort=!0,i=`Please use at least ${c} characters.`;let m=n.getAttribute("maxlength");if(m&&o.length>parseInt(m,10))f.tooLong=!0,i=`Please use no more than ${m} characters.`;let r=n.getAttribute("pattern");if(r&&o!=="")try{if(!new RegExp(`^(?:${r})$`).test(o))f.patternMismatch=!0,i="Please match the requested format."}catch{}if(Object.keys(f).length>0)n.internals.setValidity(f,i,n);else n.internals.setValidity({})}var Pf=0;function Mo(){return`custom-elt${(Pf++).toString(36)}`}var mf=0,wo=null;function _f(){if(wo===null)wo=new MutationObserver((n)=>{let o=new Set;for(let f of n)if(f.type==="attributes"&&f.target instanceof W){let i=f.target,c=fo(f.attributeName);if(i._legacyTrackedAttrs?.has(c))o.add(i)}for(let f of o)f.queueRender(!1)});return wo}var wn={};function hf(n,o){let f=wn[n],i=V(o).replace(/:host\(([^)]+)\)/g,`${n}$1`).replace(/:host\b/g,n);wn[n]=f?f+`
`+i:i}function pf(n){if(wn[n])document.head.append(T.style({id:n+"-component"},wn[n]));delete wn[n]}class W extends HTMLElement{static elements=T;static _elementCreator;static initAttributes;static formAssociated;internals;get validity(){return this.internals?.validity}get validationMessage(){return this.internals?.validationMessage??""}get willValidate(){return this.internals?.willValidate??!1}checkValidity(){return this.internals?.checkValidity()??!0}reportValidity(){return this.internals?.reportValidity()??!0}setCustomValidity(n){if(this.internals)if(n)this.internals.setValidity({customError:!0},n);else this.internals.setValidity({})}setValidity(n,o,f){this.internals?.setValidity(n,o,f)}setFormValue(n,o){this.internals?.setFormValue(n,o)}static get observedAttributes(){let n=this.initAttributes;if(n)return["hidden",...Object.keys(n).map($)];return["hidden"]}instanceId;styleNode;static styleSpec;static styleNode;content=T.slot();isSlotted;static _tagName=null;static get tagName(){return this._tagName}_legacyTrackedAttrs;_attrValues;_valueChanged=!1;static StyleNode(n){return console.warn("StyleNode is deprecated, just assign static styleSpec: XinStyleSheet to the class directly"),T.style(V(n))}static elementCreator(n={}){let o=this;if(o._elementCreator==null){let{tag:f,styleSpec:i}=n,c=n!=null?f:null;if(c==null)if(typeof o.name==="string"&&o.name!==""){if(c=$(o.name),c.startsWith("-"))c=c.slice(1)}else c=Mo();if(customElements.get(c)!=null)console.warn(`${c} is already defined`);if(c.match(/\w+(-\w+)+/)==null)console.warn(`${c} is not a legal tag for a custom-element`),c=Mo();while(customElements.get(c)!==void 0)c=Mo();if(o._tagName=c,i!==void 0)hf(c,i);window.customElements.define(c,this,n),o._elementCreator=T[c]}return o._elementCreator}initAttributes(...n){if(O("initAttributes","initAttributes() is deprecated. Use static initAttributes = { ... } instead."),!this._legacyTrackedAttrs)this._legacyTrackedAttrs=new Set;for(let c of n)this._legacyTrackedAttrs.add(c);_f().observe(this,{attributes:!0});let f={},i={};n.forEach((c)=>{f[c]=d(this[c]);let m=$(c);Object.defineProperty(this,c,{enumerable:!1,get(){if(typeof f[c]==="boolean")return this.hasAttribute(m);else if(this.hasAttribute(m))return typeof f[c]==="number"?parseFloat(this.getAttribute(m)):this.getAttribute(m);else if(i[c]!==void 0)return i[c];else return f[c]},set(r){if(typeof f[c]==="boolean"){if(r!==this[c]){if(r)this.setAttribute(m,"");else this.removeAttribute(m);this.queueRender()}}else if(typeof f[c]==="number"){if(r!==parseFloat(this[c]))this.setAttribute(m,r),this.queueRender()}else if(typeof r==="object"||`${r}`!==`${this[c]}`){if(r===null||r===void 0||typeof r==="object")this.removeAttribute(m);else this.setAttribute(m,r);this.queueRender(),i[c]=r}}})})}initValue(){let n=Object.getOwnPropertyDescriptor(this,"value");if(n===void 0||n.get!==void 0||n.set!==void 0)return;let o=this.hasAttribute("value")?this.getAttribute("value"):d(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get(){return o},set(f){if(o!==f)o=f,this._valueChanged=!0,this.queueRender(!0)}})}_parts;get parts(){let n=this.shadowRoot!=null?this.shadowRoot:this;if(this._parts==null)this._parts=new Proxy({},{get(o,f){if(o[f]===void 0){let i=n.querySelector(`[part="${f}"]`);if(i==null)i=n.querySelector(f);if(i==null)throw Error(`elementRef "${f}" does not exist!`);i.removeAttribute("data-ref"),o[f]=i}return o[f]}});return this._parts}attributeChangedCallback(n,o,f){let i=fo(n);if(!this._legacyTrackedAttrs?.has(i))this.queueRender(!1)}constructor(){super();if(mf+=1,this.constructor.formAssociated&&typeof this.attachInternals==="function"&&!this.internals)this.internals=this.attachInternals();let n=this.constructor.initAttributes;if(n)this._setupAttributeAccessors(n);this.instanceId=`${this.tagName.toLocaleLowerCase()}-${mf}`,this._value=d(this.defaultValue)}_setupAttributeAccessors(n){if(!this._attrValues)this._attrValues=new Map;for(let o of Object.keys(n)){let f=$(o),i=n[o];if(o==="value"){console.warn(`${this.tagName}: 'value' cannot be an attribute. Use the Component value property instead.`);continue}if(typeof i==="object"&&i!==null){console.warn(`${this.tagName}: initAttributes.${o} is an object. Use a regular property instead.`);continue}let c=this,m=!1;while(c){let r=Object.getOwnPropertyDescriptor(c,o);if(r){if(!r.configurable||r.get||r.set){m=!0;break}break}c=Object.getPrototypeOf(c)}if(m)continue;Object.defineProperty(this,o,{enumerable:!1,get:()=>{if(typeof i==="boolean")return this.hasAttribute(f);else if(this.hasAttribute(f))return typeof i==="number"?parseFloat(this.getAttribute(f)):this.getAttribute(f);else if(this._attrValues.has(o))return this._attrValues.get(o);else return i},set:(r)=>{if(typeof i==="boolean"){if(r!==this[o]){if(r)this.setAttribute(f,"");else this.removeAttribute(f);this.queueRender()}}else if(typeof i==="number"){if(r!==parseFloat(this[o]))this.setAttribute(f,r),this.queueRender()}else if(typeof r==="object"||`${r}`!==`${this[o]}`){if(r===null||r===void 0||typeof r==="object")this.removeAttribute(f);else this.setAttribute(f,r);this.queueRender(),this._attrValues.set(o,r)}}})}}connectedCallback(){if(pf(this.constructor.tagName),this.hydrate(),this.role!=null)this.setAttribute("role",this.role);if(this.constructor.formAssociated&&!this.hasAttribute("tabindex"))this.setAttribute("tabindex","0");if(this.onResize!==void 0){if(cn.observe(this),this._onResize==null)this._onResize=this.onResize.bind(this);this.addEventListener("resize",this._onResize)}if(this.value!=null&&this.getAttribute("value")!=null)this._value=this.getAttribute("value");if(this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this.queueRender()}disconnectedCallback(){cn.unobserve(this)}formResetCallback(){if(this.value!==void 0)this.value=this.defaultValue??""}formDisabledCallback(n){if(n)this.setAttribute("disabled","");else this.removeAttribute("disabled")}formStateRestoreCallback(n){if(this.value!==void 0&&typeof n==="string")this.value=n}_changeQueued=!1;_renderQueued=!1;queueRender(n=!1){if(!this._hydrated)return;if(!this._changeQueued)this._changeQueued=n;if(!this._renderQueued)this._renderQueued=!0,requestAnimationFrame(()=>{if(this._changeQueued){if(no(this,"change"),this.internals&&this.value!==void 0)this.internals.setFormValue(this.value)}this._changeQueued=!1,this._renderQueued=!1,this.render()})}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();let n=typeof this.content!=="function",o=typeof this.content==="function"?this.content(T):this.content,{styleSpec:f}=this.constructor,{styleNode:i}=this.constructor;if(f)i=this.constructor.styleNode=T.style(V(f)),delete this.constructor.styleNode;if(this.styleNode)console.warn(this,"styleNode is deprecrated, use static styleNode or statc styleSpec instead"),i=this.styleNode;if(i){let c=this.attachShadow({mode:"open"});c.appendChild(i.cloneNode(!0)),oo(c,o,n)}else if(o!==null){let c=Array.from(this.childNodes);oo(this,o,n),this.isSlotted=this.querySelector("slot,xin-slot")!==void 0;let m=Array.from(this.querySelectorAll("slot"));if(m.length>0)m.forEach(yo.replaceSlot);if(c.length>0){let r={"":this};Array.from(this.querySelectorAll("xin-slot")).forEach((M)=>{r[M.name]=M}),c.forEach((M)=>{let E=r[""],w=M instanceof Element?r[M.slot]:E;(w!==void 0?w:E).append(M)})}}this._hydrated=!0}}render(){if(this._valueChanged&&this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this._valueChanged=!1}validateValue(){if(!this.internals||this.value===void 0)return;let n=typeof this.value==="string"?this.value:String(this.value);qn(this,n)}}class yo extends W{static initAttributes={name:""};content=null;static replaceSlot(n){let o=document.createElement("xin-slot");if(n.name!=="")o.setAttribute("name",n.name);n.replaceWith(o)}}var Hc=yo.elementCreator({tag:"xin-slot"});var rf=(n=()=>!0)=>{let o=localStorage.getItem("xin-state");if(o!=null){let i=JSON.parse(o);for(let c of Object.keys(i).filter(n))if(X[c]!==void 0)Object.assign(X[c],i[c]);else X[c]=i[c]}let f=Yn(()=>{let i={},c=s(X);for(let m of Object.keys(c).filter(n))i[m]=c[m];localStorage.setItem("xin-state",JSON.stringify(i)),console.log("xin state saved to localStorage")},500);a(n,f)};var On="1.3.5";function yn(n){return Object.assign(g,n),g}function Ln(n){return O("boxedProxy","boxedProxy is deprecated, please use tosi() instead"),yn(n)}function An(n,o=!1){if(o)return O("xinProxy-boxed","xinProxy(..., true) is deprecated; use tosi(...) instead"),Ln(n);return Object.keys(n).forEach((f)=>{X[f]=n[f]}),X}var Nf={};async function xn(n,o){let{type:f,styleSpec:i}=await o(n,{Color:y,Component:W,elements:T,svgElements:kn,mathML:Gn,varDefault:rn,vars:Zn,xin:X,boxed:g,xinProxy:An,boxedProxy:Ln,tosi:yn,makeComponent:xn,bind:k,on:N,version:On}),c={type:f,creator:f.elementCreator({tag:n,styleSpec:i})};return Nf[n]=c,c}var Lo={},ef=(n)=>import(n);class Hn extends W{static initAttributes={tag:"anon-elt",src:"",property:"default"};loaded;blueprintLoaded=(n)=>{};async packaged(){let{tag:n,src:o,property:f}=this,i=`${n}.${f}:${o}`;if(!this.loaded){if(Lo[i]===void 0)Lo[i]=ef(o).then((c)=>{let m=c[f];return xn(n,m)});else console.log(`using cached ${n} with signature ${i}`);this.loaded=await Lo[i],this.blueprintLoaded(this.loaded)}return this.loaded}}var Mf=Hn.elementCreator({tag:"xin-blueprint",styleSpec:{":host":{display:"none"}}});class jn extends W{allLoaded=()=>{};constructor(){super()}async load(){let o=Array.from(this.querySelectorAll(Hn.tagName)).filter((f)=>f.src).map((f)=>f.packaged());await Promise.all(o),this.allLoaded()}connectedCallback(){super.connectedCallback(),this.load()}}var wf=jn.elementCreator({tag:"xin-loader",styleSpec:{":host":{display:"none"}}});})();

//# debugId=3C190FFF86B8E3AF64756E2164756E21
//# sourceMappingURL=index.js.map
