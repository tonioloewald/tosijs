(()=>{var{defineProperty:Sn,getOwnPropertyNames:To,getOwnPropertyDescriptor:Do}=Object,Yo=Object.prototype.hasOwnProperty;var Jf=new WeakMap,$o=(n)=>{var f=Jf.get(n),o;if(f)return f;if(f=Sn({},"__esModule",{value:!0}),n&&typeof n==="object"||typeof n==="function")To(n).map((E)=>!Yo.call(f,E)&&Sn(f,E,{get:()=>n[E],enumerable:!(o=Do(n,E))||o.enumerable}));return Jf.set(n,f),f};var Jo=(n,f)=>{for(var o in f)Sn(n,o,{get:f[o],enumerable:!0,configurable:!0,set:(E)=>f[o]=()=>E})};var fE={};Jo(fE,{xinValue:()=>Wf,xinProxy:()=>dn,xinPath:()=>zf,xin:()=>Q,warnDeprecated:()=>d,version:()=>Bn,vars:()=>qn,varDefault:()=>Cn,validateAgainstConstraints:()=>Kn,updates:()=>ff,unobserve:()=>S,touchElement:()=>sn,touch:()=>I,tosiValue:()=>F,tosiSetValue:()=>Gf,tosiPath:()=>z,tosi:()=>Dn,throttle:()=>wn,svgElements:()=>Un,settings:()=>P,scrollListItemIntoView:()=>Lo,onThemePreferencesChange:()=>vf,onStylesheetChange:()=>bf,on:()=>a,observe:()=>cn,mathML:()=>jn,makeComponent:()=>$n,invertLuminance:()=>gf,initVars:()=>pf,hotReload:()=>Ho,getThemePreferences:()=>mf,getListItem:()=>On,getListInstance:()=>An,getListBinding:()=>En,getCssVar:()=>Wn,elements:()=>T,deprecated:()=>Zn,deleteListItem:()=>mo,debounce:()=>zn,css:()=>b,boxedProxy:()=>Yn,boxed:()=>k,blueprintLoader:()=>Xo,blueprint:()=>io,bindings:()=>xn,bind:()=>A,StyleSheet:()=>Nf,MoreMath:()=>uf,Component:()=>O,Color:()=>x,BlueprintLoader:()=>Rn,Blueprint:()=>Jn});function s(n){if(n==null||typeof n!=="object")return n;if(n instanceof Set)return new Set(n);else if(Array.isArray(n))return n.map(s);let f={};for(let o in n){let E=n[o];if(n!=null&&typeof n==="object")f[o]=s(E);else f[o]=E}return f}var Vn="-xin-data",u=`.${Vn}`,un="-xin-event",Pn=`.${un}`,r=Symbol.for("xin-path"),B=Symbol.for("xin-value"),_n="xinObserve",bn="xinBind",Nn="xinOn",fn=Symbol("list-binding"),v=Symbol("list-instance"),In=new Map;function Zf(n,f){let o=In.get(n);if(o===void 0)o=new Set,In.set(n,o);o.add(f)}function Qf(n){return In.get(n)}var Ff=new Set;function d(n,f){if(!Ff.has(n))console.warn(f),Ff.add(n)}function Zn(n,f){let o=!1;return(...E)=>{if(!o)console.warn(f),o=!0;return n(...E)}}var z=(n)=>{return n&&n[r]||void 0};function F(n){if(typeof n==="object"&&n!==null){let f=n[B];return f!==void 0?f:n}return n}function Gf(n,f){if(z(n)===void 0)throw Error("tosiSetValue requires a xin or boxed proxy");n[B]=f}var zf=Zn(z,"xinPath is deprecated. Use tosiPath instead."),Wf=Zn(F,"xinValue is deprecated. Use tosiValue instead."),g=new WeakMap,K=new WeakMap;var e=(n)=>{let f=n.cloneNode();if(f instanceof Element){let o=K.get(n),E=g.get(n);if(o!=null)K.set(f,s(o));if(E!=null)g.set(f,s(E))}for(let o of Array.from(n instanceof HTMLTemplateElement?n.content.childNodes:n.childNodes))if(o instanceof Element||o instanceof DocumentFragment)f.appendChild(e(o));else f.appendChild(o.cloneNode());return f};var P={debug:!1,perf:!1};var Fo=(n)=>{try{return JSON.stringify(n)}catch(f){return"{has circular references}"}},hn=(...n)=>Error(n.map(Fo).join(" "));var Zo=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1),Qo=0,Go=()=>(parseInt("10000",36)+ ++Qo).toString(36).slice(-5),zo=()=>Zo()+Go(),gn=Symbol("delete"),rf=Symbol("new-object"),pn=Symbol("automatic-index");function Uf(n){if(n==="")return[];if(Array.isArray(n))return n;else{let f=[];while(n.length>0){let o=n.search(/\[[^\]]+\]/);if(o===-1){f.push(n.split("."));break}else{let E=n.slice(0,o);if(n=n.slice(o),E!=="")f.push(E.split("."));if(o=n.indexOf("]")+1,f.push(n.slice(1,o-1)),n.slice(o,o+1)===".")o+=1;n=n.slice(o)}}return f}}var R=new WeakMap;function jf(n,f){if(R.get(n)===void 0)R.set(n,{});if(R.get(n)[f]===void 0)R.get(n)[f]={};let o=R.get(n)[f];if(f==="_auto_")n.forEach((E,M)=>{if(E[pn]===void 0)E[pn]=zo();o[E[pn]+""]=M});else n.forEach((E,M)=>{o[U(E,f)+""]=M});return o}function Wo(n,f){if(R.get(n)===void 0||R.get(n)[f]===void 0)return jf(n,f);else return R.get(n)[f]}function ko(n,f,o){o=o+"";let E=Wo(n,f)[o];if(E===void 0||U(n[E],f)+""!==o)E=jf(n,f)[o];return E}function qo(n,f,o){if(n[f]===void 0&&o!==void 0)n[f]=o;return n[f]}function Af(n,f,o,E){let M=f!==""?ko(n,f,o):o;if(E===gn)return n.splice(M,1),R.delete(n),Symbol("deleted");else if(E===rf){if(f===""&&n[M]===void 0)n[M]={}}else if(E!==void 0)if(M!==void 0)n[M]=E;else if(f!==""&&U(E,f)+""===o+"")n.push(E),M=n.length-1;else throw Error(`byIdPath insert failed at [${f}=${o}]`);return n[M]}function kf(n){if(!Array.isArray(n))throw hn("setByPath failed: expected array, found",n)}function qf(n){if(n==null||!(n instanceof Object))throw hn("setByPath failed: expected Object, found",n)}function U(n,f){let o=Uf(f),E=n,M,c,L,y;for(M=0,c=o.length;E!==void 0&&M<c;M++){let m=o[M];if(Array.isArray(m))for(L=0,y=m.length;E!==void 0&&L<y;L++){let w=m[L];E=E[w]}else if(E.length===0){if(E=E[Number(m.slice(1))],m[0]!=="=")return}else if(m.includes("=")){let[w,...C]=m.split("=");E=Af(E,w,C.join("="))}else L=parseInt(m,10),E=E[L]}return E}function Of(n,f,o){let E=n;if(f==="")throw Error("setByPath cannot be used to set the root object");let M=Uf(f);while(E!=null&&M.length>0){let c=M.shift();if(typeof c==="string"){let L=c.indexOf("=");if(L>-1){if(L===0)qf(E);else kf(E);let y=c.slice(0,L),m=c.slice(L+1);if(E=Af(E,y,m,M.length>0?rf:o),M.length===0)return!0}else{kf(E);let y=parseInt(c,10);if(M.length>0)E=E[y];else{if(o!==gn){if(E[y]===o)return!1;E[y]=o}else E.splice(y,1);return!0}}}else if(Array.isArray(c)&&c.length>0){qf(E);while(c.length>0){let L=c.shift();if(c.length>0||M.length>0)E=qo(E,L,c.length>0?{}:[]);else{if(o!==gn){if(E[L]===o)return!1;E[L]=o}else{if(!Object.prototype.hasOwnProperty.call(E,L))return!1;delete E[L]}return!0}}}else throw Error(`setByPath failed, bad path ${f}`)}throw Error(`setByPath(${n}, ${f}, ${o}) failed`)}var l={},vn=null,sf=(n)=>{vn=n},Qn=()=>{if(vn===null)throw Error("xin proxy not initialized");return vn},en=null,ln=null,Kf=(n,f)=>{en=n,ln=f},mn=()=>{if(en===null)throw Error("bind not initialized");return en},Ln=()=>{if(ln===null)throw Error("on not initialized");return ln};var Bf=Symbol("observer should be removed"),Gn=[],on=[],tn=!1,an,nf;function ro(n,f,o,E){let M=Qf(n);if(M===void 0)return[];let c=[];for(let L of M){let y=U(o,L);if(y!==void 0)c.push(`${n}[${L}=${y}]${E}`)}return c}class df{description;test;callback;constructor(n,f){let o=typeof f==="string"?`"${f}"`:`function ${f.name}`,E;if(typeof n==="string")this.test=(M)=>typeof M==="string"&&M!==""&&(n.startsWith(M)||M.startsWith(n)),E=`test = "${n}"`;else if(n instanceof RegExp)this.test=n.test.bind(n),E=`test = "${n.toString()}"`;else if(n instanceof Function)this.test=n,E=`test = function ${n.name}`;else throw Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${E}, ${o}`,typeof f==="function")this.callback=f;else throw Error("expect callback to be a path or function");Gn.push(this)}}var ff=async()=>{if(an===void 0)return;await an},Uo=()=>{if(P.perf)console.time("xin async update");let n=Array.from(on);on.length=0,tn=!1;for(let f of n)Gn.filter((o)=>{let E;try{E=o.test(f)}catch(M){throw Error(`Listener ${o.description} threw "${M}" at "${f}"`)}if(E===Bf)return S(o),!1;return E}).forEach((o)=>{let E;try{E=o.callback(f)}catch(M){console.error(`Listener ${o.description} threw "${M}" handling "${f}"`)}if(E===Bf)S(o)});if(typeof nf==="function")nf();if(P.perf)console.timeEnd("xin async update")},I=(n)=>{let f=typeof n==="string"?n:z(n);if(f===void 0)throw console.error("touch was called on an invalid target",n),Error("touch was called on an invalid target");if(tn===!1)an=new Promise((E)=>{nf=E}),tn=setTimeout(Uo);if(on.find((E)=>f.startsWith(E))==null)on.push(f);let o=f.match(/^(.+)\[(\d+)\](.*)$/);if(o!==null){let[,E,M,c]=o,L=parseInt(M,10),y=U(l,`${E}[${L}]`);if(y!=null){let m=ro(E,L,y,c);for(let w of m)if(on.find((C)=>w.startsWith(C))==null)on.push(w)}}},_=(n,f)=>{return new df(n,f)},S=(n)=>{let f=Gn.indexOf(n);if(f>-1)Gn.splice(f,1);else throw Error("unobserve failed, listener not found")};var of=(n,f)=>{let o=new Event(f);n.dispatchEvent(o)},Sf=(n)=>{if(n instanceof HTMLInputElement)return n.type;else if(n instanceof HTMLSelectElement&&n.hasAttribute("multiple"))return"multi-select";else return"other"},If=(n,f)=>{switch(Sf(n)){case"radio":n.checked=n.value===f;break;case"checkbox":n.checked=!!f;break;case"date":n.valueAsDate=new Date(f);break;case"multi-select":for(let o of Array.from(n.querySelectorAll("option")))o.selected=f[o.value];break;default:n.value=f}},Vf=(n)=>{switch(Sf(n)){case"radio":{let f=n.parentElement?.querySelector(`[name="${n.name}"]:checked`);return f!=null?f.value:null}case"checkbox":return n.checked;case"date":return n.valueAsDate?.toISOString();case"multi-select":return Array.from(n.querySelectorAll("option")).reduce((f,o)=>{return f[o.value]=o.selected,f},{});default:return n.value}},{ResizeObserver:Rf}=globalThis,yn=Rf!=null?new Rf((n)=>{for(let f of n){let o=f.target;of(o,"resize")}}):{observe(){},unobserve(){}},Ef=(n,f,o=!0)=>{if(n!=null&&f!=null)if(typeof f==="string")n.textContent=f;else if(Array.isArray(f))f.forEach((E)=>{n.append(E instanceof Node&&o?e(E):E)});else if(f instanceof Node)n.append(o?e(f):f);else throw Error("expect text content or document node")};var zn=(n,f=250)=>{let o;return(...E)=>{if(o!==void 0)clearTimeout(o);o=setTimeout(()=>{n(...E)},f)}},wn=(n,f=250)=>{let o,E=Date.now()-f,M=!1;return(...c)=>{if(clearTimeout(o),o=setTimeout(()=>{n(...c),E=Date.now()},f),!M&&Date.now()-E>=f){M=!0;try{n(...c),E=Date.now()}finally{M=!1}}}};var xn={value:{toDOM:If,fromDOM(n){return Vf(n)}},text:{toDOM(n,f){n.textContent=f}},enabled:{toDOM(n,f){n.disabled=!f}},disabled:{toDOM(n,f){n.disabled=Boolean(f)}},list:{toDOM(n,f,o){En(n,f,o).update(f)}}};function W(n){return n.replace(/[A-Z]/g,(f)=>{return`-${f.toLocaleLowerCase()}`})}function Mf(n){return n.replace(/-([a-z])/g,(f,o)=>{return o.toLocaleUpperCase()})}var jo=180/Math.PI,Ao=Math.PI/180;function j(n,f,o){return o<n?NaN:f<n?n:f>o?o:f}function V(n,f,o,E=!0){if(E)o=j(0,o,1);return o*(f-n)+n}var uf={RADIANS_TO_DEGREES:jo,DEGREES_TO_RADIANS:Ao,clamp:j,lerp:V};function Wn(n,f=document.body){let o=getComputedStyle(f);if(n.endsWith(")")&&n.startsWith("var("))n=n.slice(4,-1);return o.getPropertyValue(n).trim()}var Oo=(n,f,o)=>{return(0.299*n+0.587*f+0.114*o)/255},t=(n)=>("00"+Math.round(Number(n)).toString(16)).slice(-2);class Pf{h;s;l;constructor(n,f,o){n/=255,f/=255,o/=255;let E=Math.max(n,f,o),M=E-Math.min(n,f,o),c=M!==0?E===n?(f-o)/M:E===f?2+(o-n)/M:4+(n-f)/M:0;this.h=60*c<0?60*c+360:60*c,this.s=M!==0?E<=0.5?M/(2*E-M):M/(2-(2*E-M)):0,this.l=(2*E-M)/2}}var Mn=globalThis.document!==void 0?globalThis.document.createElement("span"):void 0;class x{r;g;b;a;static fromVar(n,f=document.body){return x.fromCss(Wn(n,f))}static fromCss(n){let f=n.match(/^#([0-9a-fA-F]+)$/);if(f){let m=f[1];if(m.length===3)return new x(parseInt(m[0]+m[0],16),parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16));if(m.length===4)return new x(parseInt(m[0]+m[0],16),parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)/255);if(m.length===6)return new x(parseInt(m.slice(0,2),16),parseInt(m.slice(2,4),16),parseInt(m.slice(4,6),16));if(m.length===8)return new x(parseInt(m.slice(0,2),16),parseInt(m.slice(2,4),16),parseInt(m.slice(4,6),16),parseInt(m.slice(6,8),16)/255)}let o=n;if(Mn instanceof HTMLSpanElement)Mn.style.color="black",Mn.style.color=n,document.body.appendChild(Mn),o=getComputedStyle(Mn).color,Mn.remove();let[E,M,c,L]=o.match(/[\d.]+/g)||["0","0","0","0"],y=o.startsWith("color(srgb")?255:1;return new x(Number(E)*y,Number(M)*y,Number(c)*y,L==null?1:Number(L))}static fromHsl(n,f,o,E=1){let M,c,L;if(f===0)M=c=L=o;else{let m=(Y,G,H)=>{if(H<0)H+=1;if(H>1)H-=1;if(H<0.16666666666666666)return Y+(G-Y)*6*H;if(H<0.5)return G;if(H<0.6666666666666666)return Y+(G-Y)*(0.6666666666666666-H)*6;return Y},w=o<0.5?o*(1+f):o+f-o*f,C=2*o-w,i=(n%360+360)%360/360;M=m(C,w,i+0.3333333333333333),c=m(C,w,i),L=m(C,w,i-0.3333333333333333)}let y=new x(M*255,c*255,L*255,E);return y.hslCached={h:(n%360+360)%360,s:f,l:o},y}static black=new x(0,0,0);static white=new x(255,255,255);constructor(n,f,o,E=1){this.r=j(0,n,255),this.g=j(0,f,255),this.b=j(0,o,255),this.a=j(0,E,1)}get inverse(){return new x(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:n,s:f,l:o}=this._hsl;return x.fromHsl(n,f,1-o,this.a)}get opaque(){return this.a===1?this:new x(this.r,this.g,this.b,1)}contrasting(n=1){return this.opaque.blend(this.brightness>0.5?x.black:x.white,n)}get rgb(){let{r:n,g:f,b:o}=this;return`rgb(${n.toFixed(0)},${f.toFixed(0)},${o.toFixed(0)})`}get rgba(){let{r:n,g:f,b:o,a:E}=this;return`rgba(${n.toFixed(0)},${f.toFixed(0)},${o.toFixed(0)},${E.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}hslCached;get _hsl(){if(this.hslCached==null)this.hslCached=new Pf(this.r,this.g,this.b);return this.hslCached}get hsl(){let{h:n,s:f,l:o}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(f*100).toFixed(0)}% ${(o*100).toFixed(0)}%)`}get hsla(){let{h:n,s:f,l:o}=this._hsl;return`hsl(${n.toFixed(0)}deg ${(f*100).toFixed(0)}% ${(o*100).toFixed(0)}% / ${(this.a*100).toFixed(0)}%)`}get mono(){let n=this.brightness*255;return new x(n,n,n)}get brightness(){return Oo(this.r,this.g,this.b)}get html(){return this.toString()}toString(){return this.a===1?"#"+t(this.r)+t(this.g)+t(this.b):"#"+t(this.r)+t(this.g)+t(this.b)+t(Math.floor(255*this.a))}brighten(n){let{h:f,s:o,l:E}=this._hsl,M=j(0,E+n*(1-E),1);return x.fromHsl(f,o,M,this.a)}darken(n){let{h:f,s:o,l:E}=this._hsl,M=j(0,E*(1-n),1);return x.fromHsl(f,o,M,this.a)}saturate(n){let{h:f,s:o,l:E}=this._hsl,M=j(0,o+n*(1-o),1);return x.fromHsl(f,M,E,this.a)}desaturate(n){let{h:f,s:o,l:E}=this._hsl,M=j(0,o*(1-n),1);return x.fromHsl(f,M,E,this.a)}rotate(n){let{h:f,s:o,l:E}=this._hsl,M=(f+360+n)%360;return x.fromHsl(M,o,E,this.a)}opacity(n){let{h:f,s:o,l:E}=this._hsl;return x.fromHsl(f,o,E,n)}swatch(){return console.log(`%c      %c ${this.html}, ${this.rgba}`,`background-color: ${this.html}`,"background-color: transparent"),this}blend(n,f){return new x(V(this.r,n.r,f),V(this.g,n.g,f),V(this.b,n.b,f),V(this.a,n.a,f))}static blendHue(n,f,o){let E=(f-n+720)%360;if(E<180)return n+o*E;else return n-(360-E)*o}mix(n,f){let o=this._hsl,E=n._hsl;return x.fromHsl(o.s===0?E.h:E.s===0?o.h:x.blendHue(o.h,E.h,f),V(o.s,E.s,f),V(o.l,E.l,f),V(this.a,n.a,f))}colorMix(n,f){return x.fromCss(`color-mix(in hsl, ${this.html}, ${n.html} ${(f*100).toFixed(0)}%)`)}static computedColorStylesheet=null;static computedColors=new Map;static recomputeQueued=!1;static registerComputedColor(n,f,o,E){if(!x.computedColors.has(n))x.computedColors.set(n,{varName:f,scale:o,method:E}),x.queueRecompute()}static queueRecompute(){if(x.recomputeQueued)return;x.recomputeQueued=!0,queueMicrotask(()=>{x.recomputeQueued=!1,x.recomputeColors()})}static recomputeColors(){if(x.computedColors.size===0)return;let n=[];for(let[o,{varName:E,scale:M,method:c}]of x.computedColors)try{let L=x.fromVar(E),y;switch(c){case"b":y=M>0?L.brighten(M):L.darken(-M);break;case"s":y=M>0?L.saturate(M):L.desaturate(-M);break;case"h":y=L.rotate(M*100);break;case"o":y=L.opacity(M);break;default:continue}n.push(`  ${o}: ${y.rgba};`)}catch(L){}if(n.length===0)return;let f=`:root {
${n.join(`
`)}
}`;if(x.computedColorStylesheet===null)x.computedColorStylesheet=document.createElement("style"),x.computedColorStylesheet.id="tosijs-computed-colors",document.head.append(x.computedColorStylesheet);x.computedColorStylesheet.textContent=f}}var kn=new Set,_f=!1;function so(){if(!_f)_f=!0,kn.add(()=>x.queueRecompute())}function bf(n){return kn.add(n),()=>kn.delete(n)}function Ko(){so();for(let n of kn)n()}function Nf(n,f){let o=F(f),E=T.style(b(o));E.id=n,document.head.append(E);let M=z(f);if(M!==void 0)cn(M,()=>{E.textContent=b(F(f)),Ko()})}var Bo=/^(animation-iteration-count|column-count|flex(-grow|-shrink)?|font-weight|line-height|opacity|order|orphans|scale|tab-size|widows|z-index|zoom)$/,cf=(n,f)=>{if(typeof f==="number"&&!Bo.test(n))f=`${f}px`;if(n.startsWith("_"))if(n.startsWith("__"))n="--"+n.substring(2),f=`var(${n}-default, ${f})`;else n="--"+n.substring(1);return{prop:n,value:String(f)}},Ro=(n,f,o)=>{if(o===void 0)return"";if(o instanceof x)o=o.html;let E=cf(f,o);return`${n}  ${E.prop}: ${E.value};`},hf=(n,f,o="")=>{let E=W(n);if(typeof f==="object"&&!(f instanceof x)){let M=Object.keys(f).map((c)=>hf(c,f[c],`${o}  `)).join(`
`);return`${o}  ${n} {
${M}
${o}  }`}else return Ro(o,E,f)},b=(n,f="")=>{return Object.keys(n).map((E)=>{let M=n[E];if(typeof M==="string"){if(E==="@import")return`@import url('${M}');`;throw Error("top-level string value only allowed for `@import`")}let c=Object.keys(M).map((L)=>hf(L,M[L])).join(`
`);return`${f}${E} {
${c}
}`}).join(`

`)},pf=(n)=>{d("initVars","initVars is deprecated. Just use _ and __ prefixes instead.");let f={};for(let o of Object.keys(n)){let E=n[o],M=W(o);f[`--${M}`]=typeof E==="number"&&E!==0?String(E)+"px":E}return f},gf=(n)=>{let f={};for(let o of Object.keys(n)){let E=n[o];if(E instanceof x)f[o]=E.inverseLuminance;else if(typeof E==="string"&&E.match(/^(#[0-9a-fA-F]{3}|rgba?\(|hsla?\()/))f[o]=x.fromCss(E).inverseLuminance}return f},Cn=new Proxy({},{get(n,f){if(n[f]===void 0){let o="--"+W(f);n[f]=(E)=>`var(${o}, ${E})`}return n[f]}}),qn=new Proxy({},{get(n,f){if(f==="default")return Cn;if(n[f]==null){f=W(f);let[,o,,E,M,c]=f.match(/^([-\w]*?)((_)?(\d+)(\w?))?$/)||["",f],L=`--${o}`;if(M!=null){let y=E==null?Number(M)/100:-Number(M)/100;switch(c){case"b":case"s":case"h":case"o":{let m=`--${f}`;x.registerComputedColor(m,L,y,c),n[f]=`var(${m})`}break;case"":n[f]=`calc(var(${L}) * ${y})`;break;default:throw console.error(c),Error(`Unrecognized method ${c} for css variable ${L}`)}}else n[f]=`var(${L})`}return n[f]}});function mf(){let n=(f)=>typeof matchMedia<"u"&&matchMedia(f).matches;return{colorScheme:n("(prefers-color-scheme: dark)")?"dark":"light",contrast:n("(prefers-contrast: more)")?"more":n("(prefers-contrast: less)")?"less":n("(prefers-contrast: custom)")?"custom":"no-preference",reducedMotion:n("(prefers-reduced-motion: reduce)"),reducedTransparency:n("(prefers-reduced-transparency: reduce)"),forcedColors:n("(forced-colors: active)")}}function vf(n){if(typeof matchMedia>"u")return()=>{};let f=["(prefers-color-scheme: dark)","(prefers-contrast: more)","(prefers-contrast: less)","(prefers-contrast: custom)","(prefers-reduced-motion: reduce)","(prefers-reduced-transparency: reduce)","(forced-colors: active)"],o=()=>n(mf()),E=f.map((M)=>matchMedia(M));for(let M of E)M.addEventListener("change",o);return()=>{for(let M of E)M.removeEventListener("change",o)}}var ef="http://www.w3.org/1998/Math/MathML",lf="http://www.w3.org/2000/svg";var rn={},tf=(n,f,o)=>{let E=cf(W(f),o);if(E.prop.startsWith("--"))n.style.setProperty(E.prop,E.value);else n.style[f]=E.value},So=(n)=>{return{toDOM(f,o){tf(f,n,o)}}},af=(n,f,o)=>{if(f==="style")if(typeof o==="object")for(let E of Object.keys(o))if(z(o[E]))A(n,o[E],So(E));else tf(n,E,o[E]);else n.setAttribute("style",o);else{let E=W(f),M=n.constructor.observedAttributes;if(M?.includes(f)||M?.includes(E))if(typeof o==="boolean")o?n.setAttribute(E,""):n.removeAttribute(E);else n.setAttribute(E,o);else if(n[f]!==void 0){let{MathMLElement:L}=globalThis;if(n instanceof SVGElement||L!==void 0&&n instanceof L)n.setAttribute(f,o);else n[f]=o}else if(E==="class")o.split(" ").forEach((L)=>{n.classList.add(L)});else if(n[E]!==void 0)n[E]=o;else if(typeof o==="boolean")o?n.setAttribute(E,""):n.removeAttribute(E);else n.setAttribute(E,o)}},Lf={},Io=(n)=>{if(!Lf[n])Lf[n]={toDOM(f,o){af(f,n,o)}};return Lf[n]},Vo=(n,f,o)=>{if(f==="apply")o(n);else if(f.match(/^on[A-Z]/)!=null){let E=f.substring(2).toLowerCase();a(n,E,o)}else if(f==="bind")if((typeof o.binding==="string"?xn[o.binding]:o.binding)!==void 0&&o.value!==void 0)A(n,o.value,o.binding instanceof Function?{toDOM:o.binding}:o.binding);else throw Error("bad binding");else if(f.match(/^bind[A-Z]/)!=null){let E=f.substring(4,5).toLowerCase()+f.substring(5),M=xn[E];if(M!==void 0)A(n,o,M);else throw Error(`${f} is not allowed, bindings.${E} is not defined`)}else if(z(o))A(n,o,Io(f));else af(n,f,o)},yf=(n,...f)=>{if(rn[n]===void 0){let[M,c]=n.split("|");if(c===void 0)rn[n]=globalThis.document.createElement(M);else rn[n]=globalThis.document.createElementNS(c,M)}let o=rn[n].cloneNode(),E={};for(let M of f)if(M instanceof Element||M instanceof DocumentFragment||typeof M==="string"||typeof M==="number")if(o instanceof HTMLTemplateElement)o.content.append(M);else o.append(M);else if(z(M))o.append(T.span({bindText:M}));else Object.assign(E,M);for(let M of Object.keys(E)){let c=E[M];Vo(o,M,c)}return o},wf=(...n)=>{let f=globalThis.document.createDocumentFragment();for(let o of n)f.append(o);return f},T=new Proxy({fragment:wf},{get(n,f){if(f=f.replace(/[A-Z]/g,(o)=>`-${o.toLocaleLowerCase()}`),n[f]===void 0)n[f]=(...o)=>yf(f,...o);return n[f]},set(){throw Error("You may not add new properties to elements")}}),Un=new Proxy({fragment:wf},{get(n,f){if(n[f]===void 0)n[f]=(...o)=>yf(`${f}|${lf}`,...o);return n[f]},set(){throw Error("You may not add new properties to elements")}}),jn=new Proxy({fragment:wf},{get(n,f){if(n[f]===void 0)n[f]=(...o)=>yf(`${f}|${ef}`,...o);return n[f]},set(){throw Error("You may not add new properties to elements")}});var uo=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],Po=!0,_o=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,bo=(n)=>_o.test(n),N=(n="",f="")=>{if(n==="")return f;else if(f.match(/^\d+$/)!==null||f.includes("="))return`${n}[${f}]`;else return`${n}.${f}`},Eo={};function xf(n,f){if(n!==null&&(typeof n==="object"||typeof n==="function"))return n;return new Proxy(Eo,h(f,!0))}var Hn=()=>new Proxy({},h("^",!0)),Cf=(n)=>{let o=n(Hn())?.path;if(!o?.startsWith("^."))throw Error("selector must return a property of the item");return o.substring(2)},Hf=(n,f,o)=>{for(let E=0;E<n.length;E++)if(`${U(n[E],f)}`===`${o}`)return E;return-1},no=(n,f)=>({listFind(o,E){if(o instanceof Element){let L=o;while(L&&!L[v]&&L.parentElement)L=L.parentElement;let y=L?.[v];if(y==null)return;let m=f.indexOf(y);return m!==-1?k[n][m]:void 0}let M=Cf(o),c=Hf(f,M,E);return c!==-1?k[n][c]:void 0},listUpdate(o,E){let M=Cf(o),c=U(E,M),L=Hf(f,M,c);if(L!==-1){let y=k[n][L];for(let m of Object.keys(E))y[m]=E[m];return y}return k[n].push(E),k[n][f.length-1]},listRemove(o,E){let M=Cf(o),c=Hf(f,M,E);if(c===-1)return!1;return k[n].splice(c,1),!0}}),fo=!1;function nn(){if(!fo)console.warn("xinValue, tosiValue, xinPath, tosiPath, etc. are deprecated. Use value, path, observe, bind, on, binding, listBinding instead."),fo=!0}var oo=(n)=>{return n===Eo},h=(n,f)=>({get(o,E){if(oo(o)){let y=()=>U(l,n);switch(E){case"path":return n;case"value":return y();case"valueOf":case"toJSON":return()=>y();case Symbol.toPrimitive:return(m)=>{let w=y();if(m==="number")return Number(w);if(m==="string")return String(w);return w};case"toString":return()=>String(y());case"touch":return()=>I(n);case"observe":return(m)=>{let w=_(n,m);return()=>S(w)};case"on":return(m,w)=>Ln()(m,w,y());case"bind":return(m,w,C)=>{mn()(m,n,w,C)};case"binding":return(m)=>({bind:{value:n,binding:m}});case"listBinding":return(m=({span:C})=>C({bindText:"^"}),w={})=>[{bindList:{value:n,...w}},T.template(m(T,Hn()))];case"listFind":case"listUpdate":case"listRemove":return no(n,o)[E];case B:case"xinValue":case"tosiValue":return nn(),y();case r:case"xinPath":case"tosiPath":return nn(),n;case _n:case"tosiObserve":return nn(),(m)=>{let w=_(n,m);return()=>S(w)};case Nn:case"tosiOn":return nn(),(m,w)=>Ln()(m,w,y());case bn:case"tosiBind":return nn(),(m,w,C)=>{mn()(m,n,w,C)};case"tosiBinding":return nn(),(m)=>({bind:{value:n,binding:m}});case"tosiListBinding":return nn(),(m=({span:C})=>C({bindText:"^"}),w={})=>[{bindList:{value:n,...w}},T.template(m(T,Hn()))]}if(typeof E==="string"&&/^\d+$/.test(E)){let m=y();if(typeof m==="string")return m[parseInt(E,10)]}if(E==="length"){let m=y();if(typeof m==="string")return m.length}return}if(f&&!(E in o))switch(E){case"path":return n;case"value":return o.valueOf?o.valueOf():o;case"valueOf":case"toJSON":return()=>o.valueOf?o.valueOf():o;case"touch":return()=>I(n);case"observe":return(y)=>{let m=_(n,y);return()=>S(m)};case"on":return(y,m)=>Ln()(y,m,F(o));case"bind":return(y,m,w)=>{mn()(y,n,m,w)};case"binding":return(y)=>({bind:{value:n,binding:y}});case"listBinding":return(y=({span:w})=>w({bindText:"^"}),m={})=>[{bindList:{value:n,...m}},T.template(y(T,Hn()))];case"listFind":case"listUpdate":case"listRemove":return no(n,o)[E]}switch(E){case r:case"xinPath":case"tosiPath":return n;case B:case"xinValue":case"tosiValue":return o.valueOf?o.valueOf():o;case _n:case"xinObserve":case"tosiObserve":return(y)=>{let m=_(n,y);return()=>S(m)};case Nn:case"xinOn":case"tosiOn":return(y,m)=>Ln()(y,m,F(o));case bn:case"xinBind":case"tosiBind":return(y,m,w)=>{mn()(y,n,m,w)};case"tosiBinding":return(y)=>({bind:{value:n,binding:y}});case"tosiListBinding":return(y=({span:w})=>w({bindText:"^"}),m={})=>[{bindList:{value:n,...m}},T.template(y(T,Hn()))]}if(typeof E==="symbol")return o[E];let M=Object.getOwnPropertyDescriptor(o,E);if(M&&!M.configurable&&!M.writable&&"value"in M)return M.value;let c=E,L=c.match(/^([^.[]+)\.(.+)$/)??c.match(/^([^\]]+)(\[.+)/)??c.match(/^(\[[^\]]+\])\.(.+)$/)??c.match(/^(\[[^\]]+\])\[(.+)$/);if(L!==null){let[,y,m]=L,w=N(n,y),C=U(o,y);return C!==null&&typeof C==="object"?new Proxy(C,h(w,f))[m]:C}if(c.startsWith("[")&&c.endsWith("]"))c=c.substring(1,c.length-1);if(!Array.isArray(o)&&o[c]!==void 0||Array.isArray(o)&&c.includes("=")){let y;if(c.includes("=")){let[m,w]=c.split("=");y=o.find((C)=>`${U(C,m)}`===w)}else y=o[c];if(y instanceof Object){let m=N(n,c);return new Proxy(y instanceof Function?y.bind(o):y,h(m,f))}else return f?xf(y,N(n,c)):y}else if(Array.isArray(o)){let y=o[c];return typeof y==="function"?(...m)=>{let w=m.map((i)=>F(i)),C=y.apply(o,w);if(uo.includes(c))I(n);if(C!=null&&typeof C==="object"){if(c==="find"||c==="findLast"||c==="at"){let i=o.indexOf(C);if(i!==-1)return new Proxy(C,h(N(n,String(i)),f))}}return C}:typeof y==="object"?new Proxy(y,h(N(n,c),f)):f?xf(y,N(n,c)):y}else return f?xf(o[c],N(n,c)):o[c]},set(o,E,M){M=F(M);let L=E===B||E==="xinValue"||E==="tosiValue"||E==="value"&&(oo(o)||f)?n:N(n,E);if(Po&&!bo(L))throw Error(`setting invalid path ${L}`);if(F(Q[L])!==M&&Of(l,L,M))I(L);return!0}}),cn=(n,f)=>{let o=typeof f==="function"?f:Q[f];if(typeof o!=="function")throw Error(`observe expects a function or path to a function, ${f} is neither`);return _(n,o)},Q=new Proxy(l,h("",!1));sf(Q);var k=new Proxy(l,h("",!0));var No=16,ho=100;function Mo(n,f){let o=Array.from(n.querySelectorAll(u));if(n.matches(u))o.unshift(n);for(let E of o){let M=K.get(E);for(let c of M){if(c.path.startsWith("^"))c.path=`${f}${c.path.substring(1)}`;if(c.binding.toDOM!=null)c.binding.toDOM(E,Q[c.path])}}}class co{boundElement;listTop;listBottom;template;options;itemToElement;array=[];_filteredCache;_update;_previousSlice;static filterBoundObservers=new WeakMap;constructor(n,f,o={}){if(this.boundElement=n,this.itemToElement=new WeakMap,o.idPath!=null){let E=z(f);if(E!=null)Zf(E,o.idPath)}if(n.children.length!==1)throw Error("ListBinding expects an element with exactly one child element");if(n.children[0]instanceof HTMLTemplateElement){let E=n.children[0];if(E.content.children.length!==1)throw Error("ListBinding expects a template with exactly one child element");this.template=e(E.content.children[0])}else this.template=n.children[0],this.template.remove();if(this.options=o,this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.listTop.classList.add("virtual-list-padding"),this.listBottom.classList.add("virtual-list-padding"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),this.boundElement[fn]=this,o.virtual!=null)if(yn.observe(this.boundElement),this._update=wn(()=>{this.update(this.array,!0)},No),this.boundElement.addEventListener("resize",this._update),o.virtual.scrollContainer==="window")window.addEventListener("scroll",this._update),window.addEventListener("resize",this._update);else this.boundElement.addEventListener("scroll",this._update)}filteredArray(){if(this._filteredCache!=null)return this._filteredCache;let{hiddenProp:n,visibleProp:f}=this.options,o=this.array;if(n!==void 0)o=o.filter((E)=>E[n]!==!0);if(f!==void 0)o=o.filter((E)=>E[f]===!0);if(this.options.filter&&this.needle!==void 0)o=this.options.filter(o,this.needle);return this._filteredCache=o,o}visibleSlice(){let{virtual:n}=this.options,f=this.filteredArray(),o=0,E=f.length-1,M=0,c=0;if(n!=null&&this.boundElement instanceof HTMLElement){let L=this.boundElement.offsetWidth,y=n.scrollContainer==="window",m,w;if(y){m=window.innerHeight;let Y=this.boundElement.getBoundingClientRect();w=Math.max(0,-Y.top)}else m=this.boundElement.offsetHeight,w=this.boundElement.scrollTop;let C=n.width!=null?Math.max(1,Math.floor(L/n.width)):n.visibleColumns??1,i=Math.ceil(f.length/C);if(n.minHeight!=null){let Y=n.minHeight,G=Math.ceil(m/Y)+(n.rowChunkSize||1),H=C*G,$=i*Y,D=Math.max(0,$-m),q=D>0?Math.min(1,Math.max(0,w/D)):0,X=Math.max(0,i-G+1),J=q*X,Z=Math.floor(J);if(n.rowChunkSize)Z-=Z%n.rowChunkSize;return o=Z*C,E=o+H-1,M=w,c=Math.max(0,$-w-m),{items:f,firstItem:o,lastItem:E,topBuffer:M,bottomBuffer:c,interpolation:{t:q,position:J,scrollTop:w,viewportHeight:m,totalScrollHeight:$,rowHeight:n.height}}}else{let Y=Math.ceil(m/n.height)+(n.rowChunkSize||1),G=C*Y,H=Math.floor(w/n.height);if(H>i-Y+1)H=Math.max(0,i-Y+1);if(n.rowChunkSize)H-=H%n.rowChunkSize;o=H*C,E=o+G-1,M=H*n.height,c=Math.max((i-Y)*n.height-M,0)}}return{items:f,firstItem:o,lastItem:E,topBuffer:M,bottomBuffer:c}}needle;filter=wn((n)=>{if(this.needle!==n)this.needle=n,this.update(this.array)},ho);update(n,f){if(n==null)n=[];if(this.array=n,!f)this._filteredCache=void 0;let{hiddenProp:o,visibleProp:E}=this.options,M=z(n),c=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",c.items.length===0);let L=this._previousSlice,{firstItem:y,lastItem:m,topBuffer:w,bottomBuffer:C}=c,i=o===void 0&&E===void 0&&f===!0&&L!=null&&y===L.firstItem&&m===L.lastItem;if(i&&c.interpolation==null&&w===L.topBuffer&&C===L.bottomBuffer)return;if(i&&c.interpolation!=null){this._updateInterpolatedBuffers(c);return}this._previousSlice=c;let Y=0,G=0,H=0;for(let X of Array.from(this.boundElement.children)){if(X===this.listTop||X===this.listBottom)continue;let J=X[v];if(J==null)X.remove();else{let Z=c.items.indexOf(J);if(Z<y||Z>m)X.remove(),this.itemToElement.delete(J),Y++}}this.listTop.style.height=String(w)+"px",this.listBottom.style.height=String(C)+"px";let $=[],{idPath:D}=this.options;for(let X=y;X<=m;X++){let J=c.items[X];if(J===void 0)continue;let Z=this.itemToElement.get(F(J));if(Z==null){if(H++,Z=e(this.template),typeof J==="object")this.itemToElement.set(F(J),Z),Z[v]=F(J);if(this.boundElement.insertBefore(Z,this.listBottom),D!=null){let p=J[D],Fn=`${M}[${D}=${p}]`;Mo(Z,Fn)}else{let p=`${M}[${X}]`;Mo(Z,p)}}$.push(Z)}let q=null;for(let X of $){if(X.previousElementSibling!==q)if(G++,q?.nextElementSibling!=null)this.boundElement.insertBefore(X,q.nextElementSibling);else this.boundElement.insertBefore(X,this.listBottom);q=X}if(c.interpolation!=null)this._updateInterpolatedBuffers(c);if(P.perf)console.log(M,"updated",{removed:Y,created:H,moved:G})}_updateInterpolatedBuffers(n){let{t:f,position:o,scrollTop:E,viewportHeight:M,totalScrollHeight:c,rowHeight:L}=n.interpolation,y=0;for(let i of Array.from(this.boundElement.children)){if(i===this.listTop||i===this.listBottom)continue;y+=i.offsetHeight||L}let m=E,w=E+M-y,C=Math.max(0,f*w+(1-f)*m-o%1*L);this.listTop.style.height=String(C)+"px",this.listBottom.style.height=String(Math.max(0,c-C-y))+"px"}}var En=(n,f,o)=>{let E=n[fn];if(f&&E===void 0)E=new co(n,f,o),n[fn]=E;return E},An=(n)=>{let f;while(!(f=n[v])&&n&&n.parentElement)n=n.parentElement;return f?{element:n,item:f}:void 0},On=(n)=>{let f=An(n);return f?f.item:void 0},mo=(n)=>{let f=An(n);if(!f)return console.error("deleteListItem failed, element is not part of a list instance",n),!1;let o=En(f.element.parentElement);if(!o.options.idPath)return console.error("deleteListItem failed, list binding has no idPath",n.parentElement,o),!1;let E=o.array.indexOf(f.item);if(E>-1)return o.array.splice(E,1),!0;return!1},po={start:"start",middle:"center",end:"end",nearest:"nearest"},Lo=(n,f,o={})=>{let E=En(n);if(E==null)return console.error("scrollListItemIntoView failed, element has no list binding",n),!1;let{position:M="middle"}=o,c=E.filteredArray(),L=F(f)??f,y=c.indexOf(L);if(y===-1)return console.error("scrollListItemIntoView failed, item not found in list",f),!1;let{virtual:m}=E.options;if(m!=null&&n instanceof HTMLElement){let w=m.width!=null?Math.max(1,Math.floor(n.offsetWidth/m.width)):m.visibleColumns??1,C=Math.floor(y/w),i=m.minHeight??m.height,Y=Math.ceil(c.length/w),G=m.scrollContainer==="window",H=G?window.innerHeight:n.offsetHeight,$;if(m.minHeight!=null){let D=Math.ceil(H/i)+(m.rowChunkSize||1),q=Y*i,X=Math.max(0,q-H),J=Math.max(1,Y-D+1),Z=C/J;switch(M){case"start":$=Z*X;break;case"end":$=Math.max(0,(C-D+1)/J*X);break;case"nearest":{let p=G?Math.max(0,-n.getBoundingClientRect().top):n.scrollTop,Fn=X>0?p/X:0,$f=Math.floor(Fn*J);if(C<$f)$=Z*X;else if(C>=$f+D)$=Math.max(0,(C-D+1)/J*X);else return!0;break}default:{let p=C-Math.floor(D/2);$=Math.max(0,p)/J*X}}}else{let D=C*m.height;switch(M){case"start":$=D;break;case"end":$=D-H+m.height;break;case"nearest":{let q=G?Math.max(0,-n.getBoundingClientRect().top):n.scrollTop;if(D<q)$=D;else if(D+m.height>q+H)$=D-H+m.height;else return!0;break}default:$=D-(H-m.height)/2}}if($=Math.max(0,$),G){let D=n.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:D+$,behavior:"smooth"})}else n.scrollTo({top:$,behavior:"smooth"})}else{let w=E.itemToElement.get(L);if(w==null)return console.error("scrollListItemIntoView failed, no DOM element found for item",f),!1;w.scrollIntoView({block:po[M]??"center",behavior:"smooth"})}return!0};var{document:Xn,MutationObserver:yo}=globalThis,sn=(n,f)=>{let o=K.get(n);if(o==null)return;for(let E of o){let{binding:M,options:c}=E,{path:L}=E,{toDOM:y}=M;if(y!=null){if(L.startsWith("^")){let m=On(n);if(m!=null&&m[r]!=null)L=E.path=`${m[r]}${L.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${L}`,n,"is not part of a list"),Error(`Cannot resolve relative binding ${L}`)}if(f==null||L.startsWith(f))y(n,Qn()[L],c)}}};if(yo!=null)new yo((f)=>{f.forEach((o)=>{Array.from(o.addedNodes).forEach((E)=>{if(E instanceof Element)Array.from(E.querySelectorAll(u)).forEach((M)=>sn(M))})})}).observe(Xn.body,{subtree:!0,childList:!0});_(()=>!0,(n)=>{let f=Array.from(Xn.querySelectorAll(u));for(let o of f)sn(o,n)});var wo=(n)=>{let f=n.target?.closest(u);while(f!=null){let o=K.get(f);for(let E of o){let{binding:M,path:c}=E,{fromDOM:L}=M;if(L!=null){let y;try{y=L(f,E.options)}catch(m){throw console.error("Cannot get value from",f,"via",E),Error("Cannot obtain value fromDOM")}if(y!=null){let m=Qn(),w=m[c];if(w==null)m[c]=y;else{let C=w[r]!=null?w[B]:w,i=y[r]!=null?y[B]:y;if(C!==i)m[c]=i}}}}f=f.parentElement.closest(u)}};if(globalThis.document!=null)Xn.body.addEventListener("change",wo,!0),Xn.body.addEventListener("input",wo,!0);function A(n,f,o,E){if(n instanceof DocumentFragment)throw Error("bind cannot bind to a DocumentFragment");let M;if(typeof f==="object"&&f[r]===void 0&&E===void 0){let{value:y}=f;M=typeof y==="string"?y:y[r],E=f,delete E.value}else M=typeof f==="string"?f:f[r];if(M==null)throw Error("bind requires a path or object with xin Proxy");let{toDOM:c}=o;n.classList?.add(Vn);let L=K.get(n);if(L==null)L=[],K.set(n,L);if(L.push({path:M,binding:o,options:E}),c!=null&&!M.startsWith("^"))I(M);if(E?.filter&&E?.needle)A(n,E.needle,{toDOM(y,m){console.log({needle:m}),y[fn]?.filter(m)}});return n}var xo=new Set,go=(n)=>{let f=n?.target?.closest(Pn),o=!1,E=new Proxy(n,{get(c,L){if(L==="stopPropagation")return()=>{n.stopPropagation(),o=!0};else{let y=c[L];return typeof y==="function"?y.bind(c):y}}}),M=new Set;while(!o&&f!=null){let L=g.get(f)[n.type]||M;for(let y of L){if(typeof y==="function")y(E);else{let m=Qn()[y];if(typeof m==="function")m(E);else throw Error(`no event handler found at path ${y}`)}if(o)continue}f=f.parentElement!=null?f.parentElement.closest(Pn):null}};function a(n,f,o){let E=g.get(n);if(n.classList.add(un),E==null)E={},g.set(n,E);if(!E[f])E[f]=new Set;if(E[f].add(o),!xo.has(f))xo.add(f),Xn.body.addEventListener(f,go,!0);return()=>{E[f].delete(o)}}Kf(A,a);function Kn(n,f){if(!n.internals)return;let o={},E="";if(n.hasAttribute("required")&&f==="")o.valueMissing=!0,E="Please fill out this field.";let M=n.getAttribute("minlength");if(M&&f.length<parseInt(M,10))o.tooShort=!0,E=`Please use at least ${M} characters.`;let c=n.getAttribute("maxlength");if(c&&f.length>parseInt(c,10))o.tooLong=!0,E=`Please use no more than ${c} characters.`;let L=n.getAttribute("pattern");if(L&&f!=="")try{if(!new RegExp(`^(?:${L})$`).test(f))o.patternMismatch=!0,E="Please match the requested format."}catch{}if(Object.keys(o).length>0)n.internals.setValidity(o,E,n);else n.internals.setValidity({})}var vo=0;function Xf(){return`custom-elt${(vo++).toString(36)}`}var Co=0,Tf=null;function eo(){if(Tf===null)Tf=new MutationObserver((n)=>{let f=new Set;for(let o of n)if(o.type==="attributes"&&o.target instanceof O){let E=o.target,M=Mf(o.attributeName);if(E._legacyTrackedAttrs?.has(M))f.add(E)}for(let o of f)o.queueRender(!1)});return Tf}var Tn={};function lo(n,f){let o=Tn[n],E=b(f).replace(/:host\(([^)]+)\)/g,`${n}$1`).replace(/:host\b/g,n);Tn[n]=o?o+`
`+E:E}function to(n){if(Tn[n])document.head.append(T.style({id:n+"-component"},Tn[n]));delete Tn[n]}class O extends HTMLElement{static elements=T;static _elementCreator;static initAttributes;static formAssociated;internals;get validity(){return this.internals?.validity}get validationMessage(){return this.internals?.validationMessage??""}get willValidate(){return this.internals?.willValidate??!1}checkValidity(){return this.internals?.checkValidity()??!0}reportValidity(){return this.internals?.reportValidity()??!0}setCustomValidity(n){if(this.internals)if(n)this.internals.setValidity({customError:!0},n);else this.internals.setValidity({})}setValidity(n,f,o){this.internals?.setValidity(n,f,o)}setFormValue(n,f){this.internals?.setFormValue(n,f)}static get observedAttributes(){let n=this.initAttributes;if(n)return["hidden",...Object.keys(n).map(W)];return["hidden"]}instanceId;styleNode;static styleSpec;static styleNode;content=T.slot();isSlotted;static _tagName=null;static get tagName(){return this._tagName}_legacyTrackedAttrs;_attrValues;_valueChanged=!1;static StyleNode(n){return console.warn("StyleNode is deprecated, just assign static styleSpec: XinStyleSheet to the class directly"),T.style(b(n))}static elementCreator(n={}){let f=this;if(f._elementCreator==null){let{tag:o,styleSpec:E}=n,M=n!=null?o:null;if(M==null)if(typeof f.name==="string"&&f.name!==""){if(M=W(f.name),M.startsWith("-"))M=M.slice(1)}else M=Xf();if(customElements.get(M)!=null)console.warn(`${M} is already defined`);if(M.match(/\w+(-\w+)+/)==null)console.warn(`${M} is not a legal tag for a custom-element`),M=Xf();while(customElements.get(M)!==void 0)M=Xf();if(f._tagName=M,E!==void 0)lo(M,E);window.customElements.define(M,this,n),f._elementCreator=T[M]}return f._elementCreator}initAttributes(...n){if(d("initAttributes","initAttributes() is deprecated. Use static initAttributes = { ... } instead."),!this._legacyTrackedAttrs)this._legacyTrackedAttrs=new Set;for(let M of n)this._legacyTrackedAttrs.add(M);eo().observe(this,{attributes:!0});let o={},E={};n.forEach((M)=>{o[M]=s(this[M]);let c=W(M);Object.defineProperty(this,M,{enumerable:!1,get(){if(typeof o[M]==="boolean")return this.hasAttribute(c);else if(this.hasAttribute(c))return typeof o[M]==="number"?parseFloat(this.getAttribute(c)):this.getAttribute(c);else if(E[M]!==void 0)return E[M];else return o[M]},set(L){if(typeof o[M]==="boolean"){if(L!==this[M]){if(L)this.setAttribute(c,"");else this.removeAttribute(c);this.queueRender()}}else if(typeof o[M]==="number"){if(L!==parseFloat(this[M]))this.setAttribute(c,L),this.queueRender()}else if(typeof L==="object"||`${L}`!==`${this[M]}`){if(L===null||L===void 0||typeof L==="object")this.removeAttribute(c);else this.setAttribute(c,L);this.queueRender(),E[M]=L}}})})}initValue(){let n=Object.getOwnPropertyDescriptor(this,"value");if(n===void 0||n.get!==void 0||n.set!==void 0)return;let f=this.hasAttribute("value")?this.getAttribute("value"):s(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get(){return f},set(o){if(f!==o)f=o,this._valueChanged=!0,this.queueRender(!0)}})}_parts;get parts(){let n=this.shadowRoot!=null?this.shadowRoot:this;if(this._parts==null)this._parts=new Proxy({},{get(f,o){if(f[o]===void 0){let E=n.querySelector(`[part="${o}"]`);if(E==null)E=n.querySelector(o);if(E==null)throw Error(`elementRef "${o}" does not exist!`);E.removeAttribute("data-ref"),f[o]=E}return f[o]}});return this._parts}attributeChangedCallback(n,f,o){let E=Mf(n);if(!this._legacyTrackedAttrs?.has(E))this.queueRender(!1)}constructor(){super();if(Co+=1,this.constructor.formAssociated&&typeof this.attachInternals==="function"&&!this.internals)this.internals=this.attachInternals();let n=this.constructor.initAttributes;if(n)this._setupAttributeAccessors(n);this.instanceId=`${this.tagName.toLocaleLowerCase()}-${Co}`,this._value=s(this.defaultValue)}_setupAttributeAccessors(n){if(!this._attrValues)this._attrValues=new Map;for(let f of Object.keys(n)){let o=W(f),E=n[f];if(f==="value"){console.warn(`${this.tagName}: 'value' cannot be an attribute. Use the Component value property instead.`);continue}if(typeof E==="object"&&E!==null){console.warn(`${this.tagName}: initAttributes.${f} is an object. Use a regular property instead.`);continue}let M=this,c=!1;while(M){let L=Object.getOwnPropertyDescriptor(M,f);if(L){if(!L.configurable||L.get||L.set){c=!0;break}break}M=Object.getPrototypeOf(M)}if(c)continue;Object.defineProperty(this,f,{enumerable:!1,get:()=>{if(typeof E==="boolean")return this.hasAttribute(o);else if(this.hasAttribute(o))return typeof E==="number"?parseFloat(this.getAttribute(o)):this.getAttribute(o);else if(this._attrValues.has(f))return this._attrValues.get(f);else return E},set:(L)=>{if(typeof E==="boolean"){if(L!==this[f]){if(L)this.setAttribute(o,"");else this.removeAttribute(o);this.queueRender()}}else if(typeof E==="number"){if(L!==parseFloat(this[f]))this.setAttribute(o,L),this.queueRender()}else if(typeof L==="object"||`${L}`!==`${this[f]}`){if(L===null||L===void 0||typeof L==="object")this.removeAttribute(o);else this.setAttribute(o,L);this.queueRender(),this._attrValues.set(f,L)}}})}}connectedCallback(){if(to(this.constructor.tagName),this.hydrate(),this.role!=null)this.setAttribute("role",this.role);if(this.constructor.formAssociated&&!this.hasAttribute("tabindex"))this.setAttribute("tabindex","0");if(this.onResize!==void 0){if(yn.observe(this),this._onResize==null)this._onResize=this.onResize.bind(this);this.addEventListener("resize",this._onResize)}if(this.value!=null&&this.getAttribute("value")!=null)this._value=this.getAttribute("value");if(this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this.queueRender()}disconnectedCallback(){yn.unobserve(this)}formResetCallback(){if(this.value!==void 0)this.value=this.defaultValue??""}formDisabledCallback(n){if(n)this.setAttribute("disabled","");else this.removeAttribute("disabled")}formStateRestoreCallback(n){if(this.value!==void 0&&typeof n==="string")this.value=n}_changeQueued=!1;_renderQueued=!1;queueRender(n=!1){if(!this._hydrated)return;if(!this._changeQueued)this._changeQueued=n;if(!this._renderQueued)this._renderQueued=!0,requestAnimationFrame(()=>{if(this._changeQueued){if(of(this,"change"),this.internals&&this.value!==void 0)this.internals.setFormValue(this.value)}this._changeQueued=!1,this._renderQueued=!1,this.render()})}_hydrated=!1;hydrate(){if(!this._hydrated){this.initValue();let n=typeof this.content!=="function",f=typeof this.content==="function"?this.content(T):this.content,{styleSpec:o}=this.constructor,{styleNode:E}=this.constructor;if(o)E=this.constructor.styleNode=T.style(b(o)),delete this.constructor.styleNode;if(this.styleNode)console.warn(this,"styleNode is deprecrated, use static styleNode or statc styleSpec instead"),E=this.styleNode;if(E){let M=this.attachShadow({mode:"open"});M.appendChild(E.cloneNode(!0)),Ef(M,f,n)}else if(f!==null){let M=Array.from(this.childNodes);Ef(this,f,n),this.isSlotted=this.querySelector("slot,xin-slot")!==void 0;let c=Array.from(this.querySelectorAll("slot"));if(c.length>0)c.forEach(Df.replaceSlot);if(M.length>0){let L={"":this};Array.from(this.querySelectorAll("xin-slot")).forEach((y)=>{L[y.name]=y}),M.forEach((y)=>{let m=L[""],w=y instanceof Element?L[y.slot]:m;(w!==void 0?w:m).append(y)})}}this._hydrated=!0}}render(){if(this._valueChanged&&this.internals&&this.value!==void 0)this.internals.setFormValue(this.value),this.validateValue();this._valueChanged=!1}validateValue(){if(!this.internals||this.value===void 0)return;let n=typeof this.value==="string"?this.value:String(this.value);Kn(this,n)}}class Df extends O{static initAttributes={name:""};content=null;static replaceSlot(n){let f=document.createElement("xin-slot");if(n.name!=="")f.setAttribute("name",n.name);n.replaceWith(f)}}var FM=Df.elementCreator({tag:"xin-slot"});var Ho=(n=()=>!0)=>{let f=localStorage.getItem("xin-state");if(f!=null){let E=JSON.parse(f);for(let M of Object.keys(E).filter(n))if(Q[M]!==void 0)Object.assign(Q[M],E[M]);else Q[M]=E[M]}let o=zn(()=>{let E={},M=F(Q);for(let c of Object.keys(M).filter(n))E[c]=M[c];localStorage.setItem("xin-state",JSON.stringify(E)),console.log("xin state saved to localStorage")},500);cn(n,o)};var Bn="1.4.0";function Dn(n){return Object.assign(k,n),k}function Yn(n){return d("boxedProxy","boxedProxy is deprecated, please use tosi() instead"),Dn(n)}function dn(n,f=!1){if(f)return d("xinProxy-boxed","xinProxy(..., true) is deprecated; use tosi(...) instead"),Yn(n);return Object.keys(n).forEach((o)=>{Q[o]=n[o]}),Q}var ao={};async function $n(n,f){let{type:o,styleSpec:E}=await f(n,{Color:x,Component:O,elements:T,svgElements:Un,mathML:jn,varDefault:Cn,vars:qn,xin:Q,boxed:k,xinProxy:dn,boxedProxy:Yn,tosi:Dn,makeComponent:$n,bind:A,on:a,version:Bn}),M={type:o,creator:o.elementCreator({tag:n,styleSpec:E})};return ao[n]=M,M}var Yf={},nE=(n)=>import(n);class Jn extends O{static initAttributes={tag:"anon-elt",src:"",property:"default"};loaded;blueprintLoaded=(n)=>{};async packaged(){let{tag:n,src:f,property:o}=this,E=`${n}.${o}:${f}`;if(!this.loaded){if(Yf[E]===void 0)Yf[E]=nE(f).then((M)=>{let c=M[o];return $n(n,c)});else console.log(`using cached ${n} with signature ${E}`);this.loaded=await Yf[E],this.blueprintLoaded(this.loaded)}return this.loaded}}var io=Jn.elementCreator({tag:"xin-blueprint",styleSpec:{":host":{display:"none"}}});class Rn extends O{allLoaded=()=>{};constructor(){super()}async load(){let f=Array.from(this.querySelectorAll(Jn.tagName)).filter((o)=>o.src).map((o)=>o.packaged());await Promise.all(f),this.allLoaded()}connectedCallback(){super.connectedCallback(),this.load()}}var Xo=Rn.elementCreator({tag:"xin-loader",styleSpec:{":host":{display:"none"}}});})();

//# debugId=72427FA46BE75F2864756E2164756E21
//# sourceMappingURL=index.js.map
